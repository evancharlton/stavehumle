(this["webpackJsonpstaver-humle"]=this["webpackJsonpstaver-humle"]||[]).push([[0],{10:function(e,t,n){e.exports={grid:"Grid_grid__1BRwy",border:"Grid_border__20nNQ",letter:"Grid_letter__FpcEt",filler:"Grid_filler__1NEAc"}},15:function(e,t,n){e.exports={container:"Hive_container__1Zjua",gameContainer:"Hive_gameContainer__23RNb",buttonsContainer:"Hive_buttonsContainer__3BlGP",column:"Hive_column__uIVAh"}},27:function(e,t,n){e.exports={wordList:"Found_wordList__kw6ut"}},28:function(e,t,n){e.exports={container:"Progress_container__2gTl_"}},29:function(e,t,n){e.exports={header:"Header_header__Yh4QF"}},30:function(e,t,n){e.exports={container:"ErrorDisplay_container__2V7dW"}},38:function(e,t,n){},39:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),s=n.n(c),a=n(24),o=n.n(a),u=(n(38),n(39),n(12)),i=n(2),l=function(e){return e<10?"0".concat(e):e},j=function(){var e=Object(i.f)();return Object(c.useEffect)((function(){var t=new Date;e.replace("/".concat([t.getFullYear(),t.getMonth()+1,t.getDate()].map(l).join("-")))}),[e]),null},d=n(4),b=n(26),f=function(e){return fetch(e,{headers:{"Content-Type":"application/json","Content-Encoding":"gzip"}}).then((function(e){return e.arrayBuffer()})).then((function(e){return new Uint8Array(e)})).then((function(e){return b.a.inflate(e)})).then((function(e){return new TextDecoder("utf-8").decode(e)})).then((function(e){return JSON.parse(e)}))},h=function(e){for(var t=0,n=0;n<e.length;n+=1){t=31*t+e.charCodeAt(n)}return t},O=function(){var e=Object(i.g)().gameId;return{gameId:e,gameHash:h(e)}},x=Object(c.createContext)({centerLetter:"",outerLetters:["","","","","",""],all:""}),g=function(e){var t=e.children,n=O().gameHash,s=Object(c.useState)(""),a=Object(d.a)(s,2),o=a[0],u=a[1],i=Object(c.useState)(),l=Object(d.a)(i,2),j=l[0],b=l[1];if(Object(c.useEffect)((function(){f("".concat("/staver-humle","/words/options.json.gz")).then((function(e){return e[n%e.length]})).then(u).catch((function(e){console.error(e),b(e)}))}),[n]),j)return Object(r.jsx)("div",{children:"Error!"});if(!o)return Object(r.jsx)("div",{children:"Loading ..."});var h=o.split(""),g=h[n%h.length],v=h.filter((function(e){return e!==g}));return Object(r.jsx)(x.Provider,{value:{centerLetter:g,outerLetters:v,all:o},children:t})},v=function(){return Object(c.useContext)(x)},m=Object(c.createContext)({words:[]}),p=function(e){var t=e.children,n=v(),s=n.all,a=n.centerLetter,o=Object(c.useState)([]),u=Object(d.a)(o,2),i=u[0],l=u[1],j=Object(c.useState)(),b=Object(d.a)(j,2),h=b[0],O=b[1];return Object(c.useEffect)((function(){var e=s.substring(0,3),t="".concat("/staver-humle","/words/").concat(e,".json.gz");f(t).then((function(e){return e[s]})).then((function(e){return e.filter((function(e){return e.includes(a)}))})).then(l).catch(O)}),[s,a]),h?Object(r.jsx)("pre",{children:h.message}):0===i.length?Object(r.jsx)("div",{children:"Loading ..."}):Object(r.jsx)(m.Provider,{value:{words:i},children:t})},_=function(){return Object(c.useContext)(m)},k=n(17),w=n(9),C=function(e){return{score:Object(c.useMemo)((function(){return e.map((function(e){return 4===e.length?1:e.length<7?e.length:(7===new Set(e.split("")).size?7:0)+e.length})).reduce((function(e,t){return e+t}),0)}),[e])}},N=function(){return Object(c.useContext)(ee)},L=n(27),B=n.n(L),y=function(){var e=N().found,t=Object(c.useMemo)((function(){return Object.keys(e.reduce((function(e,t){return Object(w.a)(Object(w.a)({},e),{},Object(k.a)({},t,!0))}),{}))}),[e]);return Object(r.jsx)("ul",{className:B.a.wordList,children:t.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"https://naob.no/s%C3%B8k/".concat(encodeURIComponent(e)),target:"_blank",rel:"noopener noreferrer",children:e})},e)}))})},S=n(32),E=n(18),F=function(e){return e.map((function(e){return{sort:Math.random(),value:e}})).sort((function(e,t){return e.sort-t.sort})).map((function(e){return e.value}))},G=n(8),I=n.n(G),A=function(){var e=N().onGuess,t=v(),n=t.all,s=t.centerLetter,a=t.outerLetters,o=Object(c.useState)(""),u=Object(d.a)(o,2),i=u[0],l=u[1],j=Object(c.useState)([]),b=Object(d.a)(j,2),f=b[0],h=b[1],O=Object(c.useRef)("");O.current=i,Object(c.useEffect)((function(){O.current="",h(F(a))}),[a,h,O]);var x=Object(c.useCallback)((function(){e(O.current),l("")}),[e,O]),g=Object(c.useCallback)((function(e){var t=e.currentTarget.getAttribute("data-letter");l((function(e){return"".concat(e).concat(t)}))}),[l]),m=Object(c.useCallback)((function(){h(F(a))}),[h,a]),p=Object(c.useCallback)((function(){l((function(e){return e.substr(0,e.length-1)}))}),[l]),_=Object(c.useCallback)((function(e){var t=e.key;if("Backspace"!==t){if(" "===t)return m(),void e.preventDefault();"Enter"===t&&x(),n.includes(t.toLocaleLowerCase())&&l((function(e){return"".concat(e).concat(t)}))}else l((function(e){return e.substring(0,e.length-1)}))}),[n,x,m]);Object(c.useEffect)((function(){return document.addEventListener("keydown",_),function(){document.removeEventListener("keydown",_)}}),[_]);var k=function(e){var t=e.letter,n=e.className,c=Object(S.a)(e,["letter","className"]);return Object(r.jsx)("button",Object(w.a)(Object(w.a)({"data-letter":t,onClick:g,className:[I.a.letterButton,n].filter(Boolean).join(" ")},c),{},{children:t}))},C=function(e){return Object(r.jsx)(k,Object(w.a)(Object(w.a)({},e),{},{className:I.a.centerLetter}))};return Object(r.jsxs)("div",{className:I.a.container,children:[Object(r.jsx)("div",{className:I.a.guess,children:i}),Object(r.jsxs)("div",{className:I.a.letterButtons,children:[Object(r.jsxs)("div",{className:I.a.topRow,children:[Object(r.jsx)(k,{letter:f[0]}),Object(r.jsx)(k,{letter:f[1]})]}),Object(r.jsxs)("div",{className:I.a.middleRow,children:[Object(r.jsx)(k,{letter:f[2]}),Object(r.jsx)(C,{letter:s}),Object(r.jsx)(k,{letter:f[3]})]}),Object(r.jsxs)("div",{className:I.a.bottomRow,children:[Object(r.jsx)(k,{letter:f[4]}),Object(r.jsx)(k,{letter:f[5]})]})]}),Object(r.jsxs)("div",{className:I.a.controls,children:[Object(r.jsx)("button",{onClick:p,children:Object(r.jsx)(E.a,{})}),Object(r.jsx)("button",{onClick:m,children:Object(r.jsx)(E.c,{})}),Object(r.jsx)("button",{onClick:x,children:Object(r.jsx)(E.b,{})})]})]})},H=n(28),M=n.n(H),P=function(){var e=N().found,t=_().words,n=C(e).score,c=C(t).score;return Object(r.jsxs)("div",{className:M.a.container,children:[Object(r.jsx)("progress",{id:"word-progress",max:t.length,value:e.length}),Object(r.jsxs)("label",{htmlFor:"word-progress",children:["Ord: ",e.length," / ",t.length]}),Object(r.jsx)("progress",{id:"points-progress",max:c,value:n}),Object(r.jsxs)("label",{htmlFor:"points-progress",children:["Poeng: ",n," / ",c]})]})},T=n(29),R=n.n(T),D=function(){return Object(r.jsx)("div",{className:R.a.header,children:Object(r.jsx)("h1",{children:Object(r.jsx)(u.b,{to:"/",children:"Staver Humle \ud83d\udc1d"})})})},J=function(e){var t="";switch(e.code){case"already-found":t="ordet har blitt allerede funnet";break;case"invalid-letters":t="bruker ugyldige bokstaver";break;case"missing-center":t="mangler obligatorisk brev";break;case"too-short":t="for kort";break;case"unknown-word":t="ukjent ord";break;default:return null}return Object(r.jsx)("span",{children:t})},z=n(30),W=n.n(z),Q=function(){var e=N().badGuess,t=Object(c.useState)(),n=Object(d.a)(t,2),s=n[0],a=n[1];return Object(c.useEffect)((function(){a(e);var t=setTimeout((function(){a(void 0)}),2500);return function(){clearTimeout(t)}}),[e]),Object(r.jsx)("div",{className:W.a.container,children:Object(r.jsx)(J,{code:s})})},U=n(10),V=n.n(U),Y=Object(r.jsx)("span",{className:V.a.filler,children:"\u2013"}),Z=function(){for(var e=_().words,t=v().all,n=e.reduce((function(e,t){var n=Object(d.a)(e,2),r=n[0],c=n[1];return[Math.min(r,t.length),Math.max(c,t.length)]}),[1e3,3]),c=Object(d.a)(n,2),s=c[0],a=c[1],o=[Object(r.jsx)("th",{children:"\xa0"})],u=[],i=function(t){o.push(Object(r.jsx)("th",{children:t},t));var n=e.filter((function(e){return e.length===t})).length;u.push(Object(r.jsx)("td",{children:n||Y},"total @ ".concat(t)))},l=s;l<=a;l+=1)i(l);o.push(Object(r.jsx)("th",{children:"\u03a3"}));for(var j=[],b=function(n){for(var c=t[n],o=e.filter((function(e){return e[0]===c})),u=[Object(r.jsx)("td",{className:[V.a.border,V.a.letter].join(" "),children:c},c)],i=function(e){var t=o.filter((function(t){return t.length===e})).length;u.push(Object(r.jsx)("td",{children:t||Y},"".concat(c," @ ").concat(e)))},l=s;l<=a;l+=1)i(l);u.push(Object(r.jsx)("td",{className:V.a.border,children:o.length||Y},"".concat(c," @ total"))),j.push(Object(r.jsx)("tr",{children:u}))},f=0;f<t.length;f+=1)b(f);return j.push(Object(r.jsxs)("tr",{className:V.a.border,children:[Object(r.jsx)("td",{children:"\u03a3"}),u,Object(r.jsx)("td",{children:e.length})]})),Object(r.jsxs)("table",{className:V.a.grid,children:[Object(r.jsx)("thead",{children:Object(r.jsx)("tr",{className:V.a.border,children:o})}),Object(r.jsx)("tbody",{children:j})]})},X=n(15),q=n.n(X),K=n(31),$=function(){var e=O().gameId,t="saved/".concat(e),n=Object(c.useState)([]),r=Object(d.a)(n,2),s=r[0],a=r[1],o=Object(c.useCallback)((function(e){a((function(n){var r=[].concat(Object(K.a)(n),[e]).sort();return localStorage.setItem(t,JSON.stringify(r)),r}))}),[a,t]);return Object(c.useEffect)((function(){a(function(e){try{var t=localStorage.getItem(e);if(t){var n=JSON.parse(t);if(Array.isArray(n))return n.filter((function(e){return"string"===typeof e}))}}catch(r){}return[]}(t))}),[t,a]),{found:s,addFoundWord:o}},ee=Object(c.createContext)({found:[],onGuess:function(){},badGuess:void 0}),te=function(){var e=Object(c.useState)(),t=Object(d.a)(e,2),n=t[0],s=t[1],a=v(),o=a.all,u=a.centerLetter,i=_().words,l=$(),j=l.found,b=l.addFoundWord,f=Object(c.useCallback)((function(e){if(e){var t=e.toLocaleLowerCase().split("").filter((function(e){return o.includes(e)})).join("");t.length===e.length?t.length<4?s("too-short"):t.includes(u)?j.includes(t)?s("already-found"):i.includes(t)?b(t):s("unknown-word"):s("missing-center"):s("invalid-letters")}}),[o,u,j,i,b]);return Object(r.jsx)(ee.Provider,{value:{found:j,onGuess:f,badGuess:n},children:Object(r.jsxs)("div",{className:q.a.container,children:[Object(r.jsx)(D,{}),Object(r.jsxs)("div",{className:q.a.gameContainer,children:[Object(r.jsxs)("div",{className:q.a.buttonsContainer,children:[Object(r.jsx)(Q,{}),Object(r.jsx)(A,{})]}),Object(r.jsxs)("div",{className:q.a.column,children:[Object(r.jsx)(P,{}),Object(r.jsx)(y,{}),Object(r.jsx)(Z,{})]})]})]})})},ne=function(){return Object(r.jsx)(g,{children:Object(r.jsx)(p,{children:Object(r.jsx)(te,{})})})},re=function(){return Object(r.jsx)(u.a,{children:Object(r.jsxs)(i.c,{children:[Object(r.jsx)(i.a,{path:"/",exact:!0,children:Object(r.jsx)(j,{})}),Object(r.jsx)(i.a,{path:"/:gameId",children:Object(r.jsx)(ne,{})})]})})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};o.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(re,{})}),document.getElementById("root")),ce()},8:function(e,t,n){e.exports={container:"Buttons_container__1Zt8k",guess:"Buttons_guess__2Anft",letterButton:"Buttons_letterButton__1mMw1",centerLetter:"Buttons_centerLetter__35133",letterButtons:"Buttons_letterButtons__3XtpL",controls:"Buttons_controls__vjaFF"}}},[[45,1,2]]]);
//# sourceMappingURL=main.a2e75079.chunk.js.map