(this["webpackJsonpstaver-humle"]=this["webpackJsonpstaver-humle"]||[]).push([[0],{16:function(e,t,n){e.exports={container:"Hive_container__1Zjua",buttonsContainer:"Hive_buttonsContainer__3BlGP",column:"Hive_column__uIVAh"}},26:function(e,t,n){e.exports={wordList:"Found_wordList__kw6ut"}},34:function(e,t,n){},35:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),o=n.n(r),u=n(23),s=n.n(u),a=(n(34),n(35),n(13)),i=n(2),j=function(e){return e<10?"0".concat(e):e},l=function(){var e=Object(i.f)();return Object(r.useEffect)((function(){var t=new Date;e.replace("/".concat([t.getFullYear(),t.getMonth()+1,t.getDate()].map(j).join("-")))}),[e]),null},b=n(7),d=n(25),f=function(e){return fetch(e,{headers:{"Content-Type":"application/json","Content-Encoding":"gzip"}}).then((function(e){return e.arrayBuffer()})).then((function(e){return new Uint8Array(e)})).then((function(e){return d.a.inflate(e)})).then((function(e){return new TextDecoder("utf-8").decode(e)})).then((function(e){return JSON.parse(e)}))},O=function(e){for(var t=0,n=0;n<e.length;n+=1){t=31*t+e.charCodeAt(n)}return t},h=Object(r.createContext)({centerLetter:"",outerLetters:["","","","","",""],all:""}),x=function(e){var t=e.children,n=function(){var e=Object(i.g)().gameId;return{gameId:e,gameHash:O(e)}}().gameHash,o=Object(r.useState)(""),u=Object(b.a)(o,2),s=u[0],a=u[1],j=Object(r.useState)(),l=Object(b.a)(j,2),d=l[0],x=l[1];if(Object(r.useEffect)((function(){f("".concat("/staver-humle","/words/options.json.gz")).then((function(e){return e[n%e.length]})).then(a).catch((function(e){console.error(e),x(e)}))}),[n]),d)return Object(c.jsx)("div",{children:"Error!"});if(!s)return Object(c.jsx)("div",{children:"Loading ..."});var v=s.split(""),m=v[n%v.length],g=v.filter((function(e){return e!==m}));return Object(c.jsx)(h.Provider,{value:{centerLetter:m,outerLetters:g,all:s},children:t})},v=function(){return Object(r.useContext)(h)},m=Object(r.createContext)({words:[]}),g=function(e){var t=e.children,n=v(),o=n.all,u=n.centerLetter,s=Object(r.useState)([]),a=Object(b.a)(s,2),i=a[0],j=a[1],l=Object(r.useState)(),d=Object(b.a)(l,2),O=d[0],h=d[1];return Object(r.useEffect)((function(){var e=o.substring(0,3),t="".concat("/staver-humle","/words/").concat(e,".json.gz");f(t).then((function(e){return e[o]})).then((function(e){return e.filter((function(e){return e.includes(u)}))})).then(j).catch(h)}),[o,u]),O?Object(c.jsx)("pre",{children:O.message}):0===i.length?Object(c.jsx)("div",{children:"Loading ..."}):Object(c.jsx)(m.Provider,{value:{words:i},children:t})},p=function(){return Object(r.useContext)(m)},_=n(27),C=function(e){return{score:Object(r.useMemo)((function(){return e.map((function(e){return 4===e.length?1:e.length<7?e.length:(7===new Set(e.split("")).size?7:0)+e.length})).reduce((function(e,t){return e+t}),0)}),[e])}},w=function(){return Object(r.useContext)(T)},L=function(){var e=w().found,t=p().words,n=C(e).score,r=C(t).score;return Object(c.jsxs)("h1",{children:[n," / ",r]})},k=n(15),B=n(9),N=n(26),E=n.n(N),S=function(){var e=w().found,t=Object(r.useMemo)((function(){return Object.keys(e.reduce((function(e,t){return Object(B.a)(Object(B.a)({},e),{},Object(k.a)({},t,!0))}),{}))}),[e]);return Object(c.jsx)("ul",{className:E.a.wordList,children:t.map((function(e){return Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"https://naob.no/s%C3%B8k/".concat(encodeURIComponent(e)),target:"_blank",rel:"noopener noreferrer",children:e})},e)}))})},y=n(28),F=n(17),I=function(e){return e.map((function(e){return{sort:Math.random(),value:e}})).sort((function(e,t){return e.sort-t.sort})).map((function(e){return e.value}))},M=n(8),P=n.n(M),A=function(){var e=w().onGuess,t=v(),n=t.all,o=t.centerLetter,u=t.outerLetters,s=Object(r.useState)(""),a=Object(b.a)(s,2),i=a[0],j=a[1],l=Object(r.useState)([]),d=Object(b.a)(l,2),f=d[0],O=d[1],h=Object(r.useRef)("");h.current=i,Object(r.useEffect)((function(){h.current="",O(I(u))}),[u,O,h]);var x=Object(r.useCallback)((function(){e(h.current),j("")}),[e,h]),m=Object(r.useCallback)((function(e){var t=e.currentTarget.getAttribute("data-letter");j((function(e){return"".concat(e).concat(t)}))}),[j]),g=Object(r.useCallback)((function(){O(I(u))}),[O,u]),p=Object(r.useCallback)((function(){j((function(e){return e.substr(0,e.length-1)}))}),[j]),_=Object(r.useCallback)((function(e){var t=e.key;if("Backspace"!==t){if(" "===t)return g(),void e.preventDefault();"Enter"===t&&x(),n.includes(t)&&j((function(e){return"".concat(e).concat(t)}))}else j((function(e){return e.substring(0,e.length-1)}))}),[n,x,g]);Object(r.useEffect)((function(){return document.addEventListener("keydown",_),function(){document.removeEventListener("keydown",_)}}),[_]);var C=function(e){var t=e.letter,n=e.className,r=Object(y.a)(e,["letter","className"]);return Object(c.jsx)("button",Object(B.a)(Object(B.a)({"data-letter":t,onClick:m,className:[P.a.letterButton,n].filter(Boolean).join(" ")},r),{},{children:t}))},L=function(e){return Object(c.jsx)(C,Object(B.a)(Object(B.a)({},e),{},{className:P.a.centerLetter}))};return Object(c.jsxs)("div",{className:P.a.container,children:[Object(c.jsx)("div",{className:P.a.guess,children:i}),Object(c.jsxs)("div",{className:P.a.letterButtons,children:[Object(c.jsxs)("div",{className:P.a.topRow,children:[Object(c.jsx)(C,{letter:f[0]}),Object(c.jsx)(C,{letter:f[1]})]}),Object(c.jsxs)("div",{className:P.a.middleRow,children:[Object(c.jsx)(C,{letter:f[2]}),Object(c.jsx)(L,{letter:o}),Object(c.jsx)(C,{letter:f[3]})]}),Object(c.jsxs)("div",{className:P.a.bottomRow,children:[Object(c.jsx)(C,{letter:f[4]}),Object(c.jsx)(C,{letter:f[5]})]})]}),Object(c.jsxs)("div",{className:P.a.controls,children:[Object(c.jsx)("button",{onClick:p,children:Object(c.jsx)(F.a,{})}),Object(c.jsx)("button",{onClick:g,children:Object(c.jsx)(F.c,{})}),Object(c.jsx)("button",{onClick:x,children:Object(c.jsx)(F.b,{})})]})]})},D=function(){var e=w().found,t=p().words;return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{children:[e.length," / ",t.length]})})},H=n(16),R=n.n(H),T=Object(r.createContext)({found:[],onGuess:function(){}}),z=function(){var e=v(),t=e.all,n=e.centerLetter,o=p().words,u=Object(r.useState)([]),s=Object(b.a)(u,2),a=s[0],i=s[1],j=Object(r.useCallback)((function(e){var c=e.toLocaleLowerCase().split("").filter((function(e){return t.includes(e)})).join("");c.length<4||c.includes(n)&&(a.includes(c)||o.includes(c)&&i((function(e){return[].concat(Object(_.a)(e),[c]).sort()})))}),[t,n,a,o]);return Object(c.jsx)(T.Provider,{value:{found:a,onGuess:j},children:Object(c.jsxs)("div",{className:R.a.container,children:[Object(c.jsx)("div",{className:R.a.buttonsContainer,children:Object(c.jsx)(A,{})}),Object(c.jsxs)("div",{className:R.a.column,children:[Object(c.jsx)(D,{}),Object(c.jsx)(L,{}),Object(c.jsx)(S,{})]})]})})},G=function(){return Object(c.jsx)(x,{children:Object(c.jsx)(g,{children:Object(c.jsx)(z,{})})})},J=function(){return Object(c.jsx)(a.a,{children:Object(c.jsxs)(i.c,{children:[Object(c.jsx)(i.a,{path:"/",exact:!0,children:Object(c.jsx)(l,{})}),Object(c.jsx)(i.a,{path:"/:gameId",children:Object(c.jsx)(G,{})})]})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,u=t.getTTFB;n(e),c(e),r(e),o(e),u(e)}))};s.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(J,{})}),document.getElementById("root")),U()},8:function(e,t,n){e.exports={container:"Buttons_container__1Zt8k",guess:"Buttons_guess__2Anft",letterButton:"Buttons_letterButton__1mMw1",centerLetter:"Buttons_centerLetter__35133",letterButtons:"Buttons_letterButtons__3XtpL",controls:"Buttons_controls__vjaFF"}}},[[41,1,2]]]);
//# sourceMappingURL=main.4c952d8e.chunk.js.map