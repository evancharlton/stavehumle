(this["webpackJsonpstaver-humle"]=this["webpackJsonpstaver-humle"]||[]).push([[0],{14:function(e,t,n){e.exports={container:"Hive_container__1Zjua",gameContainer:"Hive_gameContainer__23RNb",buttonsContainer:"Hive_buttonsContainer__3BlGP",column:"Hive_column__uIVAh"}},26:function(e,t,n){e.exports={wordList:"Found_wordList__kw6ut"}},27:function(e,t,n){e.exports={header:"Header_header__Yh4QF"}},35:function(e,t,n){},36:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),o=n.n(r),s=n(23),u=n.n(s),a=(n(35),n(36),n(11)),i=n(2),j=function(e){return e<10?"0".concat(e):e},l=function(){var e=Object(i.f)();return Object(r.useEffect)((function(){var t=new Date;e.replace("/".concat([t.getFullYear(),t.getMonth()+1,t.getDate()].map(j).join("-")))}),[e]),null},b=n(7),d=n(25),f=function(e){return fetch(e,{headers:{"Content-Type":"application/json","Content-Encoding":"gzip"}}).then((function(e){return e.arrayBuffer()})).then((function(e){return new Uint8Array(e)})).then((function(e){return d.a.inflate(e)})).then((function(e){return new TextDecoder("utf-8").decode(e)})).then((function(e){return JSON.parse(e)}))},O=function(e){for(var t=0,n=0;n<e.length;n+=1){t=31*t+e.charCodeAt(n)}return t},h=Object(r.createContext)({centerLetter:"",outerLetters:["","","","","",""],all:""}),x=function(e){var t=e.children,n=function(){var e=Object(i.g)().gameId;return{gameId:e,gameHash:O(e)}}().gameHash,o=Object(r.useState)(""),s=Object(b.a)(o,2),u=s[0],a=s[1],j=Object(r.useState)(),l=Object(b.a)(j,2),d=l[0],x=l[1];if(Object(r.useEffect)((function(){f("".concat("/staver-humle","/words/options.json.gz")).then((function(e){return e[n%e.length]})).then(a).catch((function(e){console.error(e),x(e)}))}),[n]),d)return Object(c.jsx)("div",{children:"Error!"});if(!u)return Object(c.jsx)("div",{children:"Loading ..."});var v=u.split(""),m=v[n%v.length],g=v.filter((function(e){return e!==m}));return Object(c.jsx)(h.Provider,{value:{centerLetter:m,outerLetters:g,all:u},children:t})},v=function(){return Object(r.useContext)(h)},m=Object(r.createContext)({words:[]}),g=function(e){var t=e.children,n=v(),o=n.all,s=n.centerLetter,u=Object(r.useState)([]),a=Object(b.a)(u,2),i=a[0],j=a[1],l=Object(r.useState)(),d=Object(b.a)(l,2),O=d[0],h=d[1];return Object(r.useEffect)((function(){var e=o.substring(0,3),t="".concat("/staver-humle","/words/").concat(e,".json.gz");f(t).then((function(e){return e[o]})).then((function(e){return e.filter((function(e){return e.includes(s)}))})).then(j).catch(h)}),[o,s]),O?Object(c.jsx)("pre",{children:O.message}):0===i.length?Object(c.jsx)("div",{children:"Loading ..."}):Object(c.jsx)(m.Provider,{value:{words:i},children:t})},_=function(){return Object(r.useContext)(m)},p=n(28),C=function(e){return{score:Object(r.useMemo)((function(){return e.map((function(e){return 4===e.length?1:e.length<7?e.length:(7===new Set(e.split("")).size?7:0)+e.length})).reduce((function(e,t){return e+t}),0)}),[e])}},w=function(){return Object(r.useContext)(J)},L=function(){var e=w().found,t=_().words,n=C(e).score,r=C(t).score;return Object(c.jsxs)("h1",{children:[n," / ",r]})},k=n(16),B=n(9),N=n(26),S=n.n(N),E=function(){var e=w().found,t=Object(r.useMemo)((function(){return Object.keys(e.reduce((function(e,t){return Object(B.a)(Object(B.a)({},e),{},Object(k.a)({},t,!0))}),{}))}),[e]);return Object(c.jsx)("ul",{className:S.a.wordList,children:t.map((function(e){return Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"https://naob.no/s%C3%B8k/".concat(encodeURIComponent(e)),target:"_blank",rel:"noopener noreferrer",children:e})},e)}))})},F=n(29),y=n(17),H=function(e){return e.map((function(e){return{sort:Math.random(),value:e}})).sort((function(e,t){return e.sort-t.sort})).map((function(e){return e.value}))},I=n(8),M=n.n(I),P=function(){var e=w().onGuess,t=v(),n=t.all,o=t.centerLetter,s=t.outerLetters,u=Object(r.useState)(""),a=Object(b.a)(u,2),i=a[0],j=a[1],l=Object(r.useState)([]),d=Object(b.a)(l,2),f=d[0],O=d[1],h=Object(r.useRef)("");h.current=i,Object(r.useEffect)((function(){h.current="",O(H(s))}),[s,O,h]);var x=Object(r.useCallback)((function(){e(h.current),j("")}),[e,h]),m=Object(r.useCallback)((function(e){var t=e.currentTarget.getAttribute("data-letter");j((function(e){return"".concat(e).concat(t)}))}),[j]),g=Object(r.useCallback)((function(){O(H(s))}),[O,s]),_=Object(r.useCallback)((function(){j((function(e){return e.substr(0,e.length-1)}))}),[j]),p=Object(r.useCallback)((function(e){var t=e.key;if("Backspace"!==t){if(" "===t)return g(),void e.preventDefault();"Enter"===t&&x(),n.includes(t.toLocaleLowerCase())&&j((function(e){return"".concat(e).concat(t)}))}else j((function(e){return e.substring(0,e.length-1)}))}),[n,x,g]);Object(r.useEffect)((function(){return document.addEventListener("keydown",p),function(){document.removeEventListener("keydown",p)}}),[p]);var C=function(e){var t=e.letter,n=e.className,r=Object(F.a)(e,["letter","className"]);return Object(c.jsx)("button",Object(B.a)(Object(B.a)({"data-letter":t,onClick:m,className:[M.a.letterButton,n].filter(Boolean).join(" ")},r),{},{children:t}))},L=function(e){return Object(c.jsx)(C,Object(B.a)(Object(B.a)({},e),{},{className:M.a.centerLetter}))};return Object(c.jsxs)("div",{className:M.a.container,children:[Object(c.jsx)("div",{className:M.a.guess,children:i}),Object(c.jsxs)("div",{className:M.a.letterButtons,children:[Object(c.jsxs)("div",{className:M.a.topRow,children:[Object(c.jsx)(C,{letter:f[0]}),Object(c.jsx)(C,{letter:f[1]})]}),Object(c.jsxs)("div",{className:M.a.middleRow,children:[Object(c.jsx)(C,{letter:f[2]}),Object(c.jsx)(L,{letter:o}),Object(c.jsx)(C,{letter:f[3]})]}),Object(c.jsxs)("div",{className:M.a.bottomRow,children:[Object(c.jsx)(C,{letter:f[4]}),Object(c.jsx)(C,{letter:f[5]})]})]}),Object(c.jsxs)("div",{className:M.a.controls,children:[Object(c.jsx)("button",{onClick:_,children:Object(c.jsx)(y.a,{})}),Object(c.jsx)("button",{onClick:g,children:Object(c.jsx)(y.c,{})}),Object(c.jsx)("button",{onClick:x,children:Object(c.jsx)(y.b,{})})]})]})},R=function(){var e=w().found,t=_().words;return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{children:[e.length," / ",t.length]})})},A=n(27),D=n.n(A),T=function(){return Object(c.jsx)("div",{className:D.a.header,children:Object(c.jsx)("h1",{children:Object(c.jsx)(a.b,{to:"/",children:"Staver Humle \ud83d\udc1d"})})})},z=n(14),G=n.n(z),J=Object(r.createContext)({found:[],onGuess:function(){}}),U=function(){var e=v(),t=e.all,n=e.centerLetter,o=_().words,s=Object(r.useState)([]),u=Object(b.a)(s,2),a=u[0],i=u[1],j=Object(r.useCallback)((function(e){var c=e.toLocaleLowerCase().split("").filter((function(e){return t.includes(e)})).join("");c.length<4||c.includes(n)&&(a.includes(c)||o.includes(c)&&i((function(e){return[].concat(Object(p.a)(e),[c]).sort()})))}),[t,n,a,o]);return Object(c.jsx)(J.Provider,{value:{found:a,onGuess:j},children:Object(c.jsxs)("div",{className:G.a.container,children:[Object(c.jsx)(T,{}),Object(c.jsxs)("div",{className:G.a.gameContainer,children:[Object(c.jsx)("div",{className:G.a.buttonsContainer,children:Object(c.jsx)(P,{})}),Object(c.jsxs)("div",{className:G.a.column,children:[Object(c.jsx)(R,{}),Object(c.jsx)(L,{}),Object(c.jsx)(E,{})]})]})]})})},Y=function(){return Object(c.jsx)(x,{children:Object(c.jsx)(g,{children:Object(c.jsx)(U,{})})})},Z=function(){return Object(c.jsx)(a.a,{children:Object(c.jsxs)(i.c,{children:[Object(c.jsx)(i.a,{path:"/",exact:!0,children:Object(c.jsx)(l,{})}),Object(c.jsx)(i.a,{path:"/:gameId",children:Object(c.jsx)(Y,{})})]})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),o(e),s(e)}))};u.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(Z,{})}),document.getElementById("root")),Q()},8:function(e,t,n){e.exports={container:"Buttons_container__1Zt8k",guess:"Buttons_guess__2Anft",letterButton:"Buttons_letterButton__1mMw1",centerLetter:"Buttons_centerLetter__35133",letterButtons:"Buttons_letterButtons__3XtpL",controls:"Buttons_controls__vjaFF"}}},[[42,1,2]]]);
//# sourceMappingURL=main.35ffba53.chunk.js.map