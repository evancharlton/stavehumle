(this["webpackJsonpstaver-humle"]=this["webpackJsonpstaver-humle"]||[]).push([[0],{14:function(e,t,n){e.exports={container:"Hive_container__1Zjua",gameContainer:"Hive_gameContainer__23RNb",buttonsContainer:"Hive_buttonsContainer__3BlGP",column:"Hive_column__uIVAh"}},26:function(e,t,n){e.exports={wordList:"Found_wordList__kw6ut"}},27:function(e,t,n){e.exports={container:"Progress_container__2gTl_"}},28:function(e,t,n){e.exports={header:"Header_header__Yh4QF"}},29:function(e,t,n){e.exports={container:"ErrorDisplay_container__2V7dW"}},37:function(e,t,n){},38:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),o=n.n(c),s=n(23),a=n.n(s),u=(n(37),n(38),n(11)),i=n(2),l=function(e){return e<10?"0".concat(e):e},j=function(){var e=Object(i.f)();return Object(c.useEffect)((function(){var t=new Date;e.replace("/".concat([t.getFullYear(),t.getMonth()+1,t.getDate()].map(l).join("-")))}),[e]),null},b=n(4),d=n(25),f=function(e){return fetch(e,{headers:{"Content-Type":"application/json","Content-Encoding":"gzip"}}).then((function(e){return e.arrayBuffer()})).then((function(e){return new Uint8Array(e)})).then((function(e){return d.a.inflate(e)})).then((function(e){return new TextDecoder("utf-8").decode(e)})).then((function(e){return JSON.parse(e)}))},O=function(e){for(var t=0,n=0;n<e.length;n+=1){t=31*t+e.charCodeAt(n)}return t},h=function(){var e=Object(i.g)().gameId;return{gameId:e,gameHash:O(e)}},x=Object(c.createContext)({centerLetter:"",outerLetters:["","","","","",""],all:""}),v=function(e){var t=e.children,n=h().gameHash,o=Object(c.useState)(""),s=Object(b.a)(o,2),a=s[0],u=s[1],i=Object(c.useState)(),l=Object(b.a)(i,2),j=l[0],d=l[1];if(Object(c.useEffect)((function(){f("".concat("/staver-humle","/words/options.json.gz")).then((function(e){return e[n%e.length]})).then(u).catch((function(e){console.error(e),d(e)}))}),[n]),j)return Object(r.jsx)("div",{children:"Error!"});if(!a)return Object(r.jsx)("div",{children:"Loading ..."});var O=a.split(""),v=O[n%O.length],g=O.filter((function(e){return e!==v}));return Object(r.jsx)(x.Provider,{value:{centerLetter:v,outerLetters:g,all:a},children:t})},g=function(){return Object(c.useContext)(x)},m=Object(c.createContext)({words:[]}),p=function(e){var t=e.children,n=g(),o=n.all,s=n.centerLetter,a=Object(c.useState)([]),u=Object(b.a)(a,2),i=u[0],l=u[1],j=Object(c.useState)(),d=Object(b.a)(j,2),O=d[0],h=d[1];return Object(c.useEffect)((function(){var e=o.substring(0,3),t="".concat("/staver-humle","/words/").concat(e,".json.gz");f(t).then((function(e){return e[o]})).then((function(e){return e.filter((function(e){return e.includes(s)}))})).then(l).catch(h)}),[o,s]),O?Object(r.jsx)("pre",{children:O.message}):0===i.length?Object(r.jsx)("div",{children:"Loading ..."}):Object(r.jsx)(m.Provider,{value:{words:i},children:t})},_=function(){return Object(c.useContext)(m)},k=n(16),C=n(9),w=function(e){return{score:Object(c.useMemo)((function(){return e.map((function(e){return 4===e.length?1:e.length<7?e.length:(7===new Set(e.split("")).size?7:0)+e.length})).reduce((function(e,t){return e+t}),0)}),[e])}},L=function(){return Object(c.useContext)(X)},N=n(26),B=n.n(N),S=function(){var e=L().found,t=Object(c.useMemo)((function(){return Object.keys(e.reduce((function(e,t){return Object(C.a)(Object(C.a)({},e),{},Object(k.a)({},t,!0))}),{}))}),[e]);return Object(r.jsx)("ul",{className:B.a.wordList,children:t.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"https://naob.no/s%C3%B8k/".concat(encodeURIComponent(e)),target:"_blank",rel:"noopener noreferrer",children:e})},e)}))})},y=n(31),E=n(17),F=function(e){return e.map((function(e){return{sort:Math.random(),value:e}})).sort((function(e,t){return e.sort-t.sort})).map((function(e){return e.value}))},I=n(8),H=n.n(I),P=function(){var e=L().onGuess,t=g(),n=t.all,o=t.centerLetter,s=t.outerLetters,a=Object(c.useState)(""),u=Object(b.a)(a,2),i=u[0],l=u[1],j=Object(c.useState)([]),d=Object(b.a)(j,2),f=d[0],O=d[1],h=Object(c.useRef)("");h.current=i,Object(c.useEffect)((function(){h.current="",O(F(s))}),[s,O,h]);var x=Object(c.useCallback)((function(){e(h.current),l("")}),[e,h]),v=Object(c.useCallback)((function(e){var t=e.currentTarget.getAttribute("data-letter");l((function(e){return"".concat(e).concat(t)}))}),[l]),m=Object(c.useCallback)((function(){O(F(s))}),[O,s]),p=Object(c.useCallback)((function(){l((function(e){return e.substr(0,e.length-1)}))}),[l]),_=Object(c.useCallback)((function(e){var t=e.key;if("Backspace"!==t){if(" "===t)return m(),void e.preventDefault();"Enter"===t&&x(),n.includes(t.toLocaleLowerCase())&&l((function(e){return"".concat(e).concat(t)}))}else l((function(e){return e.substring(0,e.length-1)}))}),[n,x,m]);Object(c.useEffect)((function(){return document.addEventListener("keydown",_),function(){document.removeEventListener("keydown",_)}}),[_]);var k=function(e){var t=e.letter,n=e.className,c=Object(y.a)(e,["letter","className"]);return Object(r.jsx)("button",Object(C.a)(Object(C.a)({"data-letter":t,onClick:v,className:[H.a.letterButton,n].filter(Boolean).join(" ")},c),{},{children:t}))},w=function(e){return Object(r.jsx)(k,Object(C.a)(Object(C.a)({},e),{},{className:H.a.centerLetter}))};return Object(r.jsxs)("div",{className:H.a.container,children:[Object(r.jsx)("div",{className:H.a.guess,children:i}),Object(r.jsxs)("div",{className:H.a.letterButtons,children:[Object(r.jsxs)("div",{className:H.a.topRow,children:[Object(r.jsx)(k,{letter:f[0]}),Object(r.jsx)(k,{letter:f[1]})]}),Object(r.jsxs)("div",{className:H.a.middleRow,children:[Object(r.jsx)(k,{letter:f[2]}),Object(r.jsx)(w,{letter:o}),Object(r.jsx)(k,{letter:f[3]})]}),Object(r.jsxs)("div",{className:H.a.bottomRow,children:[Object(r.jsx)(k,{letter:f[4]}),Object(r.jsx)(k,{letter:f[5]})]})]}),Object(r.jsxs)("div",{className:H.a.controls,children:[Object(r.jsx)("button",{onClick:p,children:Object(r.jsx)(E.a,{})}),Object(r.jsx)("button",{onClick:m,children:Object(r.jsx)(E.c,{})}),Object(r.jsx)("button",{onClick:x,children:Object(r.jsx)(E.b,{})})]})]})},T=n(27),A=n.n(T),G=function(){var e=L().found,t=_().words,n=w(e).score,c=w(t).score;return Object(r.jsxs)("div",{className:A.a.container,children:[Object(r.jsx)("progress",{id:"word-progress",max:t.length,value:e.length}),Object(r.jsxs)("label",{htmlFor:"word-progress",children:["Ord: ",e.length," / ",t.length]}),Object(r.jsx)("progress",{id:"points-progress",max:c,value:n}),Object(r.jsxs)("label",{htmlFor:"points-progress",children:["Poeng: ",n," / ",c]})]})},D=n(28),M=n.n(D),R=function(){return Object(r.jsx)("div",{className:M.a.header,children:Object(r.jsx)("h1",{children:Object(r.jsx)(u.b,{to:"/",children:"Staver Humle \ud83d\udc1d"})})})},J=function(e){var t="";switch(e.code){case"already-found":t="ordet ble allerede funnet";break;case"invalid-letters":t="bruker ugyldige bokstaver";break;case"missing-center":t="mangler obligatorisk brev";break;case"too-short":t="for kort";break;case"unknown-word":t="ukjent ord";break;default:return null}return Object(r.jsx)("span",{children:t})},z=n(29),W=n.n(z),U=function(){var e=L().badGuess,t=Object(c.useState)(),n=Object(b.a)(t,2),o=n[0],s=n[1];return Object(c.useEffect)((function(){s(e);var t=setTimeout((function(){s(void 0)}),2500);return function(){clearTimeout(t)}}),[e]),Object(r.jsx)("div",{className:W.a.container,children:Object(r.jsx)(J,{code:o})})},V=n(14),Y=n.n(V),Z=n(30),Q=function(){var e=h().gameId,t="saved/".concat(e),n=Object(c.useState)([]),r=Object(b.a)(n,2),o=r[0],s=r[1],a=Object(c.useCallback)((function(e){s((function(n){var r=[].concat(Object(Z.a)(n),[e]).sort();return localStorage.setItem(t,JSON.stringify(r)),r}))}),[s,t]);return Object(c.useEffect)((function(){s(function(e){try{var t=localStorage.getItem(e);if(t){var n=JSON.parse(t);if(Array.isArray(n))return n.filter((function(e){return"string"===typeof e}))}}catch(r){}return[]}(t))}),[t,s]),{found:o,addFoundWord:a}},X=Object(c.createContext)({found:[],onGuess:function(){},badGuess:void 0}),q=function(){var e=Object(c.useState)(),t=Object(b.a)(e,2),n=t[0],o=t[1],s=g(),a=s.all,u=s.centerLetter,i=_().words,l=Q(),j=l.found,d=l.addFoundWord,f=Object(c.useCallback)((function(e){if(e){var t=e.toLocaleLowerCase().split("").filter((function(e){return a.includes(e)})).join("");t.length===e.length?t.length<4?o("too-short"):t.includes(u)?j.includes(t)?o("already-found"):i.includes(t)?d(t):o("unknown-word"):o("missing-center"):o("invalid-letters")}}),[a,u,j,i,d]);return Object(r.jsx)(X.Provider,{value:{found:j,onGuess:f,badGuess:n},children:Object(r.jsxs)("div",{className:Y.a.container,children:[Object(r.jsx)(R,{}),Object(r.jsxs)("div",{className:Y.a.gameContainer,children:[Object(r.jsxs)("div",{className:Y.a.buttonsContainer,children:[Object(r.jsx)(U,{}),Object(r.jsx)(P,{})]}),Object(r.jsxs)("div",{className:Y.a.column,children:[Object(r.jsx)(G,{}),Object(r.jsx)(S,{})]})]})]})})},K=function(){return Object(r.jsx)(v,{children:Object(r.jsx)(p,{children:Object(r.jsx)(q,{})})})},$=function(){return Object(r.jsx)(u.a,{children:Object(r.jsxs)(i.c,{children:[Object(r.jsx)(i.a,{path:"/",exact:!0,children:Object(r.jsx)(j,{})}),Object(r.jsx)(i.a,{path:"/:gameId",children:Object(r.jsx)(K,{})})]})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),o(e),s(e)}))};a.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)($,{})}),document.getElementById("root")),ee()},8:function(e,t,n){e.exports={container:"Buttons_container__1Zt8k",guess:"Buttons_guess__2Anft",letterButton:"Buttons_letterButton__1mMw1",centerLetter:"Buttons_centerLetter__35133",letterButtons:"Buttons_letterButtons__3XtpL",controls:"Buttons_controls__vjaFF"}}},[[44,1,2]]]);
//# sourceMappingURL=main.379af844.chunk.js.map