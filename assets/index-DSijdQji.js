function jR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function $0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var B0={exports:{}},Tu={},z0={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tl=Symbol.for("react.element"),$R=Symbol.for("react.portal"),BR=Symbol.for("react.fragment"),zR=Symbol.for("react.strict_mode"),WR=Symbol.for("react.profiler"),HR=Symbol.for("react.provider"),GR=Symbol.for("react.context"),KR=Symbol.for("react.forward_ref"),qR=Symbol.for("react.suspense"),YR=Symbol.for("react.memo"),QR=Symbol.for("react.lazy"),T_=Symbol.iterator;function JR(t){return t===null||typeof t!="object"?null:(t=T_&&t[T_]||t["@@iterator"],typeof t=="function"?t:null)}var W0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H0=Object.assign,G0={};function so(t,e,n){this.props=t,this.context=e,this.refs=G0,this.updater=n||W0}so.prototype.isReactComponent={};so.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};so.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function K0(){}K0.prototype=so.prototype;function Up(t,e,n){this.props=t,this.context=e,this.refs=G0,this.updater=n||W0}var Vp=Up.prototype=new K0;Vp.constructor=Up;H0(Vp,so.prototype);Vp.isPureReactComponent=!0;var R_=Array.isArray,q0=Object.prototype.hasOwnProperty,jp={current:null},Y0={key:!0,ref:!0,__self:!0,__source:!0};function Q0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)q0.call(e,r)&&!Y0.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:tl,type:t,key:s,ref:o,props:i,_owner:jp.current}}function XR(t,e){return{$$typeof:tl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $p(t){return typeof t=="object"&&t!==null&&t.$$typeof===tl}function ZR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var k_=/\/+/g;function Gd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZR(""+t.key):e.toString(36)}function oc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tl:case $R:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Gd(o,0):r,R_(i)?(n="",t!=null&&(n=t.replace(k_,"$&/")+"/"),oc(i,e,n,"",function(c){return c})):i!=null&&($p(i)&&(i=XR(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(k_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",R_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Gd(s,a);o+=oc(s,e,n,l,i)}else if(l=JR(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Gd(s,a++),o+=oc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dl(t,e,n){if(t==null)return t;var r=[],i=0;return oc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function e1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},ac={transition:null},t1={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:ac,ReactCurrentOwner:jp};function J0(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Dl,forEach:function(t,e,n){Dl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dl(t,function(){e++}),e},toArray:function(t){return Dl(t,function(e){return e})||[]},only:function(t){if(!$p(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=so;le.Fragment=BR;le.Profiler=WR;le.PureComponent=Up;le.StrictMode=zR;le.Suspense=qR;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t1;le.act=J0;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=H0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=jp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)q0.call(e,l)&&!Y0.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:tl,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:GR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:HR,_context:t},t.Consumer=t};le.createElement=Q0;le.createFactory=function(t){var e=Q0.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:KR,render:t}};le.isValidElement=$p;le.lazy=function(t){return{$$typeof:QR,_payload:{_status:-1,_result:t},_init:e1}};le.memo=function(t,e){return{$$typeof:YR,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=ac.transition;ac.transition={};try{t()}finally{ac.transition=e}};le.unstable_act=J0;le.useCallback=function(t,e){return It.current.useCallback(t,e)};le.useContext=function(t){return It.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return It.current.useDeferredValue(t)};le.useEffect=function(t,e){return It.current.useEffect(t,e)};le.useId=function(){return It.current.useId()};le.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return It.current.useMemo(t,e)};le.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};le.useRef=function(t){return It.current.useRef(t)};le.useState=function(t){return It.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return It.current.useTransition()};le.version="18.3.1";z0.exports=le;var C=z0.exports;const he=$0(C),n1=jR({__proto__:null,default:he},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1=C,i1=Symbol.for("react.element"),s1=Symbol.for("react.fragment"),o1=Object.prototype.hasOwnProperty,a1=r1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l1={key:!0,ref:!0,__self:!0,__source:!0};function X0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)o1.call(e,r)&&!l1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:i1,type:t,key:s,ref:o,props:i,_owner:a1.current}}Tu.Fragment=s1;Tu.jsx=X0;Tu.jsxs=X0;B0.exports=Tu;var p=B0.exports,Z0={exports:{}},Xt={},ew={exports:{}},tw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,q){var U=F.length;F.push(q);e:for(;0<U;){var W=U-1>>>1,S=F[W];if(0<i(S,q))F[W]=q,F[U]=S,U=W;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var q=F[0],U=F.pop();if(U!==q){F[0]=U;e:for(var W=0,S=F.length,L=S>>>1;W<L;){var O=2*(W+1)-1,J=F[O],j=O+1,te=F[j];if(0>i(J,U))j<S&&0>i(te,J)?(F[W]=te,F[j]=U,W=j):(F[W]=J,F[O]=U,W=O);else if(j<S&&0>i(te,U))F[W]=te,F[j]=U,W=j;else break e}}return q}function i(F,q){var U=F.sortIndex-q.sortIndex;return U!==0?U:F.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,u=null,h=3,g=!1,m=!1,y=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=F)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function I(F){if(y=!1,_(F),!m)if(n(l)!==null)m=!0,mt(R);else{var q=n(c);q!==null&&$t(I,q.startTime-F)}}function R(F,q){m=!1,y&&(y=!1,v(V),V=-1),g=!0;var U=h;try{for(_(q),u=n(l);u!==null&&(!(u.expirationTime>q)||F&&!Re());){var W=u.callback;if(typeof W=="function"){u.callback=null,h=u.priorityLevel;var S=W(u.expirationTime<=q);q=t.unstable_now(),typeof S=="function"?u.callback=S:u===n(l)&&r(l),_(q)}else r(l);u=n(l)}if(u!==null)var L=!0;else{var O=n(c);O!==null&&$t(I,O.startTime-q),L=!1}return L}finally{u=null,h=U,g=!1}}var A=!1,x=null,V=-1,ce=5,z=-1;function Re(){return!(t.unstable_now()-z<ce)}function en(){if(x!==null){var F=t.unstable_now();z=F;var q=!0;try{q=x(!0,F)}finally{q?ge():(A=!1,x=null)}}else A=!1}var ge;if(typeof f=="function")ge=function(){f(en)};else if(typeof MessageChannel<"u"){var pt=new MessageChannel,Qn=pt.port2;pt.port1.onmessage=en,ge=function(){Qn.postMessage(null)}}else ge=function(){T(en,0)};function mt(F){x=F,A||(A=!0,ge())}function $t(F,q){V=T(function(){F(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,mt(R))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var U=h;h=q;try{return F()}finally{h=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var U=h;h=F;try{return q()}finally{h=U}},t.unstable_scheduleCallback=function(F,q,U){var W=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?W+U:W):U=W,F){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=U+S,F={id:d++,callback:q,priorityLevel:F,startTime:U,expirationTime:S,sortIndex:-1},U>W?(F.sortIndex=U,e(c,F),n(l)===null&&F===n(c)&&(y?(v(V),V=-1):y=!0,$t(I,U-W))):(F.sortIndex=S,e(l,F),m||g||(m=!0,mt(R))),F},t.unstable_shouldYield=Re,t.unstable_wrapCallback=function(F){var q=h;return function(){var U=h;h=q;try{return F.apply(this,arguments)}finally{h=U}}}})(tw);ew.exports=tw;var c1=ew.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1=C,Yt=c1;function b(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nw=new Set,ya={};function Hi(t,e){Us(t,e),Us(t+"Capture",e)}function Us(t,e){for(ya[t]=e,t=0;t<e.length;t++)nw.add(e[t])}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qh=Object.prototype.hasOwnProperty,d1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N_={},b_={};function h1(t){return Qh.call(b_,t)?!0:Qh.call(N_,t)?!1:d1.test(t)?b_[t]=!0:(N_[t]=!0,!1)}function f1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function p1(t,e,n,r){if(e===null||typeof e>"u"||f1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new Tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new Tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new Tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new Tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new Tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new Tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new Tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new Tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new Tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bp=/[\-:]([a-z])/g;function zp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bp,zp);ht[e]=new Tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bp,zp);ht[e]=new Tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bp,zp);ht[e]=new Tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new Tt(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new Tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wp(t,e,n,r){var i=ht.hasOwnProperty(e)?ht[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(p1(e,n,i,r)&&(n=null),r||i===null?h1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gr=u1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ml=Symbol.for("react.element"),hs=Symbol.for("react.portal"),fs=Symbol.for("react.fragment"),Hp=Symbol.for("react.strict_mode"),Jh=Symbol.for("react.profiler"),rw=Symbol.for("react.provider"),iw=Symbol.for("react.context"),Gp=Symbol.for("react.forward_ref"),Xh=Symbol.for("react.suspense"),Zh=Symbol.for("react.suspense_list"),Kp=Symbol.for("react.memo"),Ir=Symbol.for("react.lazy"),sw=Symbol.for("react.offscreen"),P_=Symbol.iterator;function Eo(t){return t===null||typeof t!="object"?null:(t=P_&&t[P_]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Kd;function Ho(t){if(Kd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kd=e&&e[1]||""}return`
`+Kd+t}var qd=!1;function Yd(t,e){if(!t||qd)return"";qd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{qd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ho(t):""}function m1(t){switch(t.tag){case 5:return Ho(t.type);case 16:return Ho("Lazy");case 13:return Ho("Suspense");case 19:return Ho("SuspenseList");case 0:case 2:case 15:return t=Yd(t.type,!1),t;case 11:return t=Yd(t.type.render,!1),t;case 1:return t=Yd(t.type,!0),t;default:return""}}function ef(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fs:return"Fragment";case hs:return"Portal";case Jh:return"Profiler";case Hp:return"StrictMode";case Xh:return"Suspense";case Zh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iw:return(t.displayName||"Context")+".Consumer";case rw:return(t._context.displayName||"Context")+".Provider";case Gp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kp:return e=t.displayName||null,e!==null?e:ef(t.type)||"Memo";case Ir:e=t._payload,t=t._init;try{return ef(t(e))}catch{}}return null}function g1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ef(e);case 8:return e===Hp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ow(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _1(t){var e=ow(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fl(t){t._valueTracker||(t._valueTracker=_1(t))}function aw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ow(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tf(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function A_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lw(t,e){e=e.checked,e!=null&&Wp(t,"checked",e,!1)}function nf(t,e){lw(t,e);var n=Yr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rf(t,e.type,n):e.hasOwnProperty("defaultValue")&&rf(t,e.type,Yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function x_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rf(t,e,n){(e!=="number"||Cc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Go=Array.isArray;function Ts(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(b(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function L_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(b(92));if(Go(n)){if(1<n.length)throw Error(b(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yr(n)}}function cw(t,e){var n=Yr(e.value),r=Yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function O_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function of(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ul,dw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ul=Ul||document.createElement("div"),Ul.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ul.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},v1=["Webkit","ms","Moz","O"];Object.keys(Xo).forEach(function(t){v1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xo[e]=Xo[t]})});function hw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xo.hasOwnProperty(t)&&Xo[t]?(""+e).trim():e+"px"}function fw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=hw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var y1=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function af(t,e){if(e){if(y1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(b(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(b(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(b(61))}if(e.style!=null&&typeof e.style!="object")throw Error(b(62))}}function lf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cf=null;function qp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uf=null,Rs=null,ks=null;function D_(t){if(t=il(t)){if(typeof uf!="function")throw Error(b(280));var e=t.stateNode;e&&(e=Pu(e),uf(t.stateNode,t.type,e))}}function pw(t){Rs?ks?ks.push(t):ks=[t]:Rs=t}function mw(){if(Rs){var t=Rs,e=ks;if(ks=Rs=null,D_(t),e)for(t=0;t<e.length;t++)D_(e[t])}}function gw(t,e){return t(e)}function _w(){}var Qd=!1;function vw(t,e,n){if(Qd)return t(e,n);Qd=!0;try{return gw(t,e,n)}finally{Qd=!1,(Rs!==null||ks!==null)&&(_w(),mw())}}function Sa(t,e){var n=t.stateNode;if(n===null)return null;var r=Pu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(b(231,e,typeof n));return n}var df=!1;if(cr)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){df=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{df=!1}function w1(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Zo=!1,Ic=null,Tc=!1,hf=null,S1={onError:function(t){Zo=!0,Ic=t}};function E1(t,e,n,r,i,s,o,a,l){Zo=!1,Ic=null,w1.apply(S1,arguments)}function C1(t,e,n,r,i,s,o,a,l){if(E1.apply(this,arguments),Zo){if(Zo){var c=Ic;Zo=!1,Ic=null}else throw Error(b(198));Tc||(Tc=!0,hf=c)}}function Gi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function M_(t){if(Gi(t)!==t)throw Error(b(188))}function I1(t){var e=t.alternate;if(!e){if(e=Gi(t),e===null)throw Error(b(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return M_(i),t;if(s===r)return M_(i),e;s=s.sibling}throw Error(b(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(b(189))}}if(n.alternate!==r)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?t:e}function ww(t){return t=I1(t),t!==null?Sw(t):null}function Sw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Sw(t);if(e!==null)return e;t=t.sibling}return null}var Ew=Yt.unstable_scheduleCallback,F_=Yt.unstable_cancelCallback,T1=Yt.unstable_shouldYield,R1=Yt.unstable_requestPaint,Be=Yt.unstable_now,k1=Yt.unstable_getCurrentPriorityLevel,Yp=Yt.unstable_ImmediatePriority,Cw=Yt.unstable_UserBlockingPriority,Rc=Yt.unstable_NormalPriority,N1=Yt.unstable_LowPriority,Iw=Yt.unstable_IdlePriority,Ru=null,Bn=null;function b1(t){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(Ru,t,void 0,(t.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:x1,P1=Math.log,A1=Math.LN2;function x1(t){return t>>>=0,t===0?32:31-(P1(t)/A1|0)|0}var Vl=64,jl=4194304;function Ko(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ko(a):(s&=o,s!==0&&(r=Ko(s)))}else o=n&~i,o!==0?r=Ko(o):s!==0&&(r=Ko(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Rn(e),i=1<<n,r|=t[n],e&=~i;return r}function L1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Rn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=L1(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function ff(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tw(){var t=Vl;return Vl<<=1,!(Vl&4194240)&&(Vl=64),t}function Jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rn(e),t[e]=n}function D1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Rn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Qp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Rn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var me=0;function Rw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kw,Jp,Nw,bw,Pw,pf=!1,$l=[],Dr=null,Mr=null,Fr=null,Ea=new Map,Ca=new Map,kr=[],M1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function U_(t,e){switch(t){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Ea.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(e.pointerId)}}function Io(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=il(e),e!==null&&Jp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function F1(t,e,n,r,i){switch(e){case"focusin":return Dr=Io(Dr,t,e,n,r,i),!0;case"dragenter":return Mr=Io(Mr,t,e,n,r,i),!0;case"mouseover":return Fr=Io(Fr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ea.set(s,Io(Ea.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ca.set(s,Io(Ca.get(s)||null,t,e,n,r,i)),!0}return!1}function Aw(t){var e=wi(t.target);if(e!==null){var n=Gi(e);if(n!==null){if(e=n.tag,e===13){if(e=yw(n),e!==null){t.blockedOn=e,Pw(t.priority,function(){Nw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cf=r,n.target.dispatchEvent(r),cf=null}else return e=il(n),e!==null&&Jp(e),t.blockedOn=n,!1;e.shift()}return!0}function V_(t,e,n){lc(t)&&n.delete(e)}function U1(){pf=!1,Dr!==null&&lc(Dr)&&(Dr=null),Mr!==null&&lc(Mr)&&(Mr=null),Fr!==null&&lc(Fr)&&(Fr=null),Ea.forEach(V_),Ca.forEach(V_)}function To(t,e){t.blockedOn===e&&(t.blockedOn=null,pf||(pf=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,U1)))}function Ia(t){function e(i){return To(i,t)}if(0<$l.length){To($l[0],t);for(var n=1;n<$l.length;n++){var r=$l[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dr!==null&&To(Dr,t),Mr!==null&&To(Mr,t),Fr!==null&&To(Fr,t),Ea.forEach(e),Ca.forEach(e),n=0;n<kr.length;n++)r=kr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<kr.length&&(n=kr[0],n.blockedOn===null);)Aw(n),n.blockedOn===null&&kr.shift()}var Ns=gr.ReactCurrentBatchConfig,Nc=!0;function V1(t,e,n,r){var i=me,s=Ns.transition;Ns.transition=null;try{me=1,Xp(t,e,n,r)}finally{me=i,Ns.transition=s}}function j1(t,e,n,r){var i=me,s=Ns.transition;Ns.transition=null;try{me=4,Xp(t,e,n,r)}finally{me=i,Ns.transition=s}}function Xp(t,e,n,r){if(Nc){var i=mf(t,e,n,r);if(i===null)ah(t,e,r,bc,n),U_(t,r);else if(F1(i,t,e,n,r))r.stopPropagation();else if(U_(t,r),e&4&&-1<M1.indexOf(t)){for(;i!==null;){var s=il(i);if(s!==null&&kw(s),s=mf(t,e,n,r),s===null&&ah(t,e,r,bc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ah(t,e,r,null,n)}}var bc=null;function mf(t,e,n,r){if(bc=null,t=qp(r),t=wi(t),t!==null)if(e=Gi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bc=t,null}function xw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(k1()){case Yp:return 1;case Cw:return 4;case Rc:case N1:return 16;case Iw:return 536870912;default:return 16}default:return 16}}var br=null,Zp=null,cc=null;function Lw(){if(cc)return cc;var t,e=Zp,n=e.length,r,i="value"in br?br.value:br.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return cc=i.slice(t,1<r?1-r:void 0)}function uc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bl(){return!0}function j_(){return!1}function Zt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Bl:j_,this.isPropagationStopped=j_,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bl)},persist:function(){},isPersistent:Bl}),e}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},em=Zt(oo),rl=Me({},oo,{view:0,detail:0}),$1=Zt(rl),Xd,Zd,Ro,ku=Me({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ro&&(Ro&&t.type==="mousemove"?(Xd=t.screenX-Ro.screenX,Zd=t.screenY-Ro.screenY):Zd=Xd=0,Ro=t),Xd)},movementY:function(t){return"movementY"in t?t.movementY:Zd}}),$_=Zt(ku),B1=Me({},ku,{dataTransfer:0}),z1=Zt(B1),W1=Me({},rl,{relatedTarget:0}),eh=Zt(W1),H1=Me({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),G1=Zt(H1),K1=Me({},oo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),q1=Zt(K1),Y1=Me({},oo,{data:0}),B_=Zt(Y1),Q1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=X1[t])?!!e[t]:!1}function tm(){return Z1}var ek=Me({},rl,{key:function(t){if(t.key){var e=Q1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?J1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tm,charCode:function(t){return t.type==="keypress"?uc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tk=Zt(ek),nk=Me({},ku,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z_=Zt(nk),rk=Me({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tm}),ik=Zt(rk),sk=Me({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ok=Zt(sk),ak=Me({},ku,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lk=Zt(ak),ck=[9,13,27,32],nm=cr&&"CompositionEvent"in window,ea=null;cr&&"documentMode"in document&&(ea=document.documentMode);var uk=cr&&"TextEvent"in window&&!ea,Ow=cr&&(!nm||ea&&8<ea&&11>=ea),W_=" ",H_=!1;function Dw(t,e){switch(t){case"keyup":return ck.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ps=!1;function dk(t,e){switch(t){case"compositionend":return Mw(e);case"keypress":return e.which!==32?null:(H_=!0,W_);case"textInput":return t=e.data,t===W_&&H_?null:t;default:return null}}function hk(t,e){if(ps)return t==="compositionend"||!nm&&Dw(t,e)?(t=Lw(),cc=Zp=br=null,ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ow&&e.locale!=="ko"?null:e.data;default:return null}}var fk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fk[t.type]:e==="textarea"}function Fw(t,e,n,r){pw(r),e=Pc(e,"onChange"),0<e.length&&(n=new em("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ta=null,Ta=null;function pk(t){qw(t,0)}function Nu(t){var e=_s(t);if(aw(e))return t}function mk(t,e){if(t==="change")return e}var Uw=!1;if(cr){var th;if(cr){var nh="oninput"in document;if(!nh){var K_=document.createElement("div");K_.setAttribute("oninput","return;"),nh=typeof K_.oninput=="function"}th=nh}else th=!1;Uw=th&&(!document.documentMode||9<document.documentMode)}function q_(){ta&&(ta.detachEvent("onpropertychange",Vw),Ta=ta=null)}function Vw(t){if(t.propertyName==="value"&&Nu(Ta)){var e=[];Fw(e,Ta,t,qp(t)),vw(pk,e)}}function gk(t,e,n){t==="focusin"?(q_(),ta=e,Ta=n,ta.attachEvent("onpropertychange",Vw)):t==="focusout"&&q_()}function _k(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nu(Ta)}function vk(t,e){if(t==="click")return Nu(e)}function yk(t,e){if(t==="input"||t==="change")return Nu(e)}function wk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pn=typeof Object.is=="function"?Object.is:wk;function Ra(t,e){if(Pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Qh.call(e,i)||!Pn(t[i],e[i]))return!1}return!0}function Y_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Q_(t,e){var n=Y_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Y_(n)}}function jw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $w(){for(var t=window,e=Cc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cc(t.document)}return e}function rm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Sk(t){var e=$w(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jw(n.ownerDocument.documentElement,n)){if(r!==null&&rm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Q_(n,s);var o=Q_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ek=cr&&"documentMode"in document&&11>=document.documentMode,ms=null,gf=null,na=null,_f=!1;function J_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_f||ms==null||ms!==Cc(r)||(r=ms,"selectionStart"in r&&rm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),na&&Ra(na,r)||(na=r,r=Pc(gf,"onSelect"),0<r.length&&(e=new em("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ms)))}function zl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gs={animationend:zl("Animation","AnimationEnd"),animationiteration:zl("Animation","AnimationIteration"),animationstart:zl("Animation","AnimationStart"),transitionend:zl("Transition","TransitionEnd")},rh={},Bw={};cr&&(Bw=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function bu(t){if(rh[t])return rh[t];if(!gs[t])return t;var e=gs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Bw)return rh[t]=e[n];return t}var zw=bu("animationend"),Ww=bu("animationiteration"),Hw=bu("animationstart"),Gw=bu("transitionend"),Kw=new Map,X_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(t,e){Kw.set(t,e),Hi(e,[t])}for(var ih=0;ih<X_.length;ih++){var sh=X_[ih],Ck=sh.toLowerCase(),Ik=sh[0].toUpperCase()+sh.slice(1);si(Ck,"on"+Ik)}si(zw,"onAnimationEnd");si(Ww,"onAnimationIteration");si(Hw,"onAnimationStart");si("dblclick","onDoubleClick");si("focusin","onFocus");si("focusout","onBlur");si(Gw,"onTransitionEnd");Us("onMouseEnter",["mouseout","mouseover"]);Us("onMouseLeave",["mouseout","mouseover"]);Us("onPointerEnter",["pointerout","pointerover"]);Us("onPointerLeave",["pointerout","pointerover"]);Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tk=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function Z_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,C1(r,e,void 0,t),t.currentTarget=null}function qw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Z_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Z_(i,a,c),s=l}}}if(Tc)throw t=hf,Tc=!1,hf=null,t}function Ce(t,e){var n=e[Ef];n===void 0&&(n=e[Ef]=new Set);var r=t+"__bubble";n.has(r)||(Yw(e,t,2,!1),n.add(r))}function oh(t,e,n){var r=0;e&&(r|=4),Yw(n,t,r,e)}var Wl="_reactListening"+Math.random().toString(36).slice(2);function ka(t){if(!t[Wl]){t[Wl]=!0,nw.forEach(function(n){n!=="selectionchange"&&(Tk.has(n)||oh(n,!1,t),oh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wl]||(e[Wl]=!0,oh("selectionchange",!1,e))}}function Yw(t,e,n,r){switch(xw(e)){case 1:var i=V1;break;case 4:i=j1;break;default:i=Xp}n=i.bind(null,e,n,t),i=void 0,!df||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ah(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=wi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}vw(function(){var c=s,d=qp(n),u=[];e:{var h=Kw.get(t);if(h!==void 0){var g=em,m=t;switch(t){case"keypress":if(uc(n)===0)break e;case"keydown":case"keyup":g=tk;break;case"focusin":m="focus",g=eh;break;case"focusout":m="blur",g=eh;break;case"beforeblur":case"afterblur":g=eh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=$_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=z1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=ik;break;case zw:case Ww:case Hw:g=G1;break;case Gw:g=ok;break;case"scroll":g=$1;break;case"wheel":g=lk;break;case"copy":case"cut":case"paste":g=q1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=z_}var y=(e&4)!==0,T=!y&&t==="scroll",v=y?h!==null?h+"Capture":null:h;y=[];for(var f=c,_;f!==null;){_=f;var I=_.stateNode;if(_.tag===5&&I!==null&&(_=I,v!==null&&(I=Sa(f,v),I!=null&&y.push(Na(f,I,_)))),T)break;f=f.return}0<y.length&&(h=new g(h,m,null,n,d),u.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==cf&&(m=n.relatedTarget||n.fromElement)&&(wi(m)||m[ur]))break e;if((g||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,g?(m=n.relatedTarget||n.toElement,g=c,m=m?wi(m):null,m!==null&&(T=Gi(m),m!==T||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=c),g!==m)){if(y=$_,I="onMouseLeave",v="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(y=z_,I="onPointerLeave",v="onPointerEnter",f="pointer"),T=g==null?h:_s(g),_=m==null?h:_s(m),h=new y(I,f+"leave",g,n,d),h.target=T,h.relatedTarget=_,I=null,wi(d)===c&&(y=new y(v,f+"enter",m,n,d),y.target=_,y.relatedTarget=T,I=y),T=I,g&&m)t:{for(y=g,v=m,f=0,_=y;_;_=os(_))f++;for(_=0,I=v;I;I=os(I))_++;for(;0<f-_;)y=os(y),f--;for(;0<_-f;)v=os(v),_--;for(;f--;){if(y===v||v!==null&&y===v.alternate)break t;y=os(y),v=os(v)}y=null}else y=null;g!==null&&ev(u,h,g,y,!1),m!==null&&T!==null&&ev(u,T,m,y,!0)}}e:{if(h=c?_s(c):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var R=mk;else if(G_(h))if(Uw)R=yk;else{R=_k;var A=gk}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(R=vk);if(R&&(R=R(t,c))){Fw(u,R,n,d);break e}A&&A(t,h,c),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&rf(h,"number",h.value)}switch(A=c?_s(c):window,t){case"focusin":(G_(A)||A.contentEditable==="true")&&(ms=A,gf=c,na=null);break;case"focusout":na=gf=ms=null;break;case"mousedown":_f=!0;break;case"contextmenu":case"mouseup":case"dragend":_f=!1,J_(u,n,d);break;case"selectionchange":if(Ek)break;case"keydown":case"keyup":J_(u,n,d)}var x;if(nm)e:{switch(t){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else ps?Dw(t,n)&&(V="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(Ow&&n.locale!=="ko"&&(ps||V!=="onCompositionStart"?V==="onCompositionEnd"&&ps&&(x=Lw()):(br=d,Zp="value"in br?br.value:br.textContent,ps=!0)),A=Pc(c,V),0<A.length&&(V=new B_(V,t,null,n,d),u.push({event:V,listeners:A}),x?V.data=x:(x=Mw(n),x!==null&&(V.data=x)))),(x=uk?dk(t,n):hk(t,n))&&(c=Pc(c,"onBeforeInput"),0<c.length&&(d=new B_("onBeforeInput","beforeinput",null,n,d),u.push({event:d,listeners:c}),d.data=x))}qw(u,e)})}function Na(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sa(t,n),s!=null&&r.unshift(Na(t,s,i)),s=Sa(t,e),s!=null&&r.push(Na(t,s,i))),t=t.return}return r}function os(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ev(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Sa(n,s),l!=null&&o.unshift(Na(n,l,a))):i||(l=Sa(n,s),l!=null&&o.push(Na(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Rk=/\r\n?/g,kk=/\u0000|\uFFFD/g;function tv(t){return(typeof t=="string"?t:""+t).replace(Rk,`
`).replace(kk,"")}function Hl(t,e,n){if(e=tv(e),tv(t)!==e&&n)throw Error(b(425))}function Ac(){}var vf=null,yf=null;function wf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sf=typeof setTimeout=="function"?setTimeout:void 0,Nk=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,bk=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(t){return nv.resolve(null).then(t).catch(Pk)}:Sf;function Pk(t){setTimeout(function(){throw t})}function lh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ia(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ia(e)}function Ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ao=Math.random().toString(36).slice(2),Mn="__reactFiber$"+ao,ba="__reactProps$"+ao,ur="__reactContainer$"+ao,Ef="__reactEvents$"+ao,Ak="__reactListeners$"+ao,xk="__reactHandles$"+ao;function wi(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ur]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rv(t);t!==null;){if(n=t[Mn])return n;t=rv(t)}return e}t=n,n=t.parentNode}return null}function il(t){return t=t[Mn]||t[ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(b(33))}function Pu(t){return t[ba]||null}var Cf=[],vs=-1;function oi(t){return{current:t}}function Te(t){0>vs||(t.current=Cf[vs],Cf[vs]=null,vs--)}function Se(t,e){vs++,Cf[vs]=t.current,t.current=e}var Qr={},wt=oi(Qr),Lt=oi(!1),Pi=Qr;function Vs(t,e){var n=t.type.contextTypes;if(!n)return Qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ot(t){return t=t.childContextTypes,t!=null}function xc(){Te(Lt),Te(wt)}function iv(t,e,n){if(wt.current!==Qr)throw Error(b(168));Se(wt,e),Se(Lt,n)}function Qw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(b(108,g1(t)||"Unknown",i));return Me({},n,r)}function Lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qr,Pi=wt.current,Se(wt,t),Se(Lt,Lt.current),!0}function sv(t,e,n){var r=t.stateNode;if(!r)throw Error(b(169));n?(t=Qw(t,e,Pi),r.__reactInternalMemoizedMergedChildContext=t,Te(Lt),Te(wt),Se(wt,t)):Te(Lt),Se(Lt,n)}var Zn=null,Au=!1,ch=!1;function Jw(t){Zn===null?Zn=[t]:Zn.push(t)}function Lk(t){Au=!0,Jw(t)}function ai(){if(!ch&&Zn!==null){ch=!0;var t=0,e=me;try{var n=Zn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zn=null,Au=!1}catch(i){throw Zn!==null&&(Zn=Zn.slice(t+1)),Ew(Yp,ai),i}finally{me=e,ch=!1}}return null}var ys=[],ws=0,Oc=null,Dc=0,rn=[],sn=0,Ai=null,er=1,tr="";function pi(t,e){ys[ws++]=Dc,ys[ws++]=Oc,Oc=t,Dc=e}function Xw(t,e,n){rn[sn++]=er,rn[sn++]=tr,rn[sn++]=Ai,Ai=t;var r=er;t=tr;var i=32-Rn(r)-1;r&=~(1<<i),n+=1;var s=32-Rn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,er=1<<32-Rn(e)+i|n<<i|r,tr=s+t}else er=1<<s|n<<i|r,tr=t}function im(t){t.return!==null&&(pi(t,1),Xw(t,1,0))}function sm(t){for(;t===Oc;)Oc=ys[--ws],ys[ws]=null,Dc=ys[--ws],ys[ws]=null;for(;t===Ai;)Ai=rn[--sn],rn[sn]=null,tr=rn[--sn],rn[sn]=null,er=rn[--sn],rn[sn]=null}var qt=null,Gt=null,be=!1,In=null;function Zw(t,e){var n=an(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ov(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,Gt=Ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,Gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ai!==null?{id:er,overflow:tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=an(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,Gt=null,!0):!1;default:return!1}}function If(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tf(t){if(be){var e=Gt;if(e){var n=e;if(!ov(t,e)){if(If(t))throw Error(b(418));e=Ur(n.nextSibling);var r=qt;e&&ov(t,e)?Zw(r,n):(t.flags=t.flags&-4097|2,be=!1,qt=t)}}else{if(If(t))throw Error(b(418));t.flags=t.flags&-4097|2,be=!1,qt=t}}}function av(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function Gl(t){if(t!==qt)return!1;if(!be)return av(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wf(t.type,t.memoizedProps)),e&&(e=Gt)){if(If(t))throw eS(),Error(b(418));for(;e;)Zw(t,e),e=Ur(e.nextSibling)}if(av(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(b(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gt=Ur(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gt=null}}else Gt=qt?Ur(t.stateNode.nextSibling):null;return!0}function eS(){for(var t=Gt;t;)t=Ur(t.nextSibling)}function js(){Gt=qt=null,be=!1}function om(t){In===null?In=[t]:In.push(t)}var Ok=gr.ReactCurrentBatchConfig;function ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(b(309));var r=n.stateNode}if(!r)throw Error(b(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(b(284));if(!n._owner)throw Error(b(290,t))}return t}function Kl(t,e){throw t=Object.prototype.toString.call(e),Error(b(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lv(t){var e=t._init;return e(t._payload)}function tS(t){function e(v,f){if(t){var _=v.deletions;_===null?(v.deletions=[f],v.flags|=16):_.push(f)}}function n(v,f){if(!t)return null;for(;f!==null;)e(v,f),f=f.sibling;return null}function r(v,f){for(v=new Map;f!==null;)f.key!==null?v.set(f.key,f):v.set(f.index,f),f=f.sibling;return v}function i(v,f){return v=Br(v,f),v.index=0,v.sibling=null,v}function s(v,f,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<f?(v.flags|=2,f):_):(v.flags|=2,f)):(v.flags|=1048576,f)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,f,_,I){return f===null||f.tag!==6?(f=gh(_,v.mode,I),f.return=v,f):(f=i(f,_),f.return=v,f)}function l(v,f,_,I){var R=_.type;return R===fs?d(v,f,_.props.children,I,_.key):f!==null&&(f.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ir&&lv(R)===f.type)?(I=i(f,_.props),I.ref=ko(v,f,_),I.return=v,I):(I=_c(_.type,_.key,_.props,null,v.mode,I),I.ref=ko(v,f,_),I.return=v,I)}function c(v,f,_,I){return f===null||f.tag!==4||f.stateNode.containerInfo!==_.containerInfo||f.stateNode.implementation!==_.implementation?(f=_h(_,v.mode,I),f.return=v,f):(f=i(f,_.children||[]),f.return=v,f)}function d(v,f,_,I,R){return f===null||f.tag!==7?(f=Ri(_,v.mode,I,R),f.return=v,f):(f=i(f,_),f.return=v,f)}function u(v,f,_){if(typeof f=="string"&&f!==""||typeof f=="number")return f=gh(""+f,v.mode,_),f.return=v,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ml:return _=_c(f.type,f.key,f.props,null,v.mode,_),_.ref=ko(v,null,f),_.return=v,_;case hs:return f=_h(f,v.mode,_),f.return=v,f;case Ir:var I=f._init;return u(v,I(f._payload),_)}if(Go(f)||Eo(f))return f=Ri(f,v.mode,_,null),f.return=v,f;Kl(v,f)}return null}function h(v,f,_,I){var R=f!==null?f.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return R!==null?null:a(v,f,""+_,I);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ml:return _.key===R?l(v,f,_,I):null;case hs:return _.key===R?c(v,f,_,I):null;case Ir:return R=_._init,h(v,f,R(_._payload),I)}if(Go(_)||Eo(_))return R!==null?null:d(v,f,_,I,null);Kl(v,_)}return null}function g(v,f,_,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return v=v.get(_)||null,a(f,v,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ml:return v=v.get(I.key===null?_:I.key)||null,l(f,v,I,R);case hs:return v=v.get(I.key===null?_:I.key)||null,c(f,v,I,R);case Ir:var A=I._init;return g(v,f,_,A(I._payload),R)}if(Go(I)||Eo(I))return v=v.get(_)||null,d(f,v,I,R,null);Kl(f,I)}return null}function m(v,f,_,I){for(var R=null,A=null,x=f,V=f=0,ce=null;x!==null&&V<_.length;V++){x.index>V?(ce=x,x=null):ce=x.sibling;var z=h(v,x,_[V],I);if(z===null){x===null&&(x=ce);break}t&&x&&z.alternate===null&&e(v,x),f=s(z,f,V),A===null?R=z:A.sibling=z,A=z,x=ce}if(V===_.length)return n(v,x),be&&pi(v,V),R;if(x===null){for(;V<_.length;V++)x=u(v,_[V],I),x!==null&&(f=s(x,f,V),A===null?R=x:A.sibling=x,A=x);return be&&pi(v,V),R}for(x=r(v,x);V<_.length;V++)ce=g(x,v,V,_[V],I),ce!==null&&(t&&ce.alternate!==null&&x.delete(ce.key===null?V:ce.key),f=s(ce,f,V),A===null?R=ce:A.sibling=ce,A=ce);return t&&x.forEach(function(Re){return e(v,Re)}),be&&pi(v,V),R}function y(v,f,_,I){var R=Eo(_);if(typeof R!="function")throw Error(b(150));if(_=R.call(_),_==null)throw Error(b(151));for(var A=R=null,x=f,V=f=0,ce=null,z=_.next();x!==null&&!z.done;V++,z=_.next()){x.index>V?(ce=x,x=null):ce=x.sibling;var Re=h(v,x,z.value,I);if(Re===null){x===null&&(x=ce);break}t&&x&&Re.alternate===null&&e(v,x),f=s(Re,f,V),A===null?R=Re:A.sibling=Re,A=Re,x=ce}if(z.done)return n(v,x),be&&pi(v,V),R;if(x===null){for(;!z.done;V++,z=_.next())z=u(v,z.value,I),z!==null&&(f=s(z,f,V),A===null?R=z:A.sibling=z,A=z);return be&&pi(v,V),R}for(x=r(v,x);!z.done;V++,z=_.next())z=g(x,v,V,z.value,I),z!==null&&(t&&z.alternate!==null&&x.delete(z.key===null?V:z.key),f=s(z,f,V),A===null?R=z:A.sibling=z,A=z);return t&&x.forEach(function(en){return e(v,en)}),be&&pi(v,V),R}function T(v,f,_,I){if(typeof _=="object"&&_!==null&&_.type===fs&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ml:e:{for(var R=_.key,A=f;A!==null;){if(A.key===R){if(R=_.type,R===fs){if(A.tag===7){n(v,A.sibling),f=i(A,_.props.children),f.return=v,v=f;break e}}else if(A.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ir&&lv(R)===A.type){n(v,A.sibling),f=i(A,_.props),f.ref=ko(v,A,_),f.return=v,v=f;break e}n(v,A);break}else e(v,A);A=A.sibling}_.type===fs?(f=Ri(_.props.children,v.mode,I,_.key),f.return=v,v=f):(I=_c(_.type,_.key,_.props,null,v.mode,I),I.ref=ko(v,f,_),I.return=v,v=I)}return o(v);case hs:e:{for(A=_.key;f!==null;){if(f.key===A)if(f.tag===4&&f.stateNode.containerInfo===_.containerInfo&&f.stateNode.implementation===_.implementation){n(v,f.sibling),f=i(f,_.children||[]),f.return=v,v=f;break e}else{n(v,f);break}else e(v,f);f=f.sibling}f=_h(_,v.mode,I),f.return=v,v=f}return o(v);case Ir:return A=_._init,T(v,f,A(_._payload),I)}if(Go(_))return m(v,f,_,I);if(Eo(_))return y(v,f,_,I);Kl(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,f!==null&&f.tag===6?(n(v,f.sibling),f=i(f,_),f.return=v,v=f):(n(v,f),f=gh(_,v.mode,I),f.return=v,v=f),o(v)):n(v,f)}return T}var $s=tS(!0),nS=tS(!1),Mc=oi(null),Fc=null,Ss=null,am=null;function lm(){am=Ss=Fc=null}function cm(t){var e=Mc.current;Te(Mc),t._currentValue=e}function Rf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bs(t,e){Fc=t,am=Ss=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function hn(t){var e=t._currentValue;if(am!==t)if(t={context:t,memoizedValue:e,next:null},Ss===null){if(Fc===null)throw Error(b(308));Ss=t,Fc.dependencies={lanes:0,firstContext:t}}else Ss=Ss.next=t;return e}var Si=null;function um(t){Si===null?Si=[t]:Si.push(t)}function rS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,um(e)):(n.next=i.next,i.next=n),e.interleaved=n,dr(t,r)}function dr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function dm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,dr(t,n)}return i=r.interleaved,i===null?(e.next=e,um(r)):(e.next=i.next,i.next=e),r.interleaved=e,dr(t,n)}function dc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qp(t,n)}}function cv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uc(t,e,n,r){var i=t.updateQueue;Tr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var u=i.baseState;o=0,d=c=l=null,a=s;do{var h=a.lane,g=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(h=e,g=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){u=m.call(g,u,h);break e}u=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(g,u,h):m,h==null)break e;u=Me({},u,h);break e;case 2:Tr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else g={eventTime:g,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=u):d=d.next=g,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Li|=o,t.lanes=o,t.memoizedState=u}}function uv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(b(191,i));i.call(r)}}}var sl={},zn=oi(sl),Pa=oi(sl),Aa=oi(sl);function Ei(t){if(t===sl)throw Error(b(174));return t}function hm(t,e){switch(Se(Aa,e),Se(Pa,t),Se(zn,sl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:of(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=of(e,t)}Te(zn),Se(zn,e)}function Bs(){Te(zn),Te(Pa),Te(Aa)}function sS(t){Ei(Aa.current);var e=Ei(zn.current),n=of(e,t.type);e!==n&&(Se(Pa,t),Se(zn,n))}function fm(t){Pa.current===t&&(Te(zn),Te(Pa))}var Le=oi(0);function Vc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var uh=[];function pm(){for(var t=0;t<uh.length;t++)uh[t]._workInProgressVersionPrimary=null;uh.length=0}var hc=gr.ReactCurrentDispatcher,dh=gr.ReactCurrentBatchConfig,xi=0,De=null,Ke=null,nt=null,jc=!1,ra=!1,xa=0,Dk=0;function gt(){throw Error(b(321))}function mm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pn(t[n],e[n]))return!1;return!0}function gm(t,e,n,r,i,s){if(xi=s,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hc.current=t===null||t.memoizedState===null?Vk:jk,t=n(r,i),ra){s=0;do{if(ra=!1,xa=0,25<=s)throw Error(b(301));s+=1,nt=Ke=null,e.updateQueue=null,hc.current=$k,t=n(r,i)}while(ra)}if(hc.current=$c,e=Ke!==null&&Ke.next!==null,xi=0,nt=Ke=De=null,jc=!1,e)throw Error(b(300));return t}function _m(){var t=xa!==0;return xa=0,t}function Dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?De.memoizedState=nt=t:nt=nt.next=t,nt}function fn(){if(Ke===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=nt===null?De.memoizedState:nt.next;if(e!==null)nt=e,Ke=t;else{if(t===null)throw Error(b(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},nt===null?De.memoizedState=nt=t:nt=nt.next=t}return nt}function La(t,e){return typeof e=="function"?e(t):e}function hh(t){var e=fn(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=Ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((xi&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=r):l=l.next=u,De.lanes|=d,Li|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Pn(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,De.lanes|=s,Li|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fh(t){var e=fn(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Pn(s,e.memoizedState)||(At=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function oS(){}function aS(t,e){var n=De,r=fn(),i=e(),s=!Pn(r.memoizedState,i);if(s&&(r.memoizedState=i,At=!0),r=r.queue,vm(uS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,Oa(9,cS.bind(null,n,r,i,e),void 0,null),ot===null)throw Error(b(349));xi&30||lS(n,e,i)}return i}function lS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cS(t,e,n,r){e.value=n,e.getSnapshot=r,dS(e)&&hS(t)}function uS(t,e,n){return n(function(){dS(e)&&hS(t)})}function dS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pn(t,n)}catch{return!0}}function hS(t){var e=dr(t,1);e!==null&&kn(e,t,1,-1)}function dv(t){var e=Dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:t},e.queue=t,t=t.dispatch=Uk.bind(null,De,t),[e.memoizedState,t]}function Oa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fS(){return fn().memoizedState}function fc(t,e,n,r){var i=Dn();De.flags|=t,i.memoizedState=Oa(1|e,n,void 0,r===void 0?null:r)}function xu(t,e,n,r){var i=fn();r=r===void 0?null:r;var s=void 0;if(Ke!==null){var o=Ke.memoizedState;if(s=o.destroy,r!==null&&mm(r,o.deps)){i.memoizedState=Oa(e,n,s,r);return}}De.flags|=t,i.memoizedState=Oa(1|e,n,s,r)}function hv(t,e){return fc(8390656,8,t,e)}function vm(t,e){return xu(2048,8,t,e)}function pS(t,e){return xu(4,2,t,e)}function mS(t,e){return xu(4,4,t,e)}function gS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _S(t,e,n){return n=n!=null?n.concat([t]):null,xu(4,4,gS.bind(null,e,t),n)}function ym(){}function vS(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function yS(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function wS(t,e,n){return xi&21?(Pn(n,e)||(n=Tw(),De.lanes|=n,Li|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function Mk(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=dh.transition;dh.transition={};try{t(!1),e()}finally{me=n,dh.transition=r}}function SS(){return fn().memoizedState}function Fk(t,e,n){var r=$r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ES(t))CS(e,n);else if(n=rS(t,e,n,r),n!==null){var i=Ct();kn(n,t,r,i),IS(n,e,r)}}function Uk(t,e,n){var r=$r(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ES(t))CS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Pn(a,o)){var l=e.interleaved;l===null?(i.next=i,um(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=rS(t,e,i,r),n!==null&&(i=Ct(),kn(n,t,r,i),IS(n,e,r))}}function ES(t){var e=t.alternate;return t===De||e!==null&&e===De}function CS(t,e){ra=jc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function IS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qp(t,n)}}var $c={readContext:hn,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},Vk={readContext:hn,useCallback:function(t,e){return Dn().memoizedState=[t,e===void 0?null:e],t},useContext:hn,useEffect:hv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fc(4194308,4,gS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fc(4194308,4,t,e)},useInsertionEffect:function(t,e){return fc(4,2,t,e)},useMemo:function(t,e){var n=Dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Fk.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=Dn();return t={current:t},e.memoizedState=t},useState:dv,useDebugValue:ym,useDeferredValue:function(t){return Dn().memoizedState=t},useTransition:function(){var t=dv(!1),e=t[0];return t=Mk.bind(null,t[1]),Dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,i=Dn();if(be){if(n===void 0)throw Error(b(407));n=n()}else{if(n=e(),ot===null)throw Error(b(349));xi&30||lS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,hv(uS.bind(null,r,s,t),[t]),r.flags|=2048,Oa(9,cS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Dn(),e=ot.identifierPrefix;if(be){var n=tr,r=er;n=(r&~(1<<32-Rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Dk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jk={readContext:hn,useCallback:vS,useContext:hn,useEffect:vm,useImperativeHandle:_S,useInsertionEffect:pS,useLayoutEffect:mS,useMemo:yS,useReducer:hh,useRef:fS,useState:function(){return hh(La)},useDebugValue:ym,useDeferredValue:function(t){var e=fn();return wS(e,Ke.memoizedState,t)},useTransition:function(){var t=hh(La)[0],e=fn().memoizedState;return[t,e]},useMutableSource:oS,useSyncExternalStore:aS,useId:SS,unstable_isNewReconciler:!1},$k={readContext:hn,useCallback:vS,useContext:hn,useEffect:vm,useImperativeHandle:_S,useInsertionEffect:pS,useLayoutEffect:mS,useMemo:yS,useReducer:fh,useRef:fS,useState:function(){return fh(La)},useDebugValue:ym,useDeferredValue:function(t){var e=fn();return Ke===null?e.memoizedState=t:wS(e,Ke.memoizedState,t)},useTransition:function(){var t=fh(La)[0],e=fn().memoizedState;return[t,e]},useMutableSource:oS,useSyncExternalStore:aS,useId:SS,unstable_isNewReconciler:!1};function En(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Lu={isMounted:function(t){return(t=t._reactInternals)?Gi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=$r(t),s=or(r,i);s.payload=e,n!=null&&(s.callback=n),e=Vr(t,s,i),e!==null&&(kn(e,t,i,r),dc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=$r(t),s=or(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Vr(t,s,i),e!==null&&(kn(e,t,i,r),dc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=$r(t),i=or(n,r);i.tag=2,e!=null&&(i.callback=e),e=Vr(t,i,r),e!==null&&(kn(e,t,r,n),dc(e,t,r))}};function fv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ra(n,r)||!Ra(i,s):!0}function TS(t,e,n){var r=!1,i=Qr,s=e.contextType;return typeof s=="object"&&s!==null?s=hn(s):(i=Ot(e)?Pi:wt.current,r=e.contextTypes,s=(r=r!=null)?Vs(t,i):Qr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Lu.enqueueReplaceState(e,e.state,null)}function Nf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},dm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=hn(s):(s=Ot(e)?Pi:wt.current,i.context=Vs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(kf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Lu.enqueueReplaceState(i,i.state,null),Uc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zs(t,e){try{var n="",r=e;do n+=m1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ph(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Bk=typeof WeakMap=="function"?WeakMap:Map;function RS(t,e,n){n=or(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zc||(zc=!0,Vf=r),bf(t,e)},n}function kS(t,e,n){n=or(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){bf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){bf(t,e),typeof r!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function mv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Bk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=nN.bind(null,t,e,n),e.then(t,t))}function gv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _v(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=or(-1,1),e.tag=2,Vr(n,e,1))),n.lanes|=1),t)}var zk=gr.ReactCurrentOwner,At=!1;function St(t,e,n,r){e.child=t===null?nS(e,null,n,r):$s(e,t.child,n,r)}function vv(t,e,n,r,i){n=n.render;var s=e.ref;return bs(e,i),r=gm(t,e,n,r,s,i),n=_m(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,hr(t,e,i)):(be&&n&&im(e),e.flags|=1,St(t,e,r,i),e.child)}function yv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!km(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,NS(t,e,s,r,i)):(t=_c(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ra,n(o,r)&&t.ref===e.ref)return hr(t,e,i)}return e.flags|=1,t=Br(s,r),t.ref=e.ref,t.return=e,e.child=t}function NS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ra(s,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,hr(t,e,i)}return Pf(t,e,n,r,i)}function bS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Cs,zt),zt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(Cs,zt),zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Se(Cs,zt),zt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Se(Cs,zt),zt|=r;return St(t,e,i,n),e.child}function PS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pf(t,e,n,r,i){var s=Ot(n)?Pi:wt.current;return s=Vs(e,s),bs(e,i),n=gm(t,e,n,r,s,i),r=_m(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,hr(t,e,i)):(be&&r&&im(e),e.flags|=1,St(t,e,n,i),e.child)}function wv(t,e,n,r,i){if(Ot(n)){var s=!0;Lc(e)}else s=!1;if(bs(e,i),e.stateNode===null)pc(t,e),TS(e,n,r),Nf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=hn(c):(c=Ot(n)?Pi:wt.current,c=Vs(e,c));var d=n.getDerivedStateFromProps,u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&pv(e,o,r,c),Tr=!1;var h=e.memoizedState;o.state=h,Uc(e,r,o,i),l=e.memoizedState,a!==r||h!==l||Lt.current||Tr?(typeof d=="function"&&(kf(e,n,d,r),l=e.memoizedState),(a=Tr||fv(e,n,a,r,h,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,iS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:En(e.type,a),o.props=c,u=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=hn(l):(l=Ot(n)?Pi:wt.current,l=Vs(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||h!==l)&&pv(e,o,r,l),Tr=!1,h=e.memoizedState,o.state=h,Uc(e,r,o,i);var m=e.memoizedState;a!==u||h!==m||Lt.current||Tr?(typeof g=="function"&&(kf(e,n,g,r),m=e.memoizedState),(c=Tr||fv(e,n,c,r,h,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Af(t,e,n,r,s,i)}function Af(t,e,n,r,i,s){PS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&sv(e,n,!1),hr(t,e,s);r=e.stateNode,zk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$s(e,t.child,null,s),e.child=$s(e,null,a,s)):St(t,e,a,s),e.memoizedState=r.state,i&&sv(e,n,!0),e.child}function AS(t){var e=t.stateNode;e.pendingContext?iv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&iv(t,e.context,!1),hm(t,e.containerInfo)}function Sv(t,e,n,r,i){return js(),om(i),e.flags|=256,St(t,e,n,r),e.child}var xf={dehydrated:null,treeContext:null,retryLane:0};function Lf(t){return{baseLanes:t,cachePool:null,transitions:null}}function xS(t,e,n){var r=e.pendingProps,i=Le.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(Le,i&1),t===null)return Tf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Mu(o,r,0,null),t=Ri(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Lf(n),e.memoizedState=xf,t):wm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Wk(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Br(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Br(a,s):(s=Ri(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Lf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=xf,r}return s=t.child,t=s.sibling,r=Br(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wm(t,e){return e=Mu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ql(t,e,n,r){return r!==null&&om(r),$s(e,t.child,null,n),t=wm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Wk(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ph(Error(b(422))),ql(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Mu({mode:"visible",children:r.children},i,0,null),s=Ri(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$s(e,t.child,null,o),e.child.memoizedState=Lf(o),e.memoizedState=xf,s);if(!(e.mode&1))return ql(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(b(419)),r=ph(s,r,void 0),ql(t,e,o,r)}if(a=(o&t.childLanes)!==0,At||a){if(r=ot,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,dr(t,i),kn(r,t,i,-1))}return Rm(),r=ph(Error(b(421))),ql(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=rN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Gt=Ur(i.nextSibling),qt=e,be=!0,In=null,t!==null&&(rn[sn++]=er,rn[sn++]=tr,rn[sn++]=Ai,er=t.id,tr=t.overflow,Ai=e),e=wm(e,r.children),e.flags|=4096,e)}function Ev(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rf(t.return,e,n)}function mh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function LS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(St(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ev(t,n,e);else if(t.tag===19)Ev(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(Le,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Vc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),mh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Vc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}mh(e,!0,n,null,s);break;case"together":mh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Li|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(b(153));if(e.child!==null){for(t=e.child,n=Br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Hk(t,e,n){switch(e.tag){case 3:AS(e),js();break;case 5:sS(e);break;case 1:Ot(e.type)&&Lc(e);break;case 4:hm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(Mc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?xS(t,e,n):(Se(Le,Le.current&1),t=hr(t,e,n),t!==null?t.sibling:null);Se(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return LS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,bS(t,e,n)}return hr(t,e,n)}var OS,Of,DS,MS;OS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Of=function(){};DS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ei(zn.current);var s=null;switch(n){case"input":i=tf(t,i),r=tf(t,r),s=[];break;case"select":i=Me({},i,{value:void 0}),r=Me({},r,{value:void 0}),s=[];break;case"textarea":i=sf(t,i),r=sf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ac)}af(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ya.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ya.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ce("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};MS=function(t,e,n,r){n!==r&&(e.flags|=4)};function No(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Gk(t,e,n){var r=e.pendingProps;switch(sm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Ot(e.type)&&xc(),_t(e),null;case 3:return r=e.stateNode,Bs(),Te(Lt),Te(wt),pm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,In!==null&&(Bf(In),In=null))),Of(t,e),_t(e),null;case 5:fm(e);var i=Ei(Aa.current);if(n=e.type,t!==null&&e.stateNode!=null)DS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(b(166));return _t(e),null}if(t=Ei(zn.current),Gl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Mn]=e,r[ba]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<qo.length;i++)Ce(qo[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":A_(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":L_(r,s),Ce("invalid",r)}af(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Hl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Hl(r.textContent,a,t),i=["children",""+a]):ya.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Fl(r),x_(r,s,!0);break;case"textarea":Fl(r),O_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ac)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mn]=e,t[ba]=r,OS(t,e,!1,!1),e.stateNode=t;e:{switch(o=lf(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<qo.length;i++)Ce(qo[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":A_(t,r),i=tf(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Me({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":L_(t,r),i=sf(t,r),Ce("invalid",t);break;default:i=r}af(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?fw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&dw(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&wa(t,l):typeof l=="number"&&wa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ya.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ce("scroll",t):l!=null&&Wp(t,s,l,o))}switch(n){case"input":Fl(t),x_(t,r,!1);break;case"textarea":Fl(t),O_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ts(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ts(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ac)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)MS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(b(166));if(n=Ei(Aa.current),Ei(zn.current),Gl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mn]=e,(s=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:Hl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=e,e.stateNode=r}return _t(e),null;case 13:if(Te(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Gt!==null&&e.mode&1&&!(e.flags&128))eS(),js(),e.flags|=98560,s=!1;else if(s=Gl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(b(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(b(317));s[Mn]=e}else js(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),s=!1}else In!==null&&(Bf(In),In=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?Qe===0&&(Qe=3):Rm())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return Bs(),Of(t,e),t===null&&ka(e.stateNode.containerInfo),_t(e),null;case 10:return cm(e.type._context),_t(e),null;case 17:return Ot(e.type)&&xc(),_t(e),null;case 19:if(Te(Le),s=e.memoizedState,s===null)return _t(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)No(s,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vc(t),o!==null){for(e.flags|=128,No(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(Le,Le.current&1|2),e.child}t=t.sibling}s.tail!==null&&Be()>Ws&&(e.flags|=128,r=!0,No(s,!1),e.lanes=4194304)}else{if(!r)if(t=Vc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),No(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!be)return _t(e),null}else 2*Be()-s.renderingStartTime>Ws&&n!==1073741824&&(e.flags|=128,r=!0,No(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Be(),e.sibling=null,n=Le.current,Se(Le,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return Tm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zt&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(b(156,e.tag))}function Kk(t,e){switch(sm(e),e.tag){case 1:return Ot(e.type)&&xc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bs(),Te(Lt),Te(wt),pm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fm(e),null;case 13:if(Te(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(b(340));js()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Le),null;case 4:return Bs(),null;case 10:return cm(e.type._context),null;case 22:case 23:return Tm(),null;case 24:return null;default:return null}}var Yl=!1,vt=!1,qk=typeof WeakSet=="function"?WeakSet:Set,$=null;function Es(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function Df(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var Cv=!1;function Yk(t,e){if(vf=Nc,t=$w(),rm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,u=t,h=null;t:for(;;){for(var g;u!==n||i!==0&&u.nodeType!==3||(a=o+i),u!==s||r!==0&&u.nodeType!==3||(l=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(g=u.firstChild)!==null;)h=u,u=g;for(;;){if(u===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++d===r&&(l=o),(g=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(yf={focusedElem:t,selectionRange:n},Nc=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,T=m.memoizedState,v=e.stateNode,f=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:En(e.type,y),T);v.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(I){Ue(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return m=Cv,Cv=!1,m}function ia(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Df(e,n,s)}i=i.next}while(i!==r)}}function Ou(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Mf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function FS(t){var e=t.alternate;e!==null&&(t.alternate=null,FS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[ba],delete e[Ef],delete e[Ak],delete e[xk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function US(t){return t.tag===5||t.tag===3||t.tag===4}function Iv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||US(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ff(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ac));else if(r!==4&&(t=t.child,t!==null))for(Ff(t,e,n),t=t.sibling;t!==null;)Ff(t,e,n),t=t.sibling}function Uf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Uf(t,e,n),t=t.sibling;t!==null;)Uf(t,e,n),t=t.sibling}var ut=null,Cn=!1;function Sr(t,e,n){for(n=n.child;n!==null;)VS(t,e,n),n=n.sibling}function VS(t,e,n){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(Ru,n)}catch{}switch(n.tag){case 5:vt||Es(n,e);case 6:var r=ut,i=Cn;ut=null,Sr(t,e,n),ut=r,Cn=i,ut!==null&&(Cn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(Cn?(t=ut,n=n.stateNode,t.nodeType===8?lh(t.parentNode,n):t.nodeType===1&&lh(t,n),Ia(t)):lh(ut,n.stateNode));break;case 4:r=ut,i=Cn,ut=n.stateNode.containerInfo,Cn=!0,Sr(t,e,n),ut=r,Cn=i;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Df(n,e,o),i=i.next}while(i!==r)}Sr(t,e,n);break;case 1:if(!vt&&(Es(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ue(n,e,a)}Sr(t,e,n);break;case 21:Sr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,Sr(t,e,n),vt=r):Sr(t,e,n);break;default:Sr(t,e,n)}}function Tv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new qk),e.forEach(function(r){var i=iN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function yn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ut=a.stateNode,Cn=!1;break e;case 3:ut=a.stateNode.containerInfo,Cn=!0;break e;case 4:ut=a.stateNode.containerInfo,Cn=!0;break e}a=a.return}if(ut===null)throw Error(b(160));VS(s,o,i),ut=null,Cn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ue(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jS(e,t),e=e.sibling}function jS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yn(e,t),Ln(t),r&4){try{ia(3,t,t.return),Ou(3,t)}catch(y){Ue(t,t.return,y)}try{ia(5,t,t.return)}catch(y){Ue(t,t.return,y)}}break;case 1:yn(e,t),Ln(t),r&512&&n!==null&&Es(n,n.return);break;case 5:if(yn(e,t),Ln(t),r&512&&n!==null&&Es(n,n.return),t.flags&32){var i=t.stateNode;try{wa(i,"")}catch(y){Ue(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&lw(i,s),lf(a,o);var c=lf(a,s);for(o=0;o<l.length;o+=2){var d=l[o],u=l[o+1];d==="style"?fw(i,u):d==="dangerouslySetInnerHTML"?dw(i,u):d==="children"?wa(i,u):Wp(i,d,u,c)}switch(a){case"input":nf(i,s);break;case"textarea":cw(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Ts(i,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?Ts(i,!!s.multiple,s.defaultValue,!0):Ts(i,!!s.multiple,s.multiple?[]:"",!1))}i[ba]=s}catch(y){Ue(t,t.return,y)}}break;case 6:if(yn(e,t),Ln(t),r&4){if(t.stateNode===null)throw Error(b(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Ue(t,t.return,y)}}break;case 3:if(yn(e,t),Ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ia(e.containerInfo)}catch(y){Ue(t,t.return,y)}break;case 4:yn(e,t),Ln(t);break;case 13:yn(e,t),Ln(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Cm=Be())),r&4&&Tv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(c=vt)||d,yn(e,t),vt=c):yn(e,t),Ln(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(u=$=d;$!==null;){switch(h=$,g=h.child,h.tag){case 0:case 11:case 14:case 15:ia(4,h,h.return);break;case 1:Es(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Ue(r,n,y)}}break;case 5:Es(h,h.return);break;case 22:if(h.memoizedState!==null){kv(u);continue}}g!==null?(g.return=h,$=g):kv(u)}d=d.sibling}e:for(d=null,u=t;;){if(u.tag===5){if(d===null){d=u;try{i=u.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=hw("display",o))}catch(y){Ue(t,t.return,y)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(y){Ue(t,t.return,y)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:yn(e,t),Ln(t),r&4&&Tv(t);break;case 21:break;default:yn(e,t),Ln(t)}}function Ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(US(n)){var r=n;break e}n=n.return}throw Error(b(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wa(i,""),r.flags&=-33);var s=Iv(t);Uf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Iv(t);Ff(t,a,o);break;default:throw Error(b(161))}}catch(l){Ue(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qk(t,e,n){$=t,$S(t)}function $S(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yl;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||vt;a=Yl;var c=vt;if(Yl=o,(vt=l)&&!c)for($=i;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?Nv(i):l!==null?(l.return=o,$=l):Nv(i);for(;s!==null;)$=s,$S(s),s=s.sibling;$=i,Yl=a,vt=c}Rv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):Rv(t)}}function Rv(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||Ou(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:En(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&uv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&Ia(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}vt||e.flags&512&&Mf(e)}catch(h){Ue(e,e.return,h)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function kv(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Nv(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ou(4,e)}catch(l){Ue(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ue(e,i,l)}}var s=e.return;try{Mf(e)}catch(l){Ue(e,s,l)}break;case 5:var o=e.return;try{Mf(e)}catch(l){Ue(e,o,l)}}}catch(l){Ue(e,e.return,l)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var Jk=Math.ceil,Bc=gr.ReactCurrentDispatcher,Sm=gr.ReactCurrentOwner,un=gr.ReactCurrentBatchConfig,ue=0,ot=null,We=null,dt=0,zt=0,Cs=oi(0),Qe=0,Da=null,Li=0,Du=0,Em=0,sa=null,bt=null,Cm=0,Ws=1/0,Jn=null,zc=!1,Vf=null,jr=null,Ql=!1,Pr=null,Wc=0,oa=0,jf=null,mc=-1,gc=0;function Ct(){return ue&6?Be():mc!==-1?mc:mc=Be()}function $r(t){return t.mode&1?ue&2&&dt!==0?dt&-dt:Ok.transition!==null?(gc===0&&(gc=Tw()),gc):(t=me,t!==0||(t=window.event,t=t===void 0?16:xw(t.type)),t):1}function kn(t,e,n,r){if(50<oa)throw oa=0,jf=null,Error(b(185));nl(t,n,r),(!(ue&2)||t!==ot)&&(t===ot&&(!(ue&2)&&(Du|=n),Qe===4&&Nr(t,dt)),Dt(t,r),n===1&&ue===0&&!(e.mode&1)&&(Ws=Be()+500,Au&&ai()))}function Dt(t,e){var n=t.callbackNode;O1(t,e);var r=kc(t,t===ot?dt:0);if(r===0)n!==null&&F_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&F_(n),e===1)t.tag===0?Lk(bv.bind(null,t)):Jw(bv.bind(null,t)),bk(function(){!(ue&6)&&ai()}),n=null;else{switch(Rw(r)){case 1:n=Yp;break;case 4:n=Cw;break;case 16:n=Rc;break;case 536870912:n=Iw;break;default:n=Rc}n=YS(n,BS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function BS(t,e){if(mc=-1,gc=0,ue&6)throw Error(b(327));var n=t.callbackNode;if(Ps()&&t.callbackNode!==n)return null;var r=kc(t,t===ot?dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hc(t,r);else{e=r;var i=ue;ue|=2;var s=WS();(ot!==t||dt!==e)&&(Jn=null,Ws=Be()+500,Ti(t,e));do try{eN();break}catch(a){zS(t,a)}while(!0);lm(),Bc.current=s,ue=i,We!==null?e=0:(ot=null,dt=0,e=Qe)}if(e!==0){if(e===2&&(i=ff(t),i!==0&&(r=i,e=$f(t,i))),e===1)throw n=Da,Ti(t,0),Nr(t,r),Dt(t,Be()),n;if(e===6)Nr(t,r);else{if(i=t.current.alternate,!(r&30)&&!Xk(i)&&(e=Hc(t,r),e===2&&(s=ff(t),s!==0&&(r=s,e=$f(t,s))),e===1))throw n=Da,Ti(t,0),Nr(t,r),Dt(t,Be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(b(345));case 2:mi(t,bt,Jn);break;case 3:if(Nr(t,r),(r&130023424)===r&&(e=Cm+500-Be(),10<e)){if(kc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Sf(mi.bind(null,t,bt,Jn),e);break}mi(t,bt,Jn);break;case 4:if(Nr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Rn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Jk(r/1960))-r,10<r){t.timeoutHandle=Sf(mi.bind(null,t,bt,Jn),r);break}mi(t,bt,Jn);break;case 5:mi(t,bt,Jn);break;default:throw Error(b(329))}}}return Dt(t,Be()),t.callbackNode===n?BS.bind(null,t):null}function $f(t,e){var n=sa;return t.current.memoizedState.isDehydrated&&(Ti(t,e).flags|=256),t=Hc(t,e),t!==2&&(e=bt,bt=n,e!==null&&Bf(e)),t}function Bf(t){bt===null?bt=t:bt.push.apply(bt,t)}function Xk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Pn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nr(t,e){for(e&=~Em,e&=~Du,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rn(e),r=1<<n;t[n]=-1,e&=~r}}function bv(t){if(ue&6)throw Error(b(327));Ps();var e=kc(t,0);if(!(e&1))return Dt(t,Be()),null;var n=Hc(t,e);if(t.tag!==0&&n===2){var r=ff(t);r!==0&&(e=r,n=$f(t,r))}if(n===1)throw n=Da,Ti(t,0),Nr(t,e),Dt(t,Be()),n;if(n===6)throw Error(b(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mi(t,bt,Jn),Dt(t,Be()),null}function Im(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(Ws=Be()+500,Au&&ai())}}function Oi(t){Pr!==null&&Pr.tag===0&&!(ue&6)&&Ps();var e=ue;ue|=1;var n=un.transition,r=me;try{if(un.transition=null,me=1,t)return t()}finally{me=r,un.transition=n,ue=e,!(ue&6)&&ai()}}function Tm(){zt=Cs.current,Te(Cs)}function Ti(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Nk(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(sm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xc();break;case 3:Bs(),Te(Lt),Te(wt),pm();break;case 5:fm(r);break;case 4:Bs();break;case 13:Te(Le);break;case 19:Te(Le);break;case 10:cm(r.type._context);break;case 22:case 23:Tm()}n=n.return}if(ot=t,We=t=Br(t.current,null),dt=zt=e,Qe=0,Da=null,Em=Du=Li=0,bt=sa=null,Si!==null){for(e=0;e<Si.length;e++)if(n=Si[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Si=null}return t}function zS(t,e){do{var n=We;try{if(lm(),hc.current=$c,jc){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}jc=!1}if(xi=0,nt=Ke=De=null,ra=!1,xa=0,Sm.current=null,n===null||n.return===null){Qe=1,Da=e,We=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=dt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,u=d.tag;if(!(d.mode&1)&&(u===0||u===11||u===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=gv(o);if(g!==null){g.flags&=-257,_v(g,o,a,s,e),g.mode&1&&mv(s,c,e),e=g,l=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){mv(s,c,e),Rm();break e}l=Error(b(426))}}else if(be&&a.mode&1){var T=gv(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),_v(T,o,a,s,e),om(zs(l,a));break e}}s=l=zs(l,a),Qe!==4&&(Qe=2),sa===null?sa=[s]:sa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=RS(s,l,e);cv(s,v);break e;case 1:a=l;var f=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(jr===null||!jr.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=kS(s,a,e);cv(s,I);break e}}s=s.return}while(s!==null)}GS(n)}catch(R){e=R,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function WS(){var t=Bc.current;return Bc.current=$c,t===null?$c:t}function Rm(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),ot===null||!(Li&268435455)&&!(Du&268435455)||Nr(ot,dt)}function Hc(t,e){var n=ue;ue|=2;var r=WS();(ot!==t||dt!==e)&&(Jn=null,Ti(t,e));do try{Zk();break}catch(i){zS(t,i)}while(!0);if(lm(),ue=n,Bc.current=r,We!==null)throw Error(b(261));return ot=null,dt=0,Qe}function Zk(){for(;We!==null;)HS(We)}function eN(){for(;We!==null&&!T1();)HS(We)}function HS(t){var e=qS(t.alternate,t,zt);t.memoizedProps=t.pendingProps,e===null?GS(t):We=e,Sm.current=null}function GS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Kk(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,We=null;return}}else if(n=Gk(n,e,zt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Qe===0&&(Qe=5)}function mi(t,e,n){var r=me,i=un.transition;try{un.transition=null,me=1,tN(t,e,n,r)}finally{un.transition=i,me=r}return null}function tN(t,e,n,r){do Ps();while(Pr!==null);if(ue&6)throw Error(b(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(b(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(D1(t,s),t===ot&&(We=ot=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ql||(Ql=!0,YS(Rc,function(){return Ps(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=un.transition,un.transition=null;var o=me;me=1;var a=ue;ue|=4,Sm.current=null,Yk(t,n),jS(n,t),Sk(yf),Nc=!!vf,yf=vf=null,t.current=n,Qk(n),R1(),ue=a,me=o,un.transition=s}else t.current=n;if(Ql&&(Ql=!1,Pr=t,Wc=i),s=t.pendingLanes,s===0&&(jr=null),b1(n.stateNode),Dt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zc)throw zc=!1,t=Vf,Vf=null,t;return Wc&1&&t.tag!==0&&Ps(),s=t.pendingLanes,s&1?t===jf?oa++:(oa=0,jf=t):oa=0,ai(),null}function Ps(){if(Pr!==null){var t=Rw(Wc),e=un.transition,n=me;try{if(un.transition=null,me=16>t?16:t,Pr===null)var r=!1;else{if(t=Pr,Pr=null,Wc=0,ue&6)throw Error(b(331));var i=ue;for(ue|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for($=c;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:ia(8,d,s)}var u=d.child;if(u!==null)u.return=d,$=u;else for(;$!==null;){d=$;var h=d.sibling,g=d.return;if(FS(d),d===c){$=null;break}if(h!==null){h.return=g,$=h;break}$=g}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var T=y.sibling;y.sibling=null,y=T}while(y!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ia(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,$=v;break e}$=s.return}}var f=t.current;for($=f;$!==null;){o=$;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,$=_;else e:for(o=f;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ou(9,a)}}catch(R){Ue(a,a.return,R)}if(a===o){$=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,$=I;break e}$=a.return}}if(ue=i,ai(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(Ru,t)}catch{}r=!0}return r}finally{me=n,un.transition=e}}return!1}function Pv(t,e,n){e=zs(n,e),e=RS(t,e,1),t=Vr(t,e,1),e=Ct(),t!==null&&(nl(t,1,e),Dt(t,e))}function Ue(t,e,n){if(t.tag===3)Pv(t,t,n);else for(;e!==null;){if(e.tag===3){Pv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jr===null||!jr.has(r))){t=zs(n,t),t=kS(e,t,1),e=Vr(e,t,1),t=Ct(),e!==null&&(nl(e,1,t),Dt(e,t));break}}e=e.return}}function nN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(dt&n)===n&&(Qe===4||Qe===3&&(dt&130023424)===dt&&500>Be()-Cm?Ti(t,0):Em|=n),Dt(t,e)}function KS(t,e){e===0&&(t.mode&1?(e=jl,jl<<=1,!(jl&130023424)&&(jl=4194304)):e=1);var n=Ct();t=dr(t,e),t!==null&&(nl(t,e,n),Dt(t,n))}function rN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),KS(t,n)}function iN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(e),KS(t,n)}var qS;qS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lt.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,Hk(t,e,n);At=!!(t.flags&131072)}else At=!1,be&&e.flags&1048576&&Xw(e,Dc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pc(t,e),t=e.pendingProps;var i=Vs(e,wt.current);bs(e,n),i=gm(null,e,r,t,i,n);var s=_m();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(r)?(s=!0,Lc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,dm(e),i.updater=Lu,e.stateNode=i,i._reactInternals=e,Nf(e,r,t,n),e=Af(null,e,r,!0,s,n)):(e.tag=0,be&&s&&im(e),St(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=oN(r),t=En(r,t),i){case 0:e=Pf(null,e,r,t,n);break e;case 1:e=wv(null,e,r,t,n);break e;case 11:e=vv(null,e,r,t,n);break e;case 14:e=yv(null,e,r,En(r.type,t),n);break e}throw Error(b(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:En(r,i),Pf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:En(r,i),wv(t,e,r,i,n);case 3:e:{if(AS(e),t===null)throw Error(b(387));r=e.pendingProps,s=e.memoizedState,i=s.element,iS(t,e),Uc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zs(Error(b(423)),e),e=Sv(t,e,r,n,i);break e}else if(r!==i){i=zs(Error(b(424)),e),e=Sv(t,e,r,n,i);break e}else for(Gt=Ur(e.stateNode.containerInfo.firstChild),qt=e,be=!0,In=null,n=nS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(js(),r===i){e=hr(t,e,n);break e}St(t,e,r,n)}e=e.child}return e;case 5:return sS(e),t===null&&Tf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,wf(r,i)?o=null:s!==null&&wf(r,s)&&(e.flags|=32),PS(t,e),St(t,e,o,n),e.child;case 6:return t===null&&Tf(e),null;case 13:return xS(t,e,n);case 4:return hm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$s(e,null,r,n):St(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:En(r,i),vv(t,e,r,i,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Se(Mc,r._currentValue),r._currentValue=o,s!==null)if(Pn(s.value,o)){if(s.children===i.children&&!Lt.current){e=hr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=or(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Rf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(b(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Rf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}St(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,bs(e,n),i=hn(i),r=r(i),e.flags|=1,St(t,e,r,n),e.child;case 14:return r=e.type,i=En(r,e.pendingProps),i=En(r.type,i),yv(t,e,r,i,n);case 15:return NS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:En(r,i),pc(t,e),e.tag=1,Ot(r)?(t=!0,Lc(e)):t=!1,bs(e,n),TS(e,r,i),Nf(e,r,i,n),Af(null,e,r,!0,t,n);case 19:return LS(t,e,n);case 22:return bS(t,e,n)}throw Error(b(156,e.tag))};function YS(t,e){return Ew(t,e)}function sN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(t,e,n,r){return new sN(t,e,n,r)}function km(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oN(t){if(typeof t=="function")return km(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gp)return 11;if(t===Kp)return 14}return 2}function Br(t,e){var n=t.alternate;return n===null?(n=an(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _c(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")km(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fs:return Ri(n.children,i,s,e);case Hp:o=8,i|=8;break;case Jh:return t=an(12,n,e,i|2),t.elementType=Jh,t.lanes=s,t;case Xh:return t=an(13,n,e,i),t.elementType=Xh,t.lanes=s,t;case Zh:return t=an(19,n,e,i),t.elementType=Zh,t.lanes=s,t;case sw:return Mu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rw:o=10;break e;case iw:o=9;break e;case Gp:o=11;break e;case Kp:o=14;break e;case Ir:o=16,r=null;break e}throw Error(b(130,t==null?t:typeof t,""))}return e=an(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ri(t,e,n,r){return t=an(7,t,r,e),t.lanes=n,t}function Mu(t,e,n,r){return t=an(22,t,r,e),t.elementType=sw,t.lanes=n,t.stateNode={isHidden:!1},t}function gh(t,e,n){return t=an(6,t,null,e),t.lanes=n,t}function _h(t,e,n){return e=an(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function aN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jd(0),this.expirationTimes=Jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nm(t,e,n,r,i,s,o,a,l){return t=new aN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=an(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dm(s),t}function lN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function QS(t){if(!t)return Qr;t=t._reactInternals;e:{if(Gi(t)!==t||t.tag!==1)throw Error(b(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(b(171))}if(t.tag===1){var n=t.type;if(Ot(n))return Qw(t,n,e)}return e}function JS(t,e,n,r,i,s,o,a,l){return t=Nm(n,r,!0,t,i,s,o,a,l),t.context=QS(null),n=t.current,r=Ct(),i=$r(n),s=or(r,i),s.callback=e??null,Vr(n,s,i),t.current.lanes=i,nl(t,i,r),Dt(t,r),t}function Fu(t,e,n,r){var i=e.current,s=Ct(),o=$r(i);return n=QS(n),e.context===null?e.context=n:e.pendingContext=n,e=or(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vr(i,e,o),t!==null&&(kn(t,i,o,s),dc(t,i,o)),o}function Gc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Av(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bm(t,e){Av(t,e),(t=t.alternate)&&Av(t,e)}function cN(){return null}var XS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pm(t){this._internalRoot=t}Uu.prototype.render=Pm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(b(409));Fu(t,e,null,null)};Uu.prototype.unmount=Pm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oi(function(){Fu(null,t,null,null)}),e[ur]=null}};function Uu(t){this._internalRoot=t}Uu.prototype.unstable_scheduleHydration=function(t){if(t){var e=bw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<kr.length&&e!==0&&e<kr[n].priority;n++);kr.splice(n,0,t),n===0&&Aw(t)}};function Am(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xv(){}function uN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Gc(o);s.call(c)}}var o=JS(e,r,t,0,null,!1,!1,"",xv);return t._reactRootContainer=o,t[ur]=o.current,ka(t.nodeType===8?t.parentNode:t),Oi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Gc(l);a.call(c)}}var l=Nm(t,0,!1,null,null,!1,!1,"",xv);return t._reactRootContainer=l,t[ur]=l.current,ka(t.nodeType===8?t.parentNode:t),Oi(function(){Fu(e,l,n,r)}),l}function ju(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Gc(o);a.call(l)}}Fu(e,o,t,i)}else o=uN(n,e,t,i,r);return Gc(o)}kw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ko(e.pendingLanes);n!==0&&(Qp(e,n|1),Dt(e,Be()),!(ue&6)&&(Ws=Be()+500,ai()))}break;case 13:Oi(function(){var r=dr(t,1);if(r!==null){var i=Ct();kn(r,t,1,i)}}),bm(t,1)}};Jp=function(t){if(t.tag===13){var e=dr(t,134217728);if(e!==null){var n=Ct();kn(e,t,134217728,n)}bm(t,134217728)}};Nw=function(t){if(t.tag===13){var e=$r(t),n=dr(t,e);if(n!==null){var r=Ct();kn(n,t,e,r)}bm(t,e)}};bw=function(){return me};Pw=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};uf=function(t,e,n){switch(e){case"input":if(nf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Pu(r);if(!i)throw Error(b(90));aw(r),nf(r,i)}}}break;case"textarea":cw(t,n);break;case"select":e=n.value,e!=null&&Ts(t,!!n.multiple,e,!1)}};gw=Im;_w=Oi;var dN={usingClientEntryPoint:!1,Events:[il,_s,Pu,pw,mw,Im]},bo={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hN={bundleType:bo.bundleType,version:bo.version,rendererPackageName:bo.rendererPackageName,rendererConfig:bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ww(t),t===null?null:t.stateNode},findFiberByHostInstance:bo.findFiberByHostInstance||cN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jl.isDisabled&&Jl.supportsFiber)try{Ru=Jl.inject(hN),Bn=Jl}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dN;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Am(e))throw Error(b(200));return lN(t,e,null,n)};Xt.createRoot=function(t,e){if(!Am(t))throw Error(b(299));var n=!1,r="",i=XS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Nm(t,1,!1,null,null,n,!1,r,i),t[ur]=e.current,ka(t.nodeType===8?t.parentNode:t),new Pm(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(b(188)):(t=Object.keys(t).join(","),Error(b(268,t)));return t=ww(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return Oi(t)};Xt.hydrate=function(t,e,n){if(!Vu(e))throw Error(b(200));return ju(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!Am(t))throw Error(b(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=XS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JS(e,null,t,1,n??null,i,!1,s,o),t[ur]=e.current,ka(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Uu(e)};Xt.render=function(t,e,n){if(!Vu(e))throw Error(b(200));return ju(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!Vu(t))throw Error(b(40));return t._reactRootContainer?(Oi(function(){ju(null,null,t,!1,function(){t._reactRootContainer=null,t[ur]=null})}),!0):!1};Xt.unstable_batchedUpdates=Im;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vu(n))throw Error(b(200));if(t==null||t._reactInternals===void 0)throw Error(b(38));return ju(t,e,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function ZS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZS)}catch(t){console.error(t)}}ZS(),Z0.exports=Xt;var eE=Z0.exports;const xm=$0(eE);var tE,Lv=eE;tE=Lv.createRoot,Lv.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ma(){return Ma=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ma.apply(this,arguments)}var Ar;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ar||(Ar={}));const Ov="popstate";function fN(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Ki(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),zf("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:Kc(s))}function r(i,s){Lm(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return mN(e,n,r,t)}function He(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Lm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pN(){return Math.random().toString(36).substr(2,8)}function Dv(t,e){return{usr:t.state,key:t.key,idx:e}}function zf(t,e,n,r){return n===void 0&&(n=null),Ma({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ki(e):e,{state:n,key:e&&e.key||r||pN()})}function Kc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ki(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function mN(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ar.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Ma({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function u(){a=Ar.Pop;let T=d(),v=T==null?null:T-c;c=T,l&&l({action:a,location:y.location,delta:v})}function h(T,v){a=Ar.Push;let f=zf(y.location,T,v);n&&n(f,T),c=d()+1;let _=Dv(f,c),I=y.createHref(f);try{o.pushState(_,"",I)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(I)}s&&l&&l({action:a,location:y.location,delta:1})}function g(T,v){a=Ar.Replace;let f=zf(y.location,T,v);n&&n(f,T),c=d();let _=Dv(f,c),I=y.createHref(f);o.replaceState(_,"",I),s&&l&&l({action:a,location:y.location,delta:0})}function m(T){let v=i.location.origin!=="null"?i.location.origin:i.location.href,f=typeof T=="string"?T:Kc(T);return f=f.replace(/ $/,"%20"),He(v,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,v)}let y={get action(){return a},get location(){return t(i,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Ov,u),l=T,()=>{i.removeEventListener(Ov,u),l=null}},createHref(T){return e(i,T)},createURL:m,encodeLocation(T){let v=m(T);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:g,go(T){return o.go(T)}};return y}var Mv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Mv||(Mv={}));function gN(t,e,n){return n===void 0&&(n="/"),_N(t,e,n,!1)}function _N(t,e,n,r){let i=typeof e=="string"?Ki(e):e,s=Om(i.pathname||"/",n);if(s==null)return null;let o=nE(t);vN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=bN(s);a=kN(o[l],c,r)}return a}function nE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(He(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=zr([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(He(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),nE(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:TN(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of rE(s.path))i(s,o,l)}),e}function rE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=rE(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function vN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:RN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const yN=/^:[\w-]+$/,wN=3,SN=2,EN=1,CN=10,IN=-2,Fv=t=>t==="*";function TN(t,e){let n=t.split("/"),r=n.length;return n.some(Fv)&&(r+=IN),e&&(r+=SN),n.filter(i=>!Fv(i)).reduce((i,s)=>i+(yN.test(s)?wN:s===""?EN:CN),r)}function RN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function kN(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",u=Uv({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),h=l.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=Uv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:zr([s,u.pathname]),pathnameBase:LN(zr([s,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(s=zr([s,u.pathnameBase]))}return o}function Uv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=NN(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,u)=>{let{paramName:h,isOptional:g}=d;if(h==="*"){let y=a[u]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const m=a[u];return g&&!m?c[h]=void 0:c[h]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function NN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Lm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function bN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Om(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function PN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ki(t):t;return{pathname:n?n.startsWith("/")?n:AN(n,e):e,search:ON(r),hash:DN(i)}}function AN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function vh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function iE(t,e){let n=xN(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function sE(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ki(t):(i=Ma({},t),He(!i.pathname||!i.pathname.includes("?"),vh("?","pathname","search",i)),He(!i.pathname||!i.pathname.includes("#"),vh("#","pathname","hash",i)),He(!i.search||!i.search.includes("#"),vh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let u=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),u-=1;i.pathname=h.join("/")}a=u>=0?e[u]:"/"}let l=PN(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const zr=t=>t.join("/").replace(/\/\/+/g,"/"),LN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ON=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,DN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function MN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const oE=["post","put","patch","delete"];new Set(oE);const FN=["get",...oE];new Set(FN);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fa(){return Fa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fa.apply(this,arguments)}const Dm=C.createContext(null),UN=C.createContext(null),qi=C.createContext(null),$u=C.createContext(null),_r=C.createContext({outlet:null,matches:[],isDataRoute:!1}),aE=C.createContext(null);function VN(t,e){let{relative:n}=e===void 0?{}:e;ol()||He(!1);let{basename:r,navigator:i}=C.useContext(qi),{hash:s,pathname:o,search:a}=uE(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:zr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ol(){return C.useContext($u)!=null}function Bu(){return ol()||He(!1),C.useContext($u).location}function lE(t){C.useContext(qi).static||C.useLayoutEffect(t)}function cE(){let{isDataRoute:t}=C.useContext(_r);return t?eb():jN()}function jN(){ol()||He(!1);let t=C.useContext(Dm),{basename:e,future:n,navigator:r}=C.useContext(qi),{matches:i}=C.useContext(_r),{pathname:s}=Bu(),o=JSON.stringify(iE(i,n.v7_relativeSplatPath)),a=C.useRef(!1);return lE(()=>{a.current=!0}),C.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let u=sE(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:zr([e,u.pathname])),(d.replace?r.replace:r.push)(u,d.state,d)},[e,r,o,s,t])}const $N=C.createContext(null);function BN(t){let e=C.useContext(_r).outlet;return e&&C.createElement($N.Provider,{value:t},e)}function Mm(){let{matches:t}=C.useContext(_r),e=t[t.length-1];return e?e.params:{}}function uE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=C.useContext(qi),{matches:i}=C.useContext(_r),{pathname:s}=Bu(),o=JSON.stringify(iE(i,r.v7_relativeSplatPath));return C.useMemo(()=>sE(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function zN(t,e){return WN(t,e)}function WN(t,e,n,r){ol()||He(!1);let{navigator:i}=C.useContext(qi),{matches:s}=C.useContext(_r),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Bu(),d;if(e){var u;let T=typeof e=="string"?Ki(e):e;l==="/"||(u=T.pathname)!=null&&u.startsWith(l)||He(!1),d=T}else d=c;let h=d.pathname||"/",g=h;if(l!=="/"){let T=l.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(T.length).join("/")}let m=gN(t,{pathname:g}),y=YN(m&&m.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:zr([l,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:zr([l,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,r);return e&&y?C.createElement($u.Provider,{value:{location:Fa({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ar.Pop}},y):y}function HN(){let t=ZN(),e=MN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:i},n):null,null)}const GN=C.createElement(HN,null);class KN extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement(_r.Provider,{value:this.props.routeContext},C.createElement(aE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qN(t){let{routeContext:e,match:n,children:r}=t,i=C.useContext(Dm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(_r.Provider,{value:e},r)}function YN(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);d>=0||He(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let u=o[d];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=d),u.route.id){let{loaderData:h,errors:g}=n,m=u.route.loader&&h[u.route.id]===void 0&&(!g||g[u.route.id]===void 0);if(u.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,u,h)=>{let g,m=!1,y=null,T=null;n&&(g=a&&u.route.id?a[u.route.id]:void 0,y=u.route.errorElement||GN,l&&(c<0&&h===0?(m=!0,T=null):c===h&&(m=!0,T=u.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,h+1)),f=()=>{let _;return g?_=y:m?_=T:u.route.Component?_=C.createElement(u.route.Component,null):u.route.element?_=u.route.element:_=d,C.createElement(qN,{match:u,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:_})};return n&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?C.createElement(KN,{location:n.location,revalidation:n.revalidation,component:y,error:g,children:f(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):f()},null)}var dE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dE||{}),qc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qc||{});function QN(t){let e=C.useContext(Dm);return e||He(!1),e}function JN(t){let e=C.useContext(UN);return e||He(!1),e}function XN(t){let e=C.useContext(_r);return e||He(!1),e}function hE(t){let e=XN(),n=e.matches[e.matches.length-1];return n.route.id||He(!1),n.route.id}function ZN(){var t;let e=C.useContext(aE),n=JN(qc.UseRouteError),r=hE(qc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function eb(){let{router:t}=QN(dE.UseNavigateStable),e=hE(qc.UseNavigateStable),n=C.useRef(!1);return lE(()=>{n.current=!0}),C.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Fa({fromRouteId:e},s)))},[t,e])}const Vv={};function tb(t,e){Vv[e]||(Vv[e]=!0,console.warn(e))}const jv=(t,e,n)=>tb(t," React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function nb(t,e){t!=null&&t.v7_startTransition||jv("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&jv("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function fE(t){return BN(t.context)}function ds(t){He(!1)}function rb(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ar.Pop,navigator:s,static:o=!1,future:a}=t;ol()&&He(!1);let l=e.replace(/^\/*/,"/"),c=C.useMemo(()=>({basename:l,navigator:s,static:o,future:Fa({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Ki(r));let{pathname:d="/",search:u="",hash:h="",state:g=null,key:m="default"}=r,y=C.useMemo(()=>{let T=Om(d,l);return T==null?null:{location:{pathname:T,search:u,hash:h,state:g,key:m},navigationType:i}},[l,d,u,h,g,m,i]);return y==null?null:C.createElement(qi.Provider,{value:c},C.createElement($u.Provider,{children:n,value:y}))}function ib(t){let{children:e,location:n}=t;return zN(Wf(e),n)}new Promise(()=>{});function Wf(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,i)=>{if(!C.isValidElement(r))return;let s=[...e,i];if(r.type===C.Fragment){n.push.apply(n,Wf(r.props.children,s));return}r.type!==ds&&He(!1),!r.props.index||!r.props.children||He(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Wf(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hf(){return Hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hf.apply(this,arguments)}function sb(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ob(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ab(t,e){return t.button===0&&(!e||e==="_self")&&!ob(t)}const lb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cb="6";try{window.__reactRouterVersion=cb}catch{}const ub="startTransition",$v=n1[ub];function db(t){let{basename:e,children:n,future:r,window:i}=t,s=C.useRef();s.current==null&&(s.current=fN({window:i,v5Compat:!0}));let o=s.current,[a,l]=C.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=C.useCallback(u=>{c&&$v?$v(()=>l(u)):l(u)},[l,c]);return C.useLayoutEffect(()=>o.listen(d),[o,d]),C.useEffect(()=>nb(r),[r]),C.createElement(rb,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const hb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gf=C.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:u}=e,h=sb(e,lb),{basename:g}=C.useContext(qi),m,y=!1;if(typeof c=="string"&&fb.test(c)&&(m=c,hb))try{let _=new URL(window.location.href),I=c.startsWith("//")?new URL(_.protocol+c):new URL(c),R=Om(I.pathname,g);I.origin===_.origin&&R!=null?c=R+I.search+I.hash:y=!0}catch{}let T=VN(c,{relative:i}),v=pb(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:u});function f(_){r&&r(_),_.defaultPrevented||v(_)}return C.createElement("a",Hf({},h,{href:m||T,onClick:y||s?r:f,ref:n,target:l}))});var Bv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Bv||(Bv={}));var zv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zv||(zv={}));function pb(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=cE(),c=Bu(),d=uE(t,{relative:o});return C.useCallback(u=>{if(ab(u,n)){u.preventDefault();let h=r!==void 0?r:Kc(c)===Kc(d);l(t,{replace:h,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,r,i,n,t,s,o,a])}const mb="_container_1ihef_1",gb={container:mb},_b=()=>p.jsxs("div",{className:gb.container,children:[p.jsx(Gf,{to:"/nb",children:"bokml"}),p.jsx(Gf,{to:"/nn",children:"nynorsk"})]}),zu=()=>{const t=Mm();return(t==null?void 0:t.lang)??""};var pE={};function vb(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var yb=vb,ne=yb;function wb(t){return!!t&&typeof t.then=="function"}var Ie=wb;function Sb(t,e){if(t!=null)return t;throw ne(e??"Got unexpected null or undefined")}var Pe=Sb;function ee(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Wu{getValue(){throw ne("BaseLoadable")}toPromise(){throw ne("BaseLoadable")}valueMaybe(){throw ne("BaseLoadable")}valueOrThrow(){throw ne(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw ne("BaseLoadable")}promiseOrThrow(){throw ne(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw ne("BaseLoadable")}errorOrThrow(){throw ne(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw ne("BaseLoadable")}}class Eb extends Wu{constructor(e){super(),ee(this,"state","hasValue"),ee(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return Ie(n)?Di(n):Hs(n)?n:al(n)}catch(n){return Ie(n)?Di(n.next(()=>this.map(e))):Hu(n)}}}class Cb extends Wu{constructor(e){super(),ee(this,"state","hasError"),ee(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class mE extends Wu{constructor(e){super(),ee(this,"state","loading"),ee(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return Di(this.contents.then(n=>{const r=e(n);if(Hs(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(n=>{if(Ie(n))return n.then(()=>this.map(e).contents);throw n}))}}function al(t){return Object.freeze(new Eb(t))}function Hu(t){return Object.freeze(new Cb(t))}function Di(t){return Object.freeze(new mE(t))}function gE(){return Object.freeze(new mE(new Promise(()=>{})))}function Ib(t){return t.every(e=>e.state==="hasValue")?al(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?Hu(Pe(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):Di(Promise.all(t.map(e=>e.contents)))}function _E(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(i=>t[i])).map(i=>Hs(i)?i:Ie(i)?Di(i):al(i)),r=Ib(n);return Array.isArray(t)?r:r.map(i=>Object.getOwnPropertyNames(t).reduce((s,o,a)=>({...s,[o]:i[a]}),{}))}function Hs(t){return t instanceof Wu}const Tb={of:t=>Ie(t)?Di(t):Hs(t)?t:al(t),error:t=>Hu(t),loading:()=>gE(),all:_E,isLoadable:Hs};var Yi={loadableWithValue:al,loadableWithError:Hu,loadableWithPromise:Di,loadableLoading:gE,loadableAll:_E,isLoadable:Hs,RecoilLoadable:Tb},Rb=Yi.loadableWithValue,kb=Yi.loadableWithError,Nb=Yi.loadableWithPromise,bb=Yi.loadableLoading,Pb=Yi.loadableAll,Ab=Yi.isLoadable,xb=Yi.RecoilLoadable,ll=Object.freeze({__proto__:null,loadableWithValue:Rb,loadableWithError:kb,loadableWithPromise:Nb,loadableLoading:bb,loadableAll:Pb,isLoadable:Ab,RecoilLoadable:xb});const Kf={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function Lb(t,e){var n,r;const i=(n=pE[t])===null||n===void 0||(r=n.toLowerCase())===null||r===void 0?void 0:r.trim();if(i==null||i==="")return;if(!["true","false"].includes(i))throw ne(`process.env.${t} value must be 'true', 'false', or empty: ${i}`);e(i==="true")}function Ob(t,e){var n;const r=(n=pE[t])===null||n===void 0?void 0:n.trim();r==null||r===""||e(r.split(/\s*,\s*|\s+/))}function Db(){var t;typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)!=null&&(Lb("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{Kf.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),Ob("RECOIL_GKS_ENABLED",e=>{e.forEach(n=>{Kf.RECOIL_GKS_ENABLED.add(n)})}))}Db();var lo=Kf;function Gu(t){return lo.RECOIL_GKS_ENABLED.has(t)}Gu.setPass=t=>{lo.RECOIL_GKS_ENABLED.add(t)};Gu.setFail=t=>{lo.RECOIL_GKS_ENABLED.delete(t)};Gu.clear=()=>{lo.RECOIL_GKS_ENABLED.clear()};var ye=Gu;function Mb(t,e,{error:n}={}){return null}var Fb=Mb,Fm=Fb,yh,wh,Sh;const Ub=(yh=he.createMutableSource)!==null&&yh!==void 0?yh:he.unstable_createMutableSource,vE=(wh=he.useMutableSource)!==null&&wh!==void 0?wh:he.unstable_useMutableSource,yE=(Sh=he.useSyncExternalStore)!==null&&Sh!==void 0?Sh:he.unstable_useSyncExternalStore;function Vb(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function jb(){return ye("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:ye("recoil_sync_external_store")&&yE!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:ye("recoil_mutable_source")&&vE!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?ye("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:ye("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function $b(){return!1}var cl={createMutableSource:Ub,useMutableSource:vE,useSyncExternalStore:yE,currentRendererSupportsUseSyncExternalStore:Vb,reactMode:jb,isFastRefreshEnabled:$b};class Um{constructor(e){ee(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class wE extends Um{}class SE extends Um{}function Bb(t){return t instanceof wE||t instanceof SE}var Ku={AbstractRecoilValue:Um,RecoilState:wE,RecoilValueReadOnly:SE,isRecoilValue:Bb},zb=Ku.AbstractRecoilValue,Wb=Ku.RecoilState,Hb=Ku.RecoilValueReadOnly,Gb=Ku.isRecoilValue,Gs=Object.freeze({__proto__:null,AbstractRecoilValue:zb,RecoilState:Wb,RecoilValueReadOnly:Hb,isRecoilValue:Gb});function Kb(t,e){return function*(){let n=0;for(const r of t)yield e(r,n++)}()}var qu=Kb;class EE{}const qb=new EE,Mi=new Map,Vm=new Map;function Yb(t){return qu(t,e=>Pe(Vm.get(e)))}function Qb(t){if(Mi.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function Jb(t){lo.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&Qb(t.key),Mi.set(t.key,t);const e=t.set==null?new Gs.RecoilValueReadOnly(t.key):new Gs.RecoilState(t.key);return Vm.set(t.key,e),e}class CE extends Error{}function Xb(t){const e=Mi.get(t);if(e==null)throw new CE(`Missing definition for RecoilValue: "${t}""`);return e}function Zb(t){return Mi.get(t)}const Yc=new Map;function eP(t){var e;if(!ye("recoil_memory_managament_2020"))return;const n=Mi.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var r;Mi.delete(t),(r=IE(t))===null||r===void 0||r(),Yc.delete(t)}}function tP(t,e){ye("recoil_memory_managament_2020")&&(e===void 0?Yc.delete(t):Yc.set(t,e))}function IE(t){return Yc.get(t)}var Vt={nodes:Mi,recoilValues:Vm,registerNode:Jb,getNode:Xb,getNodeMaybe:Zb,deleteNodeConfigIfPossible:eP,setConfigDeletionHandler:tP,getConfigDeletionHandler:IE,recoilValuesForKeys:Yb,NodeMissingError:CE,DefaultValue:EE,DEFAULT_VALUE:qb};function nP(t,e){e()}var rP={enqueueExecution:nP};function iP(t,e){return e={exports:{}},t(e,e.exports),e.exports}var sP=iP(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},n={},r=5,i=Math.pow(2,r),s=i-1,o=i/2,a=i/4,l={},c=function(w){return function(){return w}},d=n.hash=function(E){var w=typeof E>"u"?"undefined":e(E);if(w==="number")return E;w!=="string"&&(E+="");for(var N=0,D=0,M=E.length;D<M;++D){var B=E.charCodeAt(D);N=(N<<5)-N+B|0}return N},u=function(w){return w-=w>>1&1431655765,w=(w&858993459)+(w>>2&858993459),w=w+(w>>4)&252645135,w+=w>>8,w+=w>>16,w&127},h=function(w,N){return N>>>w&s},g=function(w){return 1<<w},m=function(w,N){return u(w&N-1)},y=function(w,N,D,M){var B=M;if(!w){var X=M.length;B=new Array(X);for(var Y=0;Y<X;++Y)B[Y]=M[Y]}return B[N]=D,B},T=function(w,N,D){var M=D.length-1,B=0,X=0,Y=D;if(w)B=X=N;else for(Y=new Array(M);B<N;)Y[X++]=D[B++];for(++B;B<=M;)Y[X++]=D[B++];return w&&(Y.length=M),Y},v=function(w,N,D,M){var B=M.length;if(w){for(var X=B;X>=N;)M[X--]=M[X];return M[N]=D,M}for(var Y=0,Q=0,se=new Array(B+1);Y<N;)se[Q++]=M[Y++];for(se[N]=D;Y<B;)se[++Q]=M[Y++];return se},f=1,_=2,I=3,R=4,A={__hamt_isEmpty:!0},x=function(w){return w===A||w&&w.__hamt_isEmpty},V=function(w,N,D,M){return{type:f,edit:w,hash:N,key:D,value:M,_modify:F}},ce=function(w,N,D){return{type:_,edit:w,hash:N,children:D,_modify:q}},z=function(w,N,D){return{type:I,edit:w,mask:N,children:D,_modify:U}},Re=function(w,N,D){return{type:R,edit:w,size:N,children:D,_modify:W}},en=function(w){return w===A||w.type===f||w.type===_},ge=function(w,N,D,M,B){for(var X=[],Y=M,Q=0,se=0;Y;++se)Y&1&&(X[se]=B[Q++]),Y>>>=1;return X[N]=D,Re(w,Q+1,X)},pt=function(w,N,D,M){for(var B=new Array(N-1),X=0,Y=0,Q=0,se=M.length;Q<se;++Q)if(Q!==D){var Ne=M[Q];Ne&&!x(Ne)&&(B[X++]=Ne,Y|=1<<Q)}return z(w,Y,B)},Qn=function E(w,N,D,M,B,X){if(D===B)return ce(w,D,[X,M]);var Y=h(N,D),Q=h(N,B);return z(w,g(Y)|g(Q),Y===Q?[E(w,N+r,D,M,B,X)]:Y<Q?[M,X]:[X,M])},mt=function(w,N,D,M,B,X,Y,Q){for(var se=B.length,Ne=0;Ne<se;++Ne){var kt=B[Ne];if(D(Y,kt.key)){var Ze=kt.value,nn=X(Ze);return nn===Ze?B:nn===l?(--Q.value,T(w,Ne,B)):y(w,Ne,V(N,M,Y,nn),B)}}var vn=X();return vn===l?B:(++Q.value,y(w,se,V(N,M,Y,vn),B))},$t=function(w,N){return w===N.edit},F=function(w,N,D,M,B,X,Y){if(N(X,this.key)){var Q=M(this.value);return Q===this.value?this:Q===l?(--Y.value,A):$t(w,this)?(this.value=Q,this):V(w,B,X,Q)}var se=M();return se===l?this:(++Y.value,Qn(w,D,this.hash,this,B,V(w,B,X,se)))},q=function(w,N,D,M,B,X,Y){if(B===this.hash){var Q=$t(w,this),se=mt(Q,w,N,this.hash,this.children,M,X,Y);return se===this.children?this:se.length>1?ce(w,this.hash,se):se[0]}var Ne=M();return Ne===l?this:(++Y.value,Qn(w,D,this.hash,this,B,V(w,B,X,Ne)))},U=function(w,N,D,M,B,X,Y){var Q=this.mask,se=this.children,Ne=h(D,B),kt=g(Ne),Ze=m(Q,kt),nn=Q&kt,vn=nn?se[Ze]:A,ss=vn._modify(w,N,D+r,M,B,X,Y);if(vn===ss)return this;var Ol=$t(w,this),wo=Q,So=void 0;if(nn&&x(ss)){if(wo&=~kt,!wo)return A;if(se.length<=2&&en(se[Ze^1]))return se[Ze^1];So=T(Ol,Ze,se)}else if(!nn&&!x(ss)){if(se.length>=o)return ge(w,Ne,ss,Q,se);wo|=kt,So=v(Ol,Ze,ss,se)}else So=y(Ol,Ze,ss,se);return Ol?(this.mask=wo,this.children=So,this):z(w,wo,So)},W=function(w,N,D,M,B,X,Y){var Q=this.size,se=this.children,Ne=h(D,B),kt=se[Ne],Ze=(kt||A)._modify(w,N,D+r,M,B,X,Y);if(kt===Ze)return this;var nn=$t(w,this),vn=void 0;if(x(kt)&&!x(Ze))++Q,vn=y(nn,Ne,Ze,se);else if(!x(kt)&&x(Ze)){if(--Q,Q<=a)return pt(w,Q,Ne,se);vn=y(nn,Ne,A,se)}else vn=y(nn,Ne,Ze,se);return nn?(this.size=Q,this.children=vn,this):Re(w,Q,vn)};A._modify=function(E,w,N,D,M,B,X){var Y=D();return Y===l?A:(++X.value,V(E,M,B,Y))};function S(E,w,N,D,M){this._editable=E,this._edit=w,this._config=N,this._root=D,this._size=M}S.prototype.setTree=function(E,w){return this._editable?(this._root=E,this._size=w,this):E===this._root?this:new S(this._editable,this._edit,this._config,E,w)};var L=n.tryGetHash=function(E,w,N,D){for(var M=D._root,B=0,X=D._config.keyEq;;)switch(M.type){case f:return X(N,M.key)?M.value:E;case _:{if(w===M.hash)for(var Y=M.children,Q=0,se=Y.length;Q<se;++Q){var Ne=Y[Q];if(X(N,Ne.key))return Ne.value}return E}case I:{var kt=h(B,w),Ze=g(kt);if(M.mask&Ze){M=M.children[m(M.mask,Ze)],B+=r;break}return E}case R:{if(M=M.children[h(B,w)],M){B+=r;break}return E}default:return E}};S.prototype.tryGetHash=function(E,w,N){return L(E,w,N,this)};var O=n.tryGet=function(E,w,N){return L(E,N._config.hash(w),w,N)};S.prototype.tryGet=function(E,w){return O(E,w,this)};var J=n.getHash=function(E,w,N){return L(void 0,E,w,N)};S.prototype.getHash=function(E,w){return J(E,w,this)},n.get=function(E,w){return L(void 0,w._config.hash(E),E,w)},S.prototype.get=function(E,w){return O(w,E,this)};var j=n.has=function(E,w,N){return L(l,E,w,N)!==l};S.prototype.hasHash=function(E,w){return j(E,w,this)};var te=n.has=function(E,w){return j(w._config.hash(E),E,w)};S.prototype.has=function(E){return te(E,this)};var ae=function(w,N){return w===N};n.make=function(E){return new S(0,0,{keyEq:E&&E.keyEq||ae,hash:E&&E.hash||d},A,0)},n.empty=n.make();var H=n.isEmpty=function(E){return E&&!!x(E._root)};S.prototype.isEmpty=function(){return H(this)};var ke=n.modifyHash=function(E,w,N,D){var M={value:D._size},B=D._root._modify(D._editable?D._edit:NaN,D._config.keyEq,0,E,w,N,M);return D.setTree(B,M.value)};S.prototype.modifyHash=function(E,w,N){return ke(N,E,w,this)};var Ge=n.modify=function(E,w,N){return ke(E,N._config.hash(w),w,N)};S.prototype.modify=function(E,w){return Ge(w,E,this)};var _e=n.setHash=function(E,w,N,D){return ke(c(N),E,w,D)};S.prototype.setHash=function(E,w,N){return _e(E,w,N,this)};var xe=n.set=function(E,w,N){return _e(N._config.hash(E),E,w,N)};S.prototype.set=function(E,w){return xe(E,w,this)};var _n=c(l),fi=n.removeHash=function(E,w,N){return ke(_n,E,w,N)};S.prototype.removeHash=S.prototype.deleteHash=function(E,w){return fi(E,w,this)};var tn=n.remove=function(E,w){return fi(w._config.hash(E),E,w)};S.prototype.remove=S.prototype.delete=function(E){return tn(E,this)};var Bt=n.beginMutation=function(E){return new S(E._editable+1,E._edit+1,E._config,E._root,E._size)};S.prototype.beginMutation=function(){return Bt(this)};var S_=n.endMutation=function(E){return E._editable=E._editable&&E._editable-1,E};S.prototype.endMutation=function(){return S_(this)};var PR=n.mutate=function(E,w){var N=Bt(w);return E(N),S_(N)};S.prototype.mutate=function(E){return PR(E,this)};var zd=function(w){return w&&E_(w[0],w[1],w[2],w[3],w[4])},E_=function(w,N,D,M,B){for(;D<w;){var X=N[D++];if(X&&!x(X))return C_(X,M,[w,N,D,M,B])}return zd(B)},C_=function(w,N,D){switch(w.type){case f:return{value:N(w),rest:D};case _:case R:case I:var M=w.children;return E_(M.length,M,0,N,D);default:return zd(D)}},AR={done:!0};function Wd(E){this.v=E}Wd.prototype.next=function(){if(!this.v)return AR;var E=this.v;return this.v=zd(E.rest),E},Wd.prototype[Symbol.iterator]=function(){return this};var Hd=function(w,N){return new Wd(C_(w._root,N))},xR=function(w){return[w.key,w.value]},LR=n.entries=function(E){return Hd(E,xR)};S.prototype.entries=S.prototype[Symbol.iterator]=function(){return LR(this)};var OR=function(w){return w.key},DR=n.keys=function(E){return Hd(E,OR)};S.prototype.keys=function(){return DR(this)};var MR=function(w){return w.value},FR=n.values=S.prototype.values=function(E){return Hd(E,MR)};S.prototype.values=function(){return FR(this)};var I_=n.fold=function(E,w,N){var D=N._root;if(D.type===f)return E(w,D.value,D.key);for(var M=[D.children],B=void 0;B=M.pop();)for(var X=0,Y=B.length;X<Y;){var Q=B[X++];Q&&Q.type&&(Q.type===f?w=E(w,Q.value,Q.key):M.push(Q.children))}return w};S.prototype.fold=function(E,w){return I_(E,w,this)};var UR=n.forEach=function(E,w){return I_(function(N,D,M){return E(D,M,w)},null,w)};S.prototype.forEach=function(E){return UR(E,this)};var VR=n.count=function(E){return E._size};S.prototype.count=function(){return VR(this)},Object.defineProperty(S.prototype,"size",{get:S.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class oP{constructor(e){ee(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return $m(this)}toMap(){return new Map(this._map)}}class jm{constructor(e){if(ee(this,"_hamt",sP.empty.beginMutation()),e instanceof jm){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,r]of e.entries())this._hamt.set(n,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return $m(this)}toMap(){return new Map(this._hamt)}}function $m(t){return ye("recoil_hamt_2020")?new jm(t):new oP(t)}var aP={persistentMap:$m},lP=aP.persistentMap,cP=Object.freeze({__proto__:null,persistentMap:lP});function uP(t,...e){const n=new Set;e:for(const r of t){for(const i of e)if(i.has(r))continue e;n.add(r)}return n}var aa=uP;function dP(t,e){const n=new Map;return t.forEach((r,i)=>{n.set(i,e(r,i))}),n}var Qc=dP;function hP(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function fP(t){return{nodeDeps:Qc(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:Qc(t.nodeToNodeSubscriptions,e=>new Set(e))}}function Eh(t,e,n,r){const{nodeDeps:i,nodeToNodeSubscriptions:s}=n,o=i.get(t);if(o&&r&&o!==r.nodeDeps.get(t))return;i.set(t,e);const a=o==null?e:aa(e,o);for(const l of a)s.has(l)||s.set(l,new Set),Pe(s.get(l)).add(t);if(o){const l=aa(o,e);for(const c of l){if(!s.has(c))return;const d=Pe(s.get(c));d.delete(t),d.size===0&&s.delete(c)}}}function pP(t,e,n,r){var i,s,o,a;const l=n.getState();r===l.currentTree.version||r===((i=l.nextTree)===null||i===void 0?void 0:i.version)||((s=l.previousTree)===null||s===void 0||s.version);const c=n.getGraph(r);if(Eh(t,e,c),r===((o=l.previousTree)===null||o===void 0?void 0:o.version)){const u=n.getGraph(l.currentTree.version);Eh(t,e,u,c)}if(r===((a=l.previousTree)===null||a===void 0?void 0:a.version)||r===l.currentTree.version){var d;const u=(d=l.nextTree)===null||d===void 0?void 0:d.version;if(u!==void 0){const h=n.getGraph(u);Eh(t,e,h,c)}}}var ul={cloneGraph:fP,graph:hP,saveDepsToStore:pP};let mP=0;const gP=()=>mP++;let _P=0;const vP=()=>_P++;let yP=0;const wP=()=>yP++;var Yu={getNextTreeStateVersion:gP,getNextStoreID:vP,getNextComponentID:wP};const{persistentMap:Wv}=cP,{graph:SP}=ul,{getNextTreeStateVersion:TE}=Yu;function RE(){const t=TE();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:Wv(),nonvalidatedAtoms:Wv()}}function EP(){const t=RE();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,SP()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var kE={makeEmptyTreeState:RE,makeEmptyStoreState:EP,getNextTreeStateVersion:TE};class NE{}function CP(){return new NE}var Qu={RetentionZone:NE,retentionZone:CP};function IP(t,e){const n=new Set(t);return n.add(e),n}function TP(t,e){const n=new Set(t);return n.delete(e),n}function RP(t,e,n){const r=new Map(t);return r.set(e,n),r}function kP(t,e,n){const r=new Map(t);return r.set(e,n(r.get(e))),r}function NP(t,e){const n=new Map(t);return n.delete(e),n}function bP(t,e){const n=new Map(t);return e.forEach(r=>n.delete(r)),n}var bE={setByAddingToSet:IP,setByDeletingFromSet:TP,mapBySettingInMap:RP,mapByUpdatingInMap:kP,mapByDeletingFromMap:NP,mapByDeletingMultipleFromMap:bP};function*PP(t,e){let n=0;for(const r of t)e(r,n++)&&(yield r)}var Bm=PP;function AP(t,e){return new Proxy(t,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var PE=AP;const{getNode:dl,getNodeMaybe:xP,recoilValuesForKeys:Hv}=Vt,{RetentionZone:Gv}=Qu,{setByAddingToSet:LP}=bE,OP=Object.freeze(new Set);class DP extends Error{}function MP(t,e,n){if(!ye("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=t.getState().retention;function i(s){let o=r.get(s);o||r.set(s,o=new Set),o.add(e)}if(n instanceof Gv)i(n);else if(Array.isArray(n))for(const s of n)i(s);return()=>{if(!ye("recoil_memory_managament_2020"))return;const{retention:s}=t.getState();function o(a){const l=s.nodesRetainedByZone.get(a);l==null||l.delete(e),l&&l.size===0&&s.nodesRetainedByZone.delete(a)}if(n instanceof Gv)o(n);else if(Array.isArray(n))for(const a of n)o(a)}}function zm(t,e,n,r){const i=t.getState();if(i.nodeCleanupFunctions.has(n))return;const s=dl(n),o=MP(t,n,s.retainedBy),a=s.init(t,e,r);i.nodeCleanupFunctions.set(n,()=>{a(),o()})}function FP(t,e,n){zm(t,t.getState().currentTree,e,n)}function UP(t,e){var n;const r=t.getState();(n=r.nodeCleanupFunctions.get(e))===null||n===void 0||n(),r.nodeCleanupFunctions.delete(e)}function VP(t,e,n){return zm(t,e,n,"get"),dl(n).get(t,e)}function AE(t,e,n){return dl(n).peek(t,e)}function jP(t,e,n){var r;const i=xP(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:LP(t.dirtyAtoms,e)}}function $P(t,e,n,r){const i=dl(n);if(i.set==null)throw new DP(`Attempt to set read-only RecoilValue: ${n}`);const s=i.set;return zm(t,e,n,"set"),s(t,e,r)}function BP(t,e,n){const r=t.getState(),i=t.getGraph(e.version),s=dl(n).nodeType;return PE({type:s},{loadable:()=>AE(t,e,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>s==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var o;return Hv((o=i.nodeDeps.get(n))!==null&&o!==void 0?o:[])},subscribers:()=>{var o,a;return{nodes:Hv(Bm(xE(t,e,new Set([n])),l=>l!==n)),components:qu((o=(a=r.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[],([l])=>({name:l}))}}})}function xE(t,e,n){const r=new Set,i=Array.from(n),s=t.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var o;r.add(a);const l=(o=s.nodeToNodeSubscriptions.get(a))!==null&&o!==void 0?o:OP;for(const c of l)r.has(c)||i.push(c)}return r}var li={getNodeLoadable:VP,peekNodeLoadable:AE,setNodeValue:$P,initializeNode:FP,cleanUpNode:UP,setUnvalidatedAtomValue_DEPRECATED:jP,peekNodeInfo:BP,getDownstreamNodes:xE};let LE=null;function zP(t){LE=t}function WP(){var t;(t=LE)===null||t===void 0||t()}var OE={setInvalidateMemoizedSnapshot:zP,invalidateMemoizedSnapshot:WP};const{getDownstreamNodes:HP,getNodeLoadable:DE,setNodeValue:GP}=li,{getNextComponentID:KP}=Yu,{getNode:qP,getNodeMaybe:ME}=Vt,{DefaultValue:Wm}=Vt,{reactMode:YP}=cl,{AbstractRecoilValue:QP,RecoilState:JP,RecoilValueReadOnly:XP,isRecoilValue:ZP}=Gs,{invalidateMemoizedSnapshot:eA}=OE;function tA(t,{key:e},n=t.getState().currentTree){var r,i;const s=t.getState();n.version===s.currentTree.version||n.version===((r=s.nextTree)===null||r===void 0?void 0:r.version)||(n.version,(i=s.previousTree)===null||i===void 0||i.version);const o=DE(t,n,e);return o.state==="loading"&&o.contents.catch(()=>{}),o}function nA(t,e){const n=t.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof Wm?n.delete(i):n.set(i,r)}),n}function rA(t,e,{key:n},r){if(typeof r=="function"){const i=DE(t,e,n);if(i.state==="loading"){const s=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw ne(s)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function iA(t,e,n){if(n.type==="set"){const{recoilValue:i,valueOrUpdater:s}=n,o=rA(t,e,i,s),a=GP(t,e,i.key,o);for(const[l,c]of a.entries())qf(e,l,c)}else if(n.type==="setLoadable"){const{recoilValue:{key:i},loadable:s}=n;qf(e,i,s)}else if(n.type==="markModified"){const{recoilValue:{key:i}}=n;e.dirtyAtoms.add(i)}else if(n.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:s}=n,o=ME(i);o==null||(r=o.invalidate)===null||r===void 0||r.call(o,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,s),e.dirtyAtoms.add(i)}else Fm(`Unknown action ${n.type}`)}function qf(t,e,n){n.state==="hasValue"&&n.contents instanceof Wm?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function FE(t,e){t.replaceState(n=>{const r=UE(n);for(const i of e)iA(t,r,i);return VE(t,r),eA(),r})}function Ju(t,e){if(la.length){const n=la[la.length-1];let r=n.get(t);r||n.set(t,r=[]),r.push(e)}else FE(t,[e])}const la=[];function sA(){const t=new Map;return la.push(t),()=>{for(const[e,n]of t)FE(e,n);la.pop()}}function UE(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function VE(t,e){const n=HP(t,e,e.dirtyAtoms);for(const s of n){var r,i;(r=ME(s))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function jE(t,e,n){Ju(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function oA(t,e,n){if(n instanceof Wm)return jE(t,e,n);Ju(t,{type:"setLoadable",recoilValue:e,loadable:n})}function aA(t,e){Ju(t,{type:"markModified",recoilValue:e})}function lA(t,e,n){Ju(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function cA(t,{key:e},n,r=null){const i=KP(),s=t.getState();s.nodeToComponentSubscriptions.has(e)||s.nodeToComponentSubscriptions.set(e,new Map),Pe(s.nodeToComponentSubscriptions.get(e)).set(i,[r??"<not captured>",n]);const o=YP();if(o.early&&(o.mode==="LEGACY"||o.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),l=a.nodeToComponentSubscriptions.get(e);l===void 0||!l.has(i)||(l.delete(i),l.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function uA(t,e){var n;const{currentTree:r}=t.getState(),i=qP(e.key);(n=i.clearCache)===null||n===void 0||n.call(i,t,r)}var qn={RecoilValueReadOnly:XP,AbstractRecoilValue:QP,RecoilState:JP,getRecoilValueAsLoadable:tA,setRecoilValue:jE,setRecoilValueLoadable:oA,markRecoilValueModified:aA,setUnvalidatedRecoilValue:lA,subscribeToRecoilValue:cA,isRecoilValue:ZP,applyAtomValueWrites:nA,batchStart:sA,writeLoadableToTreeState:qf,invalidateDownstreams:VE,copyTreeState:UE,refreshRecoilValue:uA};function dA(t,e,n){const r=t.entries();let i=r.next();for(;!i.done;){const s=i.value;if(e.call(n,s[1],s[0],t))return!0;i=r.next()}return!1}var hA=dA;const{cleanUpNode:fA}=li,{deleteNodeConfigIfPossible:pA,getNode:$E}=Vt,{RetentionZone:BE}=Qu,mA=12e4,zE=new Set;function WE(t,e){const n=t.getState(),r=n.currentTree;if(n.nextTree)return;const i=new Set;for(const o of e)if(o instanceof BE)for(const a of yA(n,o))i.add(a);else i.add(o);const s=gA(t,i);for(const o of s)vA(t,r,o)}function gA(t,e){const n=t.getState(),r=n.currentTree,i=t.getGraph(r.version),s=new Set,o=new Set;return a(e),s;function a(l){const c=new Set,d=_A(t,r,l,s,o);for(const m of d){var u;if($E(m).retainedBy==="recoilRoot"){o.add(m);continue}if(((u=n.retention.referenceCounts.get(m))!==null&&u!==void 0?u:0)>0){o.add(m);continue}if(HE(m).some(T=>n.retention.referenceCounts.get(T))){o.add(m);continue}const y=i.nodeToNodeSubscriptions.get(m);if(y&&hA(y,T=>o.has(T))){o.add(m);continue}s.add(m),c.add(m)}const h=new Set;for(const m of c)for(const y of(g=i.nodeDeps.get(m))!==null&&g!==void 0?g:zE){var g;s.has(y)||h.add(y)}h.size&&a(h)}}function _A(t,e,n,r,i){const s=t.getGraph(e.version),o=[],a=new Set;for(;n.size>0;)l(Pe(n.values().next().value));return o;function l(c){if(r.has(c)||i.has(c)){n.delete(c);return}if(a.has(c))return;const d=s.nodeToNodeSubscriptions.get(c);if(d)for(const u of d)l(u);a.add(c),n.delete(c),o.push(c)}}function vA(t,e,n){if(!ye("recoil_memory_managament_2020"))return;fA(t,n);const r=t.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=HE(n);for(const l of i){var s;(s=r.retention.nodesRetainedByZone.get(l))===null||s===void 0||s.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const o=r.graphsByVersion.get(e.version);if(o){const l=o.nodeDeps.get(n);if(l!==void 0){o.nodeDeps.delete(n);for(const c of l){var a;(a=o.nodeToNodeSubscriptions.get(c))===null||a===void 0||a.delete(n)}}o.nodeToNodeSubscriptions.delete(n)}pA(n)}function yA(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:zE}function HE(t){const e=$E(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof BE?[e]:e}function wA(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):WE(t,new Set([e]))}function SA(t,e,n){var r;if(!ye("recoil_memory_managament_2020"))return;const i=t.getState().retention.referenceCounts,s=((r=i.get(e))!==null&&r!==void 0?r:0)+n;s===0?GE(t,e):i.set(e,s)}function GE(t,e){if(!ye("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),wA(t,e)}function EA(t){if(!ye("recoil_memory_managament_2020"))return;const e=t.getState();WE(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function CA(t){return t===void 0?"recoilRoot":t}var Qi={SUSPENSE_TIMEOUT_MS:mA,updateRetainCount:SA,updateRetainCountToZero:GE,releaseScheduledRetainablesNow:EA,retainedByOptionWithDefault:CA};const{unstable_batchedUpdates:IA}=xm;var TA={unstable_batchedUpdates:IA};const{unstable_batchedUpdates:RA}=TA;var kA={unstable_batchedUpdates:RA};const{batchStart:NA}=qn,{unstable_batchedUpdates:bA}=kA;let Hm=bA||(t=>t());const PA=t=>{Hm=t},AA=()=>Hm,xA=t=>{Hm(()=>{let e=()=>{};try{e=NA(),t()}finally{e()}})};var Xu={getBatcher:AA,setBatcher:PA,batchUpdates:xA};function*LA(t){for(const e of t)for(const n of e)yield n}var KE=LA;const qE=typeof Window>"u"||typeof window>"u",OA=t=>!qE&&(t===window||t instanceof Window),DA=typeof navigator<"u"&&navigator.product==="ReactNative";var Zu={isSSR:qE,isReactNative:DA,isWindow:OA};function MA(t,e){let n;return(...r)=>{n||(n={});const i=e(...r);return Object.hasOwnProperty.call(n,i)||(n[i]=t(...r)),n[i]}}function FA(t,e){let n,r;return(...i)=>{const s=e(...i);return n===s||(n=s,r=t(...i)),r}}function UA(t,e){let n,r;return[(...o)=>{const a=e(...o);return n===a||(n=a,r=t(...o)),r},()=>{n=null}]}var VA={memoizeWithArgsHash:MA,memoizeOneWithArgsHash:FA,memoizeOneWithArgsHashAndInvalidation:UA};const{batchUpdates:Yf}=Xu,{initializeNode:jA,peekNodeInfo:$A}=li,{graph:BA}=ul,{getNextStoreID:zA}=Yu,{DEFAULT_VALUE:WA,recoilValues:Kv,recoilValuesForKeys:qv}=Vt,{AbstractRecoilValue:HA,getRecoilValueAsLoadable:GA,setRecoilValue:Yv,setUnvalidatedRecoilValue:KA}=qn,{updateRetainCount:vc}=Qi,{setInvalidateMemoizedSnapshot:qA}=OE,{getNextTreeStateVersion:YA,makeEmptyStoreState:QA}=kE,{isSSR:JA}=Zu,{memoizeOneWithArgsHashAndInvalidation:XA}=VA;class ed{constructor(e,n){ee(this,"_store",void 0),ee(this,"_refCount",1),ee(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),GA(this._store,r))),ee(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),ee(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const o=this._store.getState().currentTree;return qv(o.dirtyAtoms)}const i=this._store.getState().knownAtoms,s=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?Kv.values():r.isInitialized===!0?qv(KE([i,s])):Bm(Kv.values(),({key:o})=>!i.has(o)&&!s.has(o))}),ee(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),$A(this._store,this._store.getState().currentTree,r))),ee(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new Qf(this,Yf);return r(i),i}),ee(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new Qf(this,Yf);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:zA(),parentStoreID:n,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return Pe(i.get(r));const s=BA();return i.set(r,s),s},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw ne("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)jA(this._store,r,"get"),vc(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){JA||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!ye("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){ye("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function YE(t,e,n=!1){const r=t.getState(),i=n?YA():e.version;return{currentTree:{version:n?i:e.version,stateID:n?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(qu(r.nodeCleanupFunctions.entries(),([s])=>[s,()=>{}]))}}function ZA(t){const e=new ed(QA());return t!=null?e.map(t):e}const[Qv,QE]=XA((t,e)=>{var n;const r=t.getState(),i=e==="latest"?(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree:Pe(r.previousTree);return new ed(YE(t,i),t.storeID)},(t,e)=>{var n,r;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((r=t.getState().previousTree)===null||r===void 0?void 0:r.version)});qA(QE);function e2(t,e="latest"){const n=Qv(t,e);return n.isRetained()?n:(QE(),Qv(t,e))}class Qf extends ed{constructor(e,n){super(YE(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),ee(this,"_batch",void 0),ee(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{vc(s,r.key,1),Yv(this.getStore_INTERNAL(),r,i)})}),ee(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{vc(i,r.key,1),Yv(this.getStore_INTERNAL(),r,WA)})}),ee(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();Yf(()=>{for(const[s,o]of r.entries())vc(i,s,1),KA(i,new HA(s),o)})}),this._batch=n}}var td={Snapshot:ed,MutableSnapshot:Qf,freshSnapshot:ZA,cloneSnapshot:e2},t2=td.Snapshot,n2=td.MutableSnapshot,r2=td.freshSnapshot,i2=td.cloneSnapshot,nd=Object.freeze({__proto__:null,Snapshot:t2,MutableSnapshot:n2,freshSnapshot:r2,cloneSnapshot:i2});function s2(...t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}var o2=s2;const{useRef:a2}=he;function l2(t){const e=a2(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var Jv=l2;const{getNextTreeStateVersion:c2,makeEmptyStoreState:JE}=kE,{cleanUpNode:u2,getDownstreamNodes:d2,initializeNode:h2,setNodeValue:f2,setUnvalidatedAtomValue_DEPRECATED:p2}=li,{graph:m2}=ul,{cloneGraph:g2}=ul,{getNextStoreID:XE}=Yu,{createMutableSource:Ch,reactMode:ZE}=cl,{applyAtomValueWrites:_2}=qn,{releaseScheduledRetainablesNow:eC}=Qi,{freshSnapshot:v2}=nd,{useCallback:y2,useContext:tC,useEffect:Jf,useMemo:w2,useRef:S2,useState:E2}=he;function Po(){throw ne("This component must be used inside a <RecoilRoot> component.")}const nC=Object.freeze({storeID:XE(),getState:Po,replaceState:Po,getGraph:Po,subscribeToTransactions:Po,addTransactionMetadata:Po});let Xf=!1;function Xv(t){if(Xf)throw ne("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){ye("recoil_memory_managament_2020")&&ye("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&eC(t);const n=e.currentTree.version,r=c2();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,g2(Pe(e.graphsByVersion.get(n))))}}const rC=he.createContext({current:nC}),rd=()=>tC(rC),iC=he.createContext(null);function C2(){return tC(iC)}function Gm(t,e,n){const r=d2(t,n,n.dirtyAtoms);for(const i of r){const s=e.nodeToComponentSubscriptions.get(i);if(s)for(const[o,[a,l]]of s)l(n)}}function sC(t){const e=t.getState(),n=e.currentTree,r=n.dirtyAtoms;if(r.size){for(const[i,s]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[o,a]of s)a(t);for(const[i,s]of e.transactionSubscriptions)s(t);(!ZE().early||e.suspendedComponentResolvers.size>0)&&(Gm(t,e,n),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function I2(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,sC(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):Fm("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,ye("recoil_memory_managament_2020")&&n==null&&eC(t)}finally{e.commitDepth--}}function T2({setNotifyBatcherOfChange:t}){const e=rd(),[,n]=E2([]);return t(()=>n({})),Jf(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),Jf(()=>{rP.enqueueExecution("Batcher",()=>{I2(e.current)})}),null}function R2(t,e){const n=JE();return e({set:(r,i)=>{const s=n.currentTree,o=f2(t,s,r.key,i),a=new Set(o.keys()),l=s.nonvalidatedAtoms.clone();for(const c of a)l.delete(c);n.currentTree={...s,dirtyAtoms:o2(s.dirtyAtoms,a),atomValues:_2(s.atomValues,o),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:r=>{r.forEach((i,s)=>{n.currentTree=p2(n.currentTree,s,i)})}}),n}function k2(t){const e=v2(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(r=>r()),n.nodeCleanupFunctions.clear(),n}let Zv=0;function N2({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:r}){let i;const s=g=>{const m=i.current.graphsByVersion;if(m.has(g))return Pe(m.get(g));const y=m2();return m.set(g,y),y},o=(g,m)=>{if(m==null){const{transactionSubscriptions:y}=u.current.getState(),T=Zv++;return y.set(T,g),{release:()=>{y.delete(T)}}}else{const{nodeTransactionSubscriptions:y}=u.current.getState();y.has(m)||y.set(m,new Map);const T=Zv++;return Pe(y.get(m)).set(T,g),{release:()=>{const v=y.get(m);v&&(v.delete(T),v.size===0&&y.delete(m))}}}},a=g=>{Xv(u.current);for(const m of Object.keys(g))Pe(u.current.getState().nextTree).transactionMetadata[m]=g[m]},l=g=>{Xv(u.current);const m=Pe(i.current.nextTree);let y;try{Xf=!0,y=g(m)}finally{Xf=!1}y!==m&&(i.current.nextTree=y,ZE().early&&Gm(u.current,i.current,y),Pe(c.current)())},c=S2(null),d=y2(g=>{c.current=g},[c]),u=Jv(()=>n??{storeID:XE(),getState:()=>i.current,replaceState:l,getGraph:s,subscribeToTransactions:o,addTransactionMetadata:a});n!=null&&(u.current=n),i=Jv(()=>t!=null?R2(u.current,t):e!=null?k2(e):JE());const h=w2(()=>Ch==null?void 0:Ch(i,()=>i.current.currentTree.version),[i]);return Jf(()=>{const g=u.current;for(const m of new Set(g.getState().knownAtoms))h2(g,m,"get");return()=>{for(const m of g.getState().knownAtoms)u2(g,m)}},[u]),he.createElement(rC.Provider,{value:u},he.createElement(iC.Provider,{value:h},he.createElement(T2,{setNotifyBatcherOfChange:d}),r))}function b2(t){const{override:e,...n}=t,r=rd();return e===!1&&r.current!==nC?t.children:he.createElement(N2,n)}function P2(){return rd().current.storeID}var vr={RecoilRoot:b2,useStoreRef:rd,useRecoilMutableSource:C2,useRecoilStoreID:P2,notifyComponents_FOR_TESTING:Gm,sendEndOfBatchNotifications_FOR_TESTING:sC};function A2(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}var x2=A2;const{useEffect:L2,useRef:O2}=he;function D2(t){const e=O2();return L2(()=>{e.current=t}),e.current}var oC=D2;const{useStoreRef:M2}=vr,{SUSPENSE_TIMEOUT_MS:F2}=Qi,{updateRetainCount:Ao}=Qi,{RetentionZone:U2}=Qu,{useEffect:V2,useRef:j2}=he,{isSSR:ey}=Zu;function $2(t){if(ye("recoil_memory_managament_2020"))return B2(t)}function B2(t){const n=(Array.isArray(t)?t:[t]).map(o=>o instanceof U2?o:o.key),r=M2();V2(()=>{if(!ye("recoil_memory_managament_2020"))return;const o=r.current;if(i.current&&!ey)window.clearTimeout(i.current),i.current=null;else for(const a of n)Ao(o,a,1);return()=>{for(const a of n)Ao(o,a,-1)}},[r,...n]);const i=j2(),s=oC(n);if(!ey&&(s===void 0||!x2(s,n))){const o=r.current;for(const a of n)Ao(o,a,1);if(s)for(const a of s)Ao(o,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of n)Ao(o,a,-1)},F2)}}var Km=$2;function z2(){return"<component name not available>"}var hl=z2;const{batchUpdates:W2}=Xu,{DEFAULT_VALUE:aC}=Vt,{currentRendererSupportsUseSyncExternalStore:H2,reactMode:co,useMutableSource:G2,useSyncExternalStore:K2}=cl,{useRecoilMutableSource:q2,useStoreRef:Yn}=vr,{AbstractRecoilValue:Zf,getRecoilValueAsLoadable:fl,setRecoilValue:Jc,setUnvalidatedRecoilValue:Y2,subscribeToRecoilValue:Ks}=qn,{useCallback:Mt,useEffect:qs,useMemo:lC,useRef:ca,useState:qm}=he,{setByAddingToSet:Q2}=bE,{isSSR:J2}=Zu;function Ym(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{const s=n.current.getState().suspendedComponentResolvers;s.add(i),J2&&Ie(t.contents)&&t.contents.finally(()=>{s.delete(i)})}):t.state==="hasError"?t.contents:ne(`Invalid value of loadable atom "${e.key}"`)}function X2(){const t=hl(),e=Yn(),[,n]=qm([]),r=ca(new Set);r.current=new Set;const i=ca(new Set),s=ca(new Map),o=Mt(l=>{const c=s.current.get(l);c&&(c.release(),s.current.delete(l))},[s]),a=Mt((l,c)=>{s.current.has(c)&&n([])},[]);return qs(()=>{const l=e.current;aa(r.current,i.current).forEach(c=>{if(s.current.has(c))return;const d=Ks(l,new Zf(c),h=>a(h,c),t);s.current.set(c,d),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(l.getState(),c)}):a(l.getState(),c)}),aa(i.current,r.current).forEach(c=>{o(c)}),i.current=r.current}),qs(()=>{const l=s.current;return aa(r.current,new Set(l.keys())).forEach(c=>{const d=Ks(e.current,new Zf(c),u=>a(u,c),t);l.set(c,d)}),()=>l.forEach((c,d)=>o(d))},[t,e,o,a]),lC(()=>{function l(m){return y=>{Jc(e.current,m,y)}}function c(m){return()=>Jc(e.current,m,aC)}function d(m){var y;r.current.has(m.key)||(r.current=Q2(r.current,m.key));const T=e.current.getState();return fl(e.current,m,co().early&&(y=T.nextTree)!==null&&y!==void 0?y:T.currentTree)}function u(m){const y=d(m);return Ym(y,m,e)}function h(m){return[u(m),l(m)]}function g(m){return[d(m),l(m)]}return{getRecoilValue:u,getRecoilValueLoadable:d,getRecoilState:h,getRecoilStateLoadable:g,getSetRecoilState:l,getResetRecoilState:c}},[r,e])}const Z2={current:0};function ex(t){const e=Yn(),n=hl(),r=Mt(()=>{var a;const l=e.current,c=l.getState(),d=co().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return{loadable:fl(l,t,d),key:t.key}},[e,t]),i=Mt(a=>{let l;return()=>{var c,d;const u=a();return(c=l)!==null&&c!==void 0&&c.loadable.is(u.loadable)&&((d=l)===null||d===void 0?void 0:d.key)===u.key?l:(l=u,u)}},[]),s=lC(()=>i(r),[r,i]),o=Mt(a=>{const l=e.current;return Ks(l,t,a,n).release},[e,t,n]);return K2(o,s,s).loadable}function tx(t){const e=Yn(),n=Mt(()=>{var c;const d=e.current,u=d.getState(),h=co().early&&(c=u.nextTree)!==null&&c!==void 0?c:u.currentTree;return fl(d,t,h)},[e,t]),r=Mt(()=>n(),[n]),i=hl(),s=Mt((c,d)=>{const u=e.current;return Ks(u,t,()=>{if(!ye("recoil_suppress_rerender_in_callback"))return d();const g=n();l.current.is(g)||d(),l.current=g},i).release},[e,t,i,n]),o=q2();if(o==null)throw ne("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=G2(o,r,s),l=ca(a);return qs(()=>{l.current=a}),a}function ep(t){const e=Yn(),n=hl(),r=Mt(()=>{var l;const c=e.current,d=c.getState(),u=co().early&&(l=d.nextTree)!==null&&l!==void 0?l:d.currentTree;return fl(c,t,u)},[e,t]),i=Mt(()=>({loadable:r(),key:t.key}),[r,t.key]),s=Mt(l=>{const c=i();return l.loadable.is(c.loadable)&&l.key===c.key?l:c},[i]);qs(()=>{const l=Ks(e.current,t,c=>{a(s)},n);return a(s),l.release},[n,t,e,s]);const[o,a]=qm(i);return o.key!==t.key?i().loadable:o.loadable}function nx(t){const e=Yn(),[,n]=qm([]),r=hl(),i=Mt(()=>{var a;const l=e.current,c=l.getState(),d=co().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return fl(l,t,d)},[e,t]),s=i(),o=ca(s);return qs(()=>{o.current=s}),qs(()=>{const a=e.current,l=a.getState(),c=Ks(a,t,u=>{var h;if(!ye("recoil_suppress_rerender_in_callback"))return n([]);const g=i();(h=o.current)!==null&&h!==void 0&&h.is(g)||n(g),o.current=g},r);if(l.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{o.current=null,n([])});else{var d;if(!ye("recoil_suppress_rerender_in_callback"))return n([]);const u=i();(d=o.current)!==null&&d!==void 0&&d.is(u)||n(u),o.current=u}return c.release},[r,i,t,e]),s}function Qm(t){return ye("recoil_memory_managament_2020")&&Km(t),{TRANSITION_SUPPORT:ep,SYNC_EXTERNAL_STORE:H2()?ex:ep,MUTABLE_SOURCE:tx,LEGACY:nx}[co().mode](t)}function cC(t){const e=Yn(),n=Qm(t);return Ym(n,t,e)}function id(t){const e=Yn();return Mt(n=>{Jc(e.current,t,n)},[e,t])}function rx(t){const e=Yn();return Mt(()=>{Jc(e.current,t,aC)},[e,t])}function ix(t){return[cC(t),id(t)]}function sx(t){return[Qm(t),id(t)]}function ox(){const t=Yn();return(e,n={})=>{W2(()=>{t.current.addTransactionMetadata(n),e.forEach((r,i)=>Y2(t.current,new Zf(i),r))})}}function uC(t){return ye("recoil_memory_managament_2020")&&Km(t),ep(t)}function dC(t){const e=Yn(),n=uC(t);return Ym(n,t,e)}function ax(t){return[dC(t),id(t)]}var lx={recoilComponentGetRecoilValueCount_FOR_TESTING:Z2,useRecoilInterface:X2,useRecoilState:ix,useRecoilStateLoadable:sx,useRecoilValue:cC,useRecoilValueLoadable:Qm,useResetRecoilState:rx,useSetRecoilState:id,useSetUnvalidatedAtomValues:ox,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:uC,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:dC,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:ax};function cx(t,e){const n=new Map;for(const[r,i]of t)e(i,r)&&n.set(r,i);return n}var ux=cx;function dx(t,e){const n=new Set;for(const r of t)e(r)&&n.add(r);return n}var hx=dx;function fx(...t){const e=new Map;for(let n=0;n<t.length;n++){const r=t[n].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,t[n].get(i.value))}return e}var px=fx;const{batchUpdates:mx}=Xu,{DEFAULT_VALUE:gx,getNode:hC,nodes:_x}=Vt,{useStoreRef:Jm}=vr,{AbstractRecoilValue:vx,setRecoilValueLoadable:yx}=qn,{SUSPENSE_TIMEOUT_MS:wx}=Qi,{cloneSnapshot:Xc}=nd,{useCallback:sd,useEffect:fC,useRef:ty,useState:Sx}=he,{isSSR:ny}=Zu;function od(t){const e=Jm();fC(()=>e.current.subscribeToTransactions(t).release,[t,e])}function ry(t){const e=t.atomValues.toMap(),n=Qc(ux(e,(r,i)=>{const o=hC(i).persistence_UNSTABLE;return o!=null&&o.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return px(t.nonvalidatedAtoms.toMap(),n)}function Ex(t){od(sd(e=>{let n=e.getState().previousTree;const r=e.getState().currentTree;n||(n=e.getState().currentTree);const i=ry(r),s=ry(n),o=Qc(_x,l=>{var c,d,u,h;return{persistence_UNSTABLE:{type:(c=(d=l.persistence_UNSTABLE)===null||d===void 0?void 0:d.type)!==null&&c!==void 0?c:"none",backButton:(u=(h=l.persistence_UNSTABLE)===null||h===void 0?void 0:h.backButton)!==null&&u!==void 0?u:!1}}}),a=hx(r.dirtyAtoms,l=>i.has(l)||s.has(l));t({atomValues:i,previousAtomValues:s,atomInfo:o,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[t]))}function Cx(t){od(sd(e=>{const n=Xc(e,"latest"),r=Xc(e,"previous");t({snapshot:n,previousSnapshot:r})},[t]))}function Ix(){const t=Jm(),[e,n]=Sx(()=>Xc(t.current)),r=oC(e),i=ty(),s=ty();if(od(sd(a=>n(Xc(a)),[])),fC(()=>{const a=e.retain();if(i.current&&!ny){var l;window.clearTimeout(i.current),i.current=null,(l=s.current)===null||l===void 0||l.call(s),s.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!ny){if(i.current){var o;window.clearTimeout(i.current),i.current=null,(o=s.current)===null||o===void 0||o.call(s),s.current=null}s.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=s.current)===null||a===void 0||a.call(s),s.current=null},wx)}return e}function pC(t,e){var n;const r=t.getState(),i=(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree,s=e.getStore_INTERNAL().getState().currentTree;mx(()=>{const o=new Set;for(const c of[i.atomValues.keys(),s.atomValues.keys()])for(const d of c){var a,l;((a=i.atomValues.get(d))===null||a===void 0?void 0:a.contents)!==((l=s.atomValues.get(d))===null||l===void 0?void 0:l.contents)&&hC(d).shouldRestoreFromSnapshots&&o.add(d)}o.forEach(c=>{yx(t,new vx(c),s.atomValues.has(c)?Pe(s.atomValues.get(c)):gx)}),t.replaceState(c=>({...c,stateID:e.getID()}))})}function Tx(){const t=Jm();return sd(e=>pC(t.current,e),[t])}var mC={useRecoilSnapshot:Ix,gotoSnapshot:pC,useGotoRecoilSnapshot:Tx,useRecoilTransactionObserver:Cx,useTransactionObservation_DEPRECATED:Ex,useTransactionSubscription_DEPRECATED:od};const{peekNodeInfo:Rx}=li,{useStoreRef:kx}=vr;function Nx(){const t=kx();return({key:e})=>Rx(t.current,t.current.getState().currentTree,e)}var bx=Nx;const{reactMode:Px}=cl,{RecoilRoot:Ax,useStoreRef:xx}=vr,{useMemo:Lx}=he;function Ox(){Px().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=xx().current;return Lx(()=>{function e({children:n}){return he.createElement(Ax,{store_INTERNAL:t},n)}return e},[t])}var Dx=Ox;const{loadableWithValue:Mx}=ll,{initializeNode:Fx}=li,{DEFAULT_VALUE:Ux,getNode:Vx}=Vt,{copyTreeState:jx,getRecoilValueAsLoadable:$x,invalidateDownstreams:Bx,writeLoadableToTreeState:zx}=qn;function iy(t){return Vx(t.key).nodeType==="atom"}class Wx{constructor(e,n){ee(this,"_store",void 0),ee(this,"_treeState",void 0),ee(this,"_changes",void 0),ee(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!iy(r))throw ne("Reading selectors within atomicUpdate is not supported");const i=$x(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:ne(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),ee(this,"set",(r,i)=>{if(!iy(r))throw ne("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const s=this.get(r);this._changes.set(r.key,i(s))}else Fx(this._store,r.key,"set"),this._changes.set(r.key,i)}),ee(this,"reset",r=>{this.set(r,Ux)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=jx(this._treeState);for(const[n,r]of this._changes)zx(e,n,Mx(r));return Bx(this._store,e),e}}function Hx(t){return e=>{t.replaceState(n=>{const r=new Wx(t,n);return e(r),r.newTreeState_INTERNAL()})}}var Gx={atomicUpdater:Hx},Kx=Gx.atomicUpdater,gC=Object.freeze({__proto__:null,atomicUpdater:Kx});function qx(t,e){if(!t)throw new Error(e)}var Yx=qx,Yo=Yx;const{atomicUpdater:Qx}=gC,{batchUpdates:Jx}=Xu,{DEFAULT_VALUE:Xx}=Vt,{useStoreRef:Zx}=vr,{refreshRecoilValue:eL,setRecoilValue:sy}=qn,{cloneSnapshot:tL}=nd,{gotoSnapshot:nL}=mC,{useCallback:rL}=he;class _C{}const iL=new _C;function vC(t,e,n,r){let i=iL,s;if(Jx(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw ne(a);const l=PE({...r??{},set:(d,u)=>sy(t,d,u),reset:d=>sy(t,d,Xx),refresh:d=>eL(t,d),gotoSnapshot:d=>nL(t,d),transact_UNSTABLE:d=>Qx(t)(d)},{snapshot:()=>{const d=tL(t);return s=d.retain(),d}}),c=e(l);if(typeof c!="function")throw ne(a);i=c(...n)}),i instanceof _C&&Yo(!1),Ie(i))i=i.finally(()=>{var a;(a=s)===null||a===void 0||a()});else{var o;(o=s)===null||o===void 0||o()}return i}function sL(t,e){const n=Zx();return rL((...r)=>vC(n.current,t,r),e!=null?[...e,n]:void 0)}var yC={recoilCallback:vC,useRecoilCallback:sL};const{useStoreRef:oL}=vr,{refreshRecoilValue:aL}=qn,{useCallback:lL}=he;function cL(t){const e=oL();return lL(()=>{const n=e.current;aL(n,t)},[t,e])}var uL=cL;const{atomicUpdater:dL}=gC,{useStoreRef:hL}=vr,{useMemo:fL}=he;function pL(t,e){const n=hL();return fL(()=>(...r)=>{dL(n.current)(s=>{t(s)(...r)})},e!=null?[...e,n]:void 0)}var mL=pL;class gL{constructor(e){ee(this,"value",void 0),this.value=e}}var _L={WrappedValue:gL},vL=_L.WrappedValue,wC=Object.freeze({__proto__:null,WrappedValue:vL});const{isFastRefreshEnabled:yL}=cl;class oy extends Error{}class wL{constructor(e){var n,r,i;ee(this,"_name",void 0),ee(this,"_numLeafs",void 0),ee(this,"_root",void 0),ee(this,"_onHit",void 0),ee(this,"_onSet",void 0),ee(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:s=>s}size(){return this._numLeafs}root(){return this._root}get(e,n){var r;return(r=this.getLeafNode(e,n))===null||r===void 0?void 0:r.value}getLeafNode(e,n){if(this._root==null)return;let r=this._root;for(;r;){if(n==null||n.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,n,r){const i=()=>{var s,o,a,l;let c,d;for(const[T,v]of e){var u,h,g;const f=this._root;if((f==null?void 0:f.type)==="leaf")throw this.invalidCacheError();const _=c;if(c=_?_.branches.get(d):f,c=(u=c)!==null&&u!==void 0?u:{type:"branch",nodeKey:T,parent:_,branches:new Map,branchKey:d},c.type!=="branch"||c.nodeKey!==T)throw this.invalidCacheError();_==null||_.branches.set(d,c),r==null||(h=r.onNodeVisit)===null||h===void 0||h.call(r,c),d=this._mapNodeValue(v),this._root=(g=this._root)!==null&&g!==void 0?g:c}const m=c?(s=c)===null||s===void 0?void 0:s.branches.get(d):this._root;if(m!=null&&(m.type!=="leaf"||m.branchKey!==d))throw this.invalidCacheError();const y={type:"leaf",value:n,parent:c,branchKey:d};(o=c)===null||o===void 0||o.branches.set(d,y),this._root=(a=this._root)!==null&&a!==void 0?a:y,this._numLeafs++,this._onSet(y),r==null||(l=r.onNodeVisit)===null||l===void 0||l.call(r,y)};try{i()}catch(s){if(s instanceof oy)this.clear(),i();else throw s}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var s;if(r.branches.delete(i),r===n)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(s=r)===null||s===void 0?void 0:s.branchKey,r=r.parent}for(;r!==n;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=yL()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw Fm(e+(this._name!=null?` - ${this._name}`:"")),new oy}}var SL={TreeCache:wL},EL=SL.TreeCache,SC=Object.freeze({__proto__:null,TreeCache:EL});class CL{constructor(e){var n;ee(this,"_maxSize",void 0),ee(this,"_size",void 0),ee(this,"_head",void 0),ee(this,"_tail",void 0),ee(this,"_map",void 0),ee(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),r=this._map.get(n);if(r)return this.set(e,r.value),r.value}set(e,n){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const s=this.head(),o={key:e,right:s,left:null,value:n};s?s.left=o:this._tail=o,this._map.set(r,o),this._head=o,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const r=Pe(this._map.get(n)),i=r.right,s=r.left;i&&(i.left=r.left),s&&(s.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=s),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var IL={LRUCache:CL},TL=IL.LRUCache,EC=Object.freeze({__proto__:null,LRUCache:TL});const{LRUCache:RL}=EC,{TreeCache:kL}=SC;function NL({name:t,maxSize:e,mapNodeValue:n=r=>r}){const r=new RL({maxSize:e}),i=new kL({name:t,mapNodeValue:n,onHit:s=>{r.set(s,!0)},onSet:s=>{const o=r.tail();r.set(s,!0),o&&i.size()>e&&i.delete(o.key)}});return i}var ay=NL;function Sn(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw ne("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var r;return(r=JSON.stringify(t))!==null&&r!==void 0?r:""}if(Ie(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,s)=>Sn(i,e,s.toString()))}]`;if(typeof t.toJSON=="function")return Sn(t.toJSON(n),e,n);if(t instanceof Map){const i={};for(const[s,o]of t)i[typeof s=="string"?s:Sn(s,e)]=o;return Sn(i,e,n)}return t instanceof Set?Sn(Array.from(t).sort((i,s)=>Sn(i,e).localeCompare(Sn(s,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?Sn(Array.from(t),e,n):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${Sn(i,e)}:${Sn(t[i],e,i)}`).join(",")}}`}function bL(t,e={allowFunctions:!1}){return Sn(t,e)}var ad=bL;const{TreeCache:PL}=SC,Xl={equality:"reference",eviction:"keep-all",maxSize:1/0};function AL({equality:t=Xl.equality,eviction:e=Xl.eviction,maxSize:n=Xl.maxSize}=Xl,r){const i=xL(t);return LL(e,n,i,r)}function xL(t){switch(t){case"reference":return e=>e;case"value":return e=>ad(e)}throw ne(`Unrecognized equality policy ${t}`)}function LL(t,e,n,r){switch(t){case"keep-all":return new PL({name:r,mapNodeValue:n});case"lru":return ay({name:r,maxSize:Pe(e),mapNodeValue:n});case"most-recent":return ay({name:r,maxSize:1,mapNodeValue:n})}throw ne(`Unrecognized eviction policy ${t}`)}var OL=AL;function DL(t){return()=>null}var ML={startPerfBlock:DL};const{isLoadable:FL,loadableWithError:Zl,loadableWithPromise:UL,loadableWithValue:Ih}=ll,{WrappedValue:CC}=wC,{getNodeLoadable:ec,peekNodeLoadable:VL,setNodeValue:jL}=li,{saveDepsToStore:$L}=ul,{DEFAULT_VALUE:BL,getConfigDeletionHandler:zL,getNode:WL,registerNode:ly}=Vt,{isRecoilValue:HL}=Gs,{markRecoilValueModified:cy}=qn,{retainedByOptionWithDefault:GL}=Qi,{recoilCallback:KL}=yC,{startPerfBlock:qL}=ML;class IC{}const xo=new IC,Lo=[],tc=new Map,YL=(()=>{let t=0;return()=>t++})();function TC(t){let e=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=t,s=t.set!=null?t.set:void 0,o=new Set,a=OL(i??{equality:"reference",eviction:"keep-all"},n),l=GL(t.retainedBy_UNSTABLE),c=new Map;let d=0;function u(){return!ye("recoil_memory_managament_2020")||d>0}function h(S){return S.getState().knownSelectors.add(n),d++,()=>{d--}}function g(){return zL(n)!==void 0&&!u()}function m(S,L,O,J,j){mt(L,J,j),y(S,O)}function y(S,L){pt(S,L)&&ge(S),v(L,!0)}function T(S,L){pt(S,L)&&(Pe(z(S)).stateVersions.clear(),v(L,!1))}function v(S,L){const O=tc.get(S);if(O!=null){for(const J of O)cy(J,Pe(e));L&&tc.delete(S)}}function f(S,L){let O=tc.get(L);O==null&&tc.set(L,O=new Set),O.add(S)}function _(S,L,O,J,j,te){return L.then(ae=>{if(!u())throw ge(S),xo;const H=Ih(ae);return m(S,O,j,H,J),ae}).catch(ae=>{if(!u())throw ge(S),xo;if(Ie(ae))return I(S,ae,O,J,j,te);const H=Zl(ae);throw m(S,O,j,H,J),ae})}function I(S,L,O,J,j,te){return L.then(ae=>{if(!u())throw ge(S),xo;te.loadingDepKey!=null&&te.loadingDepPromise===L?O.atomValues.set(te.loadingDepKey,Ih(ae)):S.getState().knownSelectors.forEach(_e=>{O.atomValues.delete(_e)});const H=x(S,O);if(H&&H.state!=="loading"){if((pt(S,j)||z(S)==null)&&y(S,j),H.state==="hasValue")return H.contents;throw H.contents}if(!pt(S,j)){const _e=ce(S,O);if(_e!=null)return _e.loadingLoadable.contents}const[ke,Ge]=A(S,O,j);if(ke.state!=="loading"&&m(S,O,j,ke,Ge),ke.state==="hasError")throw ke.contents;return ke.contents}).catch(ae=>{if(ae instanceof IC)throw xo;if(!u())throw ge(S),xo;const H=Zl(ae);throw m(S,O,j,H,J),ae})}function R(S,L,O,J){var j,te,ae,H;if(pt(S,J)||L.version===((j=S.getState())===null||j===void 0||(te=j.currentTree)===null||te===void 0?void 0:te.version)||L.version===((ae=S.getState())===null||ae===void 0||(H=ae.nextTree)===null||H===void 0?void 0:H.version)){var ke,Ge,_e;$L(n,O,S,(ke=(Ge=S.getState())===null||Ge===void 0||(_e=Ge.nextTree)===null||_e===void 0?void 0:_e.version)!==null&&ke!==void 0?ke:S.getState().currentTree.version)}for(const xe of O)o.add(xe)}function A(S,L,O){const J=qL(n);let j=!0,te=!0;const ae=()=>{J(),te=!1};let H,ke=!1,Ge;const _e={loadingDepKey:null,loadingDepPromise:null},xe=new Map;function _n({key:tn}){const Bt=ec(S,L,tn);switch(xe.set(tn,Bt),j||(R(S,L,new Set(xe.keys()),O),T(S,O)),Bt.state){case"hasValue":return Bt.contents;case"hasError":throw Bt.contents;case"loading":throw _e.loadingDepKey=tn,_e.loadingDepPromise=Bt.contents,Bt.contents}throw ne("Invalid Loadable state")}const fi=tn=>(...Bt)=>{if(te)throw ne("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&Yo(!1),KL(S,tn,Bt,{node:e})};try{H=r({get:_n,getCallback:fi}),H=HL(H)?_n(H):H,FL(H)&&(H.state==="hasError"&&(ke=!0),H=H.contents),Ie(H)?H=_(S,H,L,xe,O,_e).finally(ae):ae(),H=H instanceof CC?H.value:H}catch(tn){H=tn,Ie(H)?H=I(S,H,L,xe,O,_e).finally(ae):(ke=!0,ae())}return ke?Ge=Zl(H):Ie(H)?Ge=UL(H):Ge=Ih(H),j=!1,en(S,O,xe),R(S,L,new Set(xe.keys()),O),[Ge,xe]}function x(S,L){let O=L.atomValues.get(n);if(O!=null)return O;const J=new Set;try{O=a.get(te=>(typeof te!="string"&&Yo(!1),ec(S,L,te).contents),{onNodeVisit:te=>{te.type==="branch"&&te.nodeKey!==n&&J.add(te.nodeKey)}})}catch(te){throw ne(`Problem with cache lookup for selector "${n}": ${te.message}`)}if(O){var j;L.atomValues.set(n,O),R(S,L,J,(j=z(S))===null||j===void 0?void 0:j.executionID)}return O}function V(S,L){const O=x(S,L);if(O!=null)return ge(S),O;const J=ce(S,L);if(J!=null){var j;return((j=J.loadingLoadable)===null||j===void 0?void 0:j.state)==="loading"&&f(S,J.executionID),J.loadingLoadable}const te=YL(),[ae,H]=A(S,L,te);return ae.state==="loading"?(Re(S,te,ae,H,L),f(S,te)):(ge(S),mt(L,ae,H)),ae}function ce(S,L){const O=KE([c.has(S)?[Pe(c.get(S))]:[],qu(Bm(c,([j])=>j!==S),([,j])=>j)]);function J(j){for(const[te,ae]of j)if(!ec(S,L,te).is(ae))return!0;return!1}for(const j of O){if(j.stateVersions.get(L.version)||!J(j.depValuesDiscoveredSoFarDuringAsyncWork))return j.stateVersions.set(L.version,!0),j;j.stateVersions.set(L.version,!1)}}function z(S){return c.get(S)}function Re(S,L,O,J,j){c.set(S,{depValuesDiscoveredSoFarDuringAsyncWork:J,executionID:L,loadingLoadable:O,stateVersions:new Map([[j.version,!0]])})}function en(S,L,O){if(pt(S,L)){const J=z(S);J!=null&&(J.depValuesDiscoveredSoFarDuringAsyncWork=O)}}function ge(S){c.delete(S)}function pt(S,L){var O;return L===((O=z(S))===null||O===void 0?void 0:O.executionID)}function Qn(S){return Array.from(S.entries()).map(([L,O])=>[L,O.contents])}function mt(S,L,O){S.atomValues.set(n,L);try{a.set(Qn(O),L)}catch(J){throw ne(`Problem with setting cache for selector "${n}": ${J.message}`)}}function $t(S){if(Lo.includes(n)){const L=`Recoil selector has circular dependencies: ${Lo.slice(Lo.indexOf(n)).join("  ")}`;return Zl(ne(L))}Lo.push(n);try{return S()}finally{Lo.pop()}}function F(S,L){const O=L.atomValues.get(n);return O??a.get(J=>{var j;return typeof J!="string"&&Yo(!1),(j=VL(S,L,J))===null||j===void 0?void 0:j.contents})}function q(S,L){return $t(()=>V(S,L))}function U(S){S.atomValues.delete(n)}function W(S,L){e==null&&Yo(!1);for(const J of o){var O;const j=WL(J);(O=j.clearCache)===null||O===void 0||O.call(j,S,L)}o.clear(),U(L),a.clear(),cy(S,e)}return s!=null?e=ly({key:n,nodeType:"selector",peek:F,get:q,set:(L,O,J)=>{let j=!1;const te=new Map;function ae({key:_e}){if(j)throw ne("Recoil: Async selector sets are not currently supported.");const xe=ec(L,O,_e);if(xe.state==="hasValue")return xe.contents;if(xe.state==="loading"){const _n=`Getting value of asynchronous atom or selector "${_e}" in a pending state while setting selector "${n}" is not yet supported.`;throw ne(_n)}else throw xe.contents}function H(_e,xe){if(j)throw ne("Recoil: Async selector sets are not currently supported.");const _n=typeof xe=="function"?xe(ae(_e)):xe;jL(L,O,_e.key,_n).forEach((tn,Bt)=>te.set(Bt,tn))}function ke(_e){H(_e,BL)}const Ge=s({set:H,get:ae,reset:ke},J);if(Ge!==void 0)throw Ie(Ge)?ne("Recoil: Async selector sets are not currently supported."):ne("Recoil: selector set should be a void function.");return j=!0,te},init:h,invalidate:U,clearCache:W,shouldDeleteConfigOnRelease:g,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=ly({key:n,nodeType:"selector",peek:F,get:q,init:h,invalidate:U,clearCache:W,shouldDeleteConfigOnRelease:g,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}TC.value=t=>new CC(t);var Ys=TC;const{isLoadable:QL,loadableWithError:Th,loadableWithPromise:Rh,loadableWithValue:as}=ll,{WrappedValue:RC}=wC,{peekNodeInfo:JL}=li,{DEFAULT_VALUE:yi,DefaultValue:Rr,getConfigDeletionHandler:kC,registerNode:XL,setConfigDeletionHandler:ZL}=Vt,{isRecoilValue:eO}=Gs,{getRecoilValueAsLoadable:tO,markRecoilValueModified:nO,setRecoilValue:uy,setRecoilValueLoadable:rO}=qn,{retainedByOptionWithDefault:iO}=Qi,Oo=t=>t instanceof RC?t.value:t;function sO(t){const{key:e,persistence_UNSTABLE:n}=t,r=iO(t.retainedBy_UNSTABLE);let i=0;function s(f){return Rh(f.then(_=>(o=as(_),_)).catch(_=>{throw o=Th(_),_}))}let o=Ie(t.default)?s(t.default):QL(t.default)?t.default.state==="loading"?s(t.default.contents):t.default:as(Oo(t.default));o.contents;let a;const l=new Map;function c(f){return f}function d(f,_){const I=_.then(R=>{var A,x;return((x=((A=f.getState().nextTree)!==null&&A!==void 0?A:f.getState().currentTree).atomValues.get(e))===null||x===void 0?void 0:x.contents)===I&&uy(f,v,R),R}).catch(R=>{var A,x;throw((x=((A=f.getState().nextTree)!==null&&A!==void 0?A:f.getState().currentTree).atomValues.get(e))===null||x===void 0?void 0:x.contents)===I&&rO(f,v,Th(R)),R});return I}function u(f,_,I){var R;i++;const A=()=>{var z;i--,(z=l.get(f))===null||z===void 0||z.forEach(Re=>Re()),l.delete(f)};if(f.getState().knownAtoms.add(e),o.state==="loading"){const z=()=>{var Re;((Re=f.getState().nextTree)!==null&&Re!==void 0?Re:f.getState().currentTree).atomValues.has(e)||nO(f,v)};o.contents.finally(z)}const x=(R=t.effects)!==null&&R!==void 0?R:t.effects_UNSTABLE;if(x!=null){let z=function(U){if(pt&&U.key===e){const W=ge;return W instanceof Rr?h(f,_):Ie(W)?Rh(W.then(S=>S instanceof Rr?o.toPromise():S)):as(W)}return tO(f,U)},Re=function(U){return z(U).toPromise()},en=function(U){var W;const S=JL(f,(W=f.getState().nextTree)!==null&&W!==void 0?W:f.getState().currentTree,U.key);return pt&&U.key===e&&!(ge instanceof Rr)?{...S,isSet:!0,loadable:z(U)}:S},ge=yi,pt=!0,Qn=!1,mt=null;const $t=U=>W=>{if(pt){const S=z(v),L=S.state==="hasValue"?S.contents:yi;ge=typeof W=="function"?W(L):W,Ie(ge)&&(ge=ge.then(O=>(mt={effect:U,value:O},O)))}else{if(Ie(W))throw ne("Setting atoms to async values is not implemented.");typeof W!="function"&&(mt={effect:U,value:Oo(W)}),uy(f,v,typeof W=="function"?S=>{const L=Oo(W(S));return mt={effect:U,value:L},L}:Oo(W))}},F=U=>()=>$t(U)(yi),q=U=>W=>{var S;const{release:L}=f.subscribeToTransactions(O=>{var J;let{currentTree:j,previousTree:te}=O.getState();te||(te=j);const ae=(J=j.atomValues.get(e))!==null&&J!==void 0?J:o;if(ae.state==="hasValue"){var H,ke,Ge,_e;const xe=ae.contents,_n=(H=te.atomValues.get(e))!==null&&H!==void 0?H:o,fi=_n.state==="hasValue"?_n.contents:yi;((ke=mt)===null||ke===void 0?void 0:ke.effect)!==U||((Ge=mt)===null||Ge===void 0?void 0:Ge.value)!==xe?W(xe,fi,!j.atomValues.has(e)):((_e=mt)===null||_e===void 0?void 0:_e.effect)===U&&(mt=null)}},e);l.set(f,[...(S=l.get(f))!==null&&S!==void 0?S:[],L])};for(const U of x)try{const W=U({node:v,storeID:f.storeID,parentStoreID_UNSTABLE:f.parentStoreID,trigger:I,setSelf:$t(U),resetSelf:F(U),onSet:q(U),getPromise:Re,getLoadable:z,getInfo_UNSTABLE:en});if(W!=null){var V;l.set(f,[...(V=l.get(f))!==null&&V!==void 0?V:[],W])}}catch(W){ge=W,Qn=!0}if(pt=!1,!(ge instanceof Rr)){var ce;const U=Qn?Th(ge):Ie(ge)?Rh(d(f,ge)):as(Oo(ge));U.contents,_.atomValues.set(e,U),(ce=f.getState().nextTree)===null||ce===void 0||ce.atomValues.set(e,U)}}return A}function h(f,_){var I,R;return(I=(R=_.atomValues.get(e))!==null&&R!==void 0?R:a)!==null&&I!==void 0?I:o}function g(f,_){if(_.atomValues.has(e))return Pe(_.atomValues.get(e));if(_.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return o;const I=_.nonvalidatedAtoms.get(e),R=n.validator(I,yi);return a=R instanceof Rr?o:as(R),a}else return o}function m(){a=void 0}function y(f,_,I){if(_.atomValues.has(e)){const R=Pe(_.atomValues.get(e));if(R.state==="hasValue"&&I===R.contents)return new Map}else if(!_.nonvalidatedAtoms.has(e)&&I instanceof Rr)return new Map;return a=void 0,new Map().set(e,as(I))}function T(){return kC(e)!==void 0&&i<=0}const v=XL({key:e,nodeType:"atom",peek:h,get:g,set:y,init:u,invalidate:m,shouldDeleteConfigOnRelease:T,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return v}function Xm(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return eO(n)?oO({...e,default:n}):sO({...e,default:n})}function oO(t){const e=Xm({...t,default:yi,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:r=>r instanceof Rr?r:Pe(t.persistence_UNSTABLE).validator(r,yi)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=Ys({key:`${t.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof Rr?t.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return ZL(n.key,kC(t.key)),n}Xm.value=t=>new RC(t);var NC=Xm;class aO{constructor(e){var n;ee(this,"_map",void 0),ee(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var lO={MapCache:aO},cO=lO.MapCache,uO=Object.freeze({__proto__:null,MapCache:cO});const{LRUCache:dy}=EC,{MapCache:dO}=uO,nc={equality:"reference",eviction:"none",maxSize:1/0};function hO({equality:t=nc.equality,eviction:e=nc.eviction,maxSize:n=nc.maxSize}=nc){const r=fO(t);return pO(e,n,r)}function fO(t){switch(t){case"reference":return e=>e;case"value":return e=>ad(e)}throw ne(`Unrecognized equality policy ${t}`)}function pO(t,e,n){switch(t){case"keep-all":return new dO({mapKey:n});case"lru":return new dy({mapKey:n,maxSize:Pe(e)});case"most-recent":return new dy({mapKey:n,maxSize:1})}throw ne(`Unrecognized eviction policy ${t}`)}var bC=hO;const{setConfigDeletionHandler:mO}=Vt;function gO(t){var e,n;const r=bC({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s,o;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:l,...c}=t,d="default"in t?t.default:new Promise(()=>{}),u=NC({...c,key:`${t.key}__${(s=ad(i))!==null&&s!==void 0?s:"void"}`,default:typeof d=="function"?d(i):d,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(i):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):(o=t.effects)!==null&&o!==void 0?o:t.effects_UNSTABLE});return r.set(i,u),mO(u.key,()=>{r.delete(i)}),u}}var _O=gO;const{setConfigDeletionHandler:vO}=Vt;let yO=0;function wO(t){var e,n;const r=bC({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s;let o;try{o=r.get(i)}catch(h){throw ne(`Problem with cache lookup for selector ${t.key}: ${h.message}`)}if(o!=null)return o;const a=`${t.key}__selectorFamily/${(s=ad(i,{allowFunctions:!0}))!==null&&s!==void 0?s:"void"}/${yO++}`,l=h=>t.get(i)(h),c=t.cachePolicy_UNSTABLE,d=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE;let u;if(t.set!=null){const h=t.set;u=Ys({key:a,get:l,set:(m,y)=>h(i)(m,y),cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:d})}else u=Ys({key:a,get:l,cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:d});return r.set(i,u),vO(u.key,()=>{r.delete(i)}),u}}var ci=wO;const SO=ci({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function EO(t){return SO(t)}var CO=EO;const IO=ci({key:"__error",get:t=>()=>{throw ne(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function TO(t){return IO(t)}var RO=TO;function kO(t){return t}var NO=kO;const{loadableWithError:PC,loadableWithPromise:AC,loadableWithValue:xC}=ll;function ld(t,e){const n=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,s]of e.entries())try{n[i]=t(s)}catch(o){r[i]=o}return[n,r]}function bO(t){return t!=null&&!Ie(t)}function cd(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function tp(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,i)=>({...n,[r]:e[i]}),{})}function As(t,e,n){const r=n.map((i,s)=>i==null?xC(e[s]):Ie(i)?AC(i):PC(i));return tp(t,r)}function PO(t,e){return e.map((n,r)=>n===void 0?t[r]:n)}const AO=ci({key:"__waitForNone",get:t=>({get:e})=>{const n=cd(t),[r,i]=ld(e,n);return As(t,r,i)},dangerouslyAllowMutability:!0}),xO=ci({key:"__waitForAny",get:t=>({get:e})=>{const n=cd(t),[r,i]=ld(e,n);return i.some(s=>!Ie(s))?As(t,r,i):new Promise(s=>{for(const[o,a]of i.entries())Ie(a)&&a.then(l=>{r[o]=l,i[o]=void 0,s(As(t,r,i))}).catch(l=>{i[o]=l,s(As(t,r,i))})})},dangerouslyAllowMutability:!0}),LO=ci({key:"__waitForAll",get:t=>({get:e})=>{const n=cd(t),[r,i]=ld(e,n);if(i.every(o=>o==null))return tp(t,r);const s=i.find(bO);if(s!=null)throw s;return Promise.all(i).then(o=>tp(t,PO(r,o)))},dangerouslyAllowMutability:!0}),OO=ci({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=cd(t),[r,i]=ld(e,n);return i.every(s=>!Ie(s))?As(t,r,i):Promise.all(i.map((s,o)=>Ie(s)?s.then(a=>{r[o]=a,i[o]=void 0}).catch(a=>{r[o]=void 0,i[o]=a}):null)).then(()=>As(t,r,i))},dangerouslyAllowMutability:!0}),DO=ci({key:"__noWait",get:t=>({get:e})=>{try{return Ys.value(xC(e(t)))}catch(n){return Ys.value(Ie(n)?AC(n):PC(n))}},dangerouslyAllowMutability:!0});var MO={waitForNone:AO,waitForAny:xO,waitForAll:LO,waitForAllSettled:OO,noWait:DO};const{RecoilLoadable:FO}=ll,{DefaultValue:UO}=Vt,{RecoilRoot:VO,useRecoilStoreID:jO}=vr,{isRecoilValue:$O}=Gs,{retentionZone:BO}=Qu,{freshSnapshot:zO}=nd,{useRecoilState:WO,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:HO,useRecoilStateLoadable:GO,useRecoilValue:KO,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:qO,useRecoilValueLoadable:YO,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:QO,useResetRecoilState:JO,useSetRecoilState:XO}=lx,{useGotoRecoilSnapshot:ZO,useRecoilSnapshot:eD,useRecoilTransactionObserver:tD}=mC,{useRecoilCallback:nD}=yC,{noWait:rD,waitForAll:iD,waitForAllSettled:sD,waitForAny:oD,waitForNone:aD}=MO;var pl={DefaultValue:UO,isRecoilValue:$O,RecoilLoadable:FO,RecoilEnv:lo,RecoilRoot:VO,useRecoilStoreID:jO,useRecoilBridgeAcrossReactRoots_UNSTABLE:Dx,atom:NC,selector:Ys,atomFamily:_O,selectorFamily:ci,constSelector:CO,errorSelector:RO,readOnlySelector:NO,noWait:rD,waitForNone:aD,waitForAny:oD,waitForAll:iD,waitForAllSettled:sD,useRecoilValue:KO,useRecoilValueLoadable:YO,useRecoilState:WO,useRecoilStateLoadable:GO,useSetRecoilState:XO,useResetRecoilState:JO,useGetRecoilValueInfo_UNSTABLE:bx,useRecoilRefresher_UNSTABLE:uL,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:QO,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:qO,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:HO,useRecoilCallback:nD,useRecoilTransaction_UNSTABLE:mL,useGotoRecoilSnapshot:ZO,useRecoilSnapshot:eD,useRecoilTransactionObserver_UNSTABLE:tD,snapshot_UNSTABLE:zO,useRetain:Km,retentionZone:BO},lD=pl.RecoilRoot,Zm=pl.atom,cD=pl.selector,Fi=pl.useRecoilValue,eg=pl.useSetRecoilState;const uD="_container_cuv99_1",dD={container:uD};var LC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},hy=he.createContext&&he.createContext(LC),hD=["attr","size","title"];function fD(t,e){if(t==null)return{};var n=pD(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pD(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Zc(){return Zc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zc.apply(this,arguments)}function fy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fy(Object(n),!0).forEach(function(r){mD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fy(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mD(t,e,n){return e=gD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gD(t){var e=_D(t,"string");return typeof e=="symbol"?e:e+""}function _D(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OC(t){return t&&t.map((e,n)=>he.createElement(e.tag,eu({key:n},e.attr),OC(e.child)))}function Rt(t){return e=>he.createElement(vD,Zc({attr:eu({},t.attr)},e),OC(t.child))}function vD(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=fD(t,hD),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),he.createElement("svg",Zc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:eu(eu({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&he.createElement("title",null,s),t.children)};return hy!==void 0?he.createElement(hy.Consumer,null,n=>e(n)):e(LC)}function tg(t){return Rt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(t)}function yD(t){return Rt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(t)}function wD(t){return Rt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"},child:[]}]})(t)}function SD(t){return Rt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"},child:[]}]})(t)}function ED(t){return Rt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.41L5.83 13H21V7z"},child:[]}]})(t)}function CD(t){return Rt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(t)}function ID(t){return Rt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function TD(t){return Rt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(t)}const RD="_button_b0j74_1",ng={button:RD},kD="_header_12x5n_1",ND="_footer_12x5n_24",bD="_contents_12x5n_50",PD="_modalBackground_12x5n_64",AD="_modal_12x5n_64",Do={header:kD,footer:ND,contents:bD,modalBackground:PD,modal:AD},DC=()=>{C.useEffect(()=>(document.body.classList.add("no-scroll"),()=>{document.body.classList.remove("no-scroll")}),[])},Ji=({children:t,title:e,onClose:n})=>{DC();const r=C.useCallback(i=>{i.key==="Escape"&&n()},[n]);return C.useEffect(()=>(window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}),[r]),xm.createPortal(p.jsx("div",{className:Do.modalBackground,onClick:n,children:p.jsxs("div",{className:Do.modal,onClick:i=>i.stopPropagation(),children:[p.jsxs("div",{className:Do.header,children:[p.jsx("h2",{children:e}),p.jsx("button",{onClick:n,"aria-label":"lukk vinduet",children:p.jsx(ID,{})})]}),p.jsx("div",{className:Do.contents,children:t}),p.jsx("div",{className:Do.footer,children:p.jsx("button",{onClick:n,children:"Lukk"})})]})}),document.body)},xD="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='2%200%2036%2036'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='5.5'%20y='13.75'%20width='29'%20height='10'%20rx='5'%20fill='white'%20/%3e%3crect%20x='13'%20y='7'%20width='14'%20height='22'%20rx='7'%20fill='%23FFC30E'/%3e%3cpath%20d='M%2029.6746%2013.5638%20H%2027.6098%20C%2027.3503%2010.8376%2025.6147%208.53471%2023.2039%207.43001%20L%2024.181%204.97195%20C%2024.3262%204.60609%2024.144%204.19277%2023.773%204.04947%20C%2023.4019%203.90568%2022.9838%204.086%2022.8386%204.45234%20L%2021.8427%206.95738%20C%2021.2511%206.81217%2020.6359%206.72628%2019.999%206.72628%20C%2019.3612%206.72628%2018.7446%206.81217%2018.152%206.95833%20L%2017.1561%204.45281%20C%2017.0105%204.08695%2016.5914%203.90616%2016.2218%204.04994%20C%2015.8512%204.19372%2015.6686%204.60656%2015.8137%204.97242%20L%2016.7913%207.43191%20C%2014.3824%208.53709%2012.6483%2010.839%2012.3887%2013.5642%20H%2010.3244%20C%207.38873%2013.5642%205%2015.9227%205%2018.8211%20C%205%2021.7195%207.38825%2024.0779%2010.3244%2024.0779%20H%2012.6156%20C%2013.4231%2027.0855%2016.0603%2029.3632%2019.2791%2029.6622%20V%2032.2882%20C%2019.2791%2032.6816%2019.6016%2033%2020%2033%20C%2020.3984%2033%2020.7209%2032.6816%2020.7209%2032.2882%20V%2029.6622%20C%2023.9397%2029.3632%2026.5769%2027.0855%2027.3844%2024.0779%20H%2029.6756%20C%2032.6113%2024.0779%2035%2021.7195%2035%2018.8211%20C%2035%2015.9227%2032.6108%2013.5638%2029.6746%2013.5638%20Z%20M%2019.9995%208.14939%20C%2023.4211%208.14939%2026.2045%2010.8974%2026.2045%2014.2756%20V%2015.0666%20H%2024.9664%20C%2024.5679%2015.0666%2024.2454%2015.385%2024.2454%2015.7784%20C%2024.2454%2016.1718%2024.5679%2016.4902%2024.9664%2016.4902%20H%2026.2045%20V%2018.1088%20H%2013.7946%20V%2016.4902%20H%2022.3229%20C%2022.7213%2016.4902%2023.0438%2016.1718%2023.0438%2015.7784%20C%2023.0438%2015.385%2022.7213%2015.0666%2022.3229%2015.0666%20H%2013.7946%20V%2014.2756%20C%2013.7946%2010.8974%2016.5779%208.14939%2019.9995%208.14939%20Z%20M%2012.3527%2022.6538%20H%2010.3244%20C%208.1837%2022.6538%206.44189%2020.9342%206.44189%2018.8206%20C%206.44189%2016.707%208.1837%2014.9874%2010.3244%2014.9874%20H%2012.3527%20V%2022.148%20V%2022.6538%20Z%20M%2019.9995%2028.2742%20C%2016.724%2028.2742%2014.0402%2025.7535%2013.8162%2022.5746%20H%2016.5548%20C%2016.9533%2022.5746%2017.2758%2022.2562%2017.2758%2021.8628%20C%2017.2758%2021.4694%2016.9533%2021.151%2016.5548%2021.151%20H%2013.7946%20V%2019.5324%20H%2026.2045%20V%2021.151%20H%2019.4386%20C%2019.0402%2021.151%2018.7177%2021.4694%2018.7177%2021.8628%20C%2018.7177%2022.2562%2019.0402%2022.5746%2019.4386%2022.5746%20H%2026.1828%20C%2025.9589%2025.7535%2023.275%2028.2742%2019.9995%2028.2742%20Z%20M%2029.6746%2022.6538%20H%2027.6464%20V%2022.148%20V%2014.9874%20H%2029.6746%20C%2031.8153%2014.9874%2033.5571%2016.707%2033.5571%2018.8206%20C%2033.5571%2020.9342%2031.8153%2022.6538%2029.6746%2022.6538%20Z%20'%20fill='black'/%3e%3c/svg%3e",MC=({size:t=36,style:e={}})=>p.jsx("img",{src:xD,width:t,height:t,style:{margin:0,padding:0,...e},alt:"Stavehumle ikon"}),py="info-dialog/has-closed",LD=()=>{const[t,e]=C.useState(()=>!localStorage.getItem(py)),n=C.useMemo(()=>t?p.jsxs(Ji,{title:"Stavehumle!",onClose:()=>{e(!1),localStorage.setItem(py,new Date().toISOString())},children:[p.jsx("p",{children:"Stavehumle er et ordspill hvor du lager s mange ord som du kan. Hvert puslespill har syv ulike bokstaveren fast i midten og seks rundt."}),p.jsx("h3",{children:"Reglene"}),p.jsx("p",{children:"Hvert ord:"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"m bruke"})," den midterste bokstaven"]}),p.jsxs("li",{children:["m vre minst ",p.jsx("strong",{children:"fire bokstaver"})," langt"]}),p.jsxs("li",{children:["bruker ",p.jsx("strong",{children:"kun"})," de syv bokstavene",p.jsx("br",{}),"(men bokstaver kan gjentas)"]})]}),p.jsxs("p",{children:["Hver puslespill har ",p.jsx("strong",{children:"minst ett"})," ord som bruker"," ",p.jsx("strong",{children:"alle bokstavene"}),"."]}),p.jsxs("p",{children:["Det finnes en ny puslespill ",p.jsx("strong",{children:"hver dag!"})]}),p.jsx("p",{children:"Lykke til!"}),p.jsx("hr",{}),p.jsxs("p",{children:[p.jsx(MC,{size:20})," fra"," ",p.jsx("a",{href:"https://linkedin.com/in/baharshahriari/",target:"_blank",rel:"noopener noreferrer",children:"Bahar Anvari"})]}),p.jsxs("p",{children:["(Want to play in English? Try the"," ",p.jsx("a",{href:"https://www.nytimes.com/puzzles/spelling-bee",target:"_blank",rel:"noopener noreferrer",children:"NYT Spelling Bee"}),"!)"]})]}):null,[t]);return p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>e(!0),className:ng.button,"aria-label":"om Stavehumle",children:p.jsx(yD,{})}),n]})},OD="_header_1frmq_1",DD="_center_1frmq_20",MD="_monthGrid_1frmq_26",FD="_dateButton_1frmq_32",UD="_todayButton_1frmq_42",VD="_currentButton_1frmq_46",jD="_dayHeader_1frmq_51",On={header:OD,center:DD,monthGrid:MD,dateButton:FD,todayButton:UD,currentButton:VD,dayHeader:jD};function $D(t){return Rt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8.354 1.646a.5.5 0 0 1 0 .708L2.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M12.354 1.646a.5.5 0 0 1 0 .708L6.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"},child:[]}]})(t)}function BD(t){return Rt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708"},child:[]}]})(t)}function zD(t){return Rt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"},child:[]}]})(t)}function WD(t){return Rt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"},child:[]}]})(t)}const HD=Math.pow(2,32),GD=t=>{let e=0;for(let n=0;n<t.length;n+=1){const r=t.charCodeAt(n);e=(31*e+r)%HD}return e},np=t=>t<10?`0${t}`:t,KD=t=>{if(!t)return!1;const e=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/);if(!e)return!1;const n=e.slice(1);if(n.length!==3)return!1;const[r,i,s]=n.map(Number);return r&&i>=1&&i<=12&&s>=1&&s<=31},FC=()=>{const{gameId:t}=Mm();let e=t;if(!e){const r=new Date;e=[r.getFullYear(),r.getMonth()+1,r.getDate()].map(np).join("-")}const n=GD(e.split("").reverse().join(""));return{gameId:e,gameHash:n}},qD=["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],YD=["m","t","o","t","f","l","s"],QD=["mandag","tirsdag","onsdag","torsdag","fredag","lrdag","sondag"],JD=({onChange:t,gameId:e=""})=>{const n=new Date,[r,i,s]=[n.getFullYear(),n.getMonth(),n.getDate()],o=C.useMemo(()=>KD(e)?new Date(e):null,[e]),[a,l]=C.useState((o||n).getFullYear()),[c,d]=C.useState((o||n).getMonth()),u=m=>()=>{l(y=>y+m)},h=m=>()=>{d(y=>{const T=y+m;return T<0?(l(v=>v-1),11):T>=12?(l(v=>v+1),0):T})},g=C.useMemo(()=>{const y=new Date(a,c,1).getDay(),T=[];for(let f=0;f<7;f+=1)T.push(p.jsx("div",{className:On.dayHeader,children:YD[f]},`day-${QD[f]}`));for(let f=1;f<y;f+=1)T.push(p.jsx("div",{className:On.filler,children:""},`filler-${f}`));const v=new Date(a,c+1,0).getDate();for(let f=1;f<=v;f+=1){const _=a===r&&c===i&&f===s,I=o&&a===o.getFullYear()&&c===o.getMonth()&&f===o.getDate(),R=[On.dateButton];_&&R.push(On.todayButton),I&&R.push(On.currentButton);const A=`velg ${a}-${c}-${f}`;T.push(p.jsx("button",{className:R.join(" "),onClick:()=>{t(`${a}-${np(c+1)}-${np(f)}`)},"aria-label":A,children:f},`date-${f}`))}return p.jsx("div",{className:On.monthGrid,children:T})},[a,c,t,o,r,i,s]);return p.jsxs("div",{children:[p.jsxs("div",{className:On.header,children:[p.jsx("button",{onClick:u(-1),"aria-label":"tilbake ett r",children:p.jsx($D,{})}),p.jsx("button",{onClick:h(-1),"aria-label":"tilbake en mned",children:p.jsx(zD,{})}),p.jsxs("button",{className:On.center,onClick:()=>{const m=new Date;l(m.getFullYear()),d(m.getMonth())},children:[p.jsx("span",{className:On.year,children:a}),"/",p.jsx("span",{className:On.month,children:qD[c]})]}),p.jsx("button",{onClick:h(1),"aria-label":"frem en mned",children:p.jsx(WD,{})}),p.jsx("button",{onClick:u(1),"aria-label":"frem ett r",children:p.jsx(BD,{})})]}),g]})},XD=()=>{const t=zu(),e=cE(),[n,r]=C.useState(!1),{gameId:i}=FC(),s=C.useCallback(()=>{r(!1)},[r]),o=C.useCallback(l=>{s(),e(`/${t}/${l}`)},[s,e,t]),a=C.useMemo(()=>n?p.jsx(Ji,{title:"Velg dato",onClose:()=>r(!1),children:p.jsx(JD,{onChange:o,gameId:i})}):null,[n,r,o,i]);return p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>r(!0),className:ng.button,"aria-label":"velg en annen dato",children:p.jsx(wD,{})}),a]})},ZD="_header_ydvlr_1",eM="_buttons_ydvlr_35",tM="_right_ydvlr_44",nM="_left_ydvlr_48",Mo={header:ZD,buttons:eM,right:tM,left:nM};function rM(t){return Rt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2A10.13 10.13 0 0 0 2 12a10 10 0 0 0 4 7.92V20h.1a9.7 9.7 0 0 0 11.8 0h.1v-.08A10 10 0 0 0 22 12 10.13 10.13 0 0 0 12 2zM8.07 18.93A3 3 0 0 1 11 16.57h2a3 3 0 0 1 2.93 2.36 7.75 7.75 0 0 1-7.86 0zm9.54-1.29A5 5 0 0 0 13 14.57h-2a5 5 0 0 0-4.61 3.07A8 8 0 0 1 4 12a8.1 8.1 0 0 1 8-8 8.1 8.1 0 0 1 8 8 8 8 0 0 1-2.39 5.64z"},child:[]},{tag:"path",attr:{d:"M12 6a3.91 3.91 0 0 0-4 4 3.91 3.91 0 0 0 4 4 3.91 3.91 0 0 0 4-4 3.91 3.91 0 0 0-4-4zm0 6a1.91 1.91 0 0 1-2-2 1.91 1.91 0 0 1 2-2 1.91 1.91 0 0 1 2 2 1.91 1.91 0 0 1-2 2z"},child:[]}]})(t)}function iM(t){return Rt({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(t)}function sM(t){return Rt({tag:"svg",attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(t)}var my={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P=function(t,e){if(!t)throw uo(e)},uo=function(t){return new Error("Firebase Database ("+UC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},oM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},rg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,u=(s&3)<<4|a>>4;let h=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(h=64)),r.push(n[d],n[u],n[h],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const u=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||u==null)throw new aM;const h=s<<2|a>>4;if(r.push(h),c!==64){const g=a<<4&240|c>>2;if(r.push(g),u!==64){const m=c<<6&192|u;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jC=function(t){const e=VC(t);return rg.encodeByteArray(e,!0)},tu=function(t){return jC(t).replace(/\./g,"")},nu=function(t){try{return rg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t){return Ua(void 0,t)}function Ua(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!cM(n)||(t[n]=Ua(t[n],e[n]));return t}function cM(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=()=>$C().__FIREBASE_DEFAULTS__,dM=()=>{if(typeof process>"u"||typeof my>"u")return;const t=my.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nu(t[1]);return e&&JSON.parse(e)},ig=()=>{try{return uM()||dM()||hM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BC=()=>{var t;return(t=ig())===null||t===void 0?void 0:t.config},fM=t=>{var e;return(e=ig())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tu(JSON.stringify(n)),tu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function zC(){var t;const e=(t=ig())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mM(){return typeof window<"u"||WC()}function WC(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function gM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ud(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GC(){const t=Xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KC(){return UC.NODE_ADMIN===!0}function ru(){try{return typeof indexedDB=="object"}catch{return!1}}function _M(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="FirebaseError";class Ft extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vM,Object.setPrototypeOf(this,Ft.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xi.prototype.create)}}class Xi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?yM(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ft(i,a,r)}}function yM(t,e){return t.replace(wM,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const wM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(t){return JSON.parse(t)}function Ye(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Va(nu(s[0])||""),n=Va(nu(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},SM=function(t){const e=qC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},EM=function(t){const e=qC(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ui(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function iu(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function su(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function rp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(gy(s)&&gy(o)){if(!rp(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function gy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Is(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Qo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let u=0;u<16;u++)r[u]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let u=0;u<16;u++)r[u]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let u=16;u<80;u++){const h=r[u-3]^r[u-8]^r[u-14]^r[u-16];r[u]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,d;for(let u=0;u<80;u++){u<40?u<20?(c=a^s&(o^a),d=1518500249):(c=s^o^a,d=1859775393):u<60?(c=s&o|a&(s|o),d=2400959708):(c=s^o^a,d=3395469782);const h=(i<<5|i>>>27)+c+l+d+r[u]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function YC(t,e){const n=new IM(t,e);return n.subscribe.bind(n)}class IM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");TM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=kh),i.error===void 0&&(i.error=kh),i.complete===void 0&&(i.complete=kh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kh(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(t,e,n,r){let i;if(r<e?i="at least "+e:r>n&&(i=n===0?"none":"no more than "+n),i){const s=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function Ut(t,e){return`${t} failed: ${e} argument `}function rt(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(Ut(t,e)+"must be a valid function.")}function _y(t,e,n,r){if(n&&(typeof n!="object"||n===null))throw new Error(Ut(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,P(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},dd=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t){return t&&t._delegate?t._delegate:t}class pn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Pt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NM(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kM(t){return t===gi?void 0:t}function NM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ip(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=[];var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const QC={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},bM=pe.INFO,PM={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},AM=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=PM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ml{constructor(e){this.name=e,this._logLevel=bM,this._logHandler=AM,this._userLogHandler=null,ag.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}function xM(t){ag.forEach(e=>{e.setLogLevel(t)})}function LM(t,e){for(const n of ag){let r=null;e&&e.level&&(r=QC[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:pe[s].toLowerCase(),message:a,args:o,type:i.name})}}}const OM=(t,e)=>e.some(n=>t instanceof n);let vy,yy;function DM(){return vy||(vy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MM(){return yy||(yy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JC=new WeakMap,sp=new WeakMap,XC=new WeakMap,Nh=new WeakMap,lg=new WeakMap;function FM(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Wr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JC.set(n,t)}).catch(()=>{}),lg.set(e,t),e}function UM(t){if(sp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});sp.set(t,e)}let op={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||XC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VM(t){op=t(op)}function jM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bh(this),e,...n);return XC.set(r,e.sort?e.sort():[e]),Wr(r)}:MM().includes(t)?function(...e){return t.apply(bh(this),e),Wr(JC.get(this))}:function(...e){return Wr(t.apply(bh(this),e))}}function $M(t){return typeof t=="function"?jM(t):(t instanceof IDBTransaction&&UM(t),OM(t,DM())?new Proxy(t,op):t)}function Wr(t){if(t instanceof IDBRequest)return FM(t);if(Nh.has(t))return Nh.get(t);const e=$M(t);return e!==t&&(Nh.set(t,e),lg.set(e,t)),e}const bh=t=>lg.get(t);function BM(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Wr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Wr(o.result),l.oldVersion,l.newVersion,Wr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const zM=["get","getKey","getAll","getAllKeys","count"],WM=["put","add","delete","clear"],Ph=new Map;function wy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ph.get(e))return Ph.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=WM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zM.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Ph.set(e,s),s}VM(t=>({...t,get:(e,n,r)=>wy(e,n)||t.get(e,n,r),has:(e,n)=>!!wy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ou="@firebase/app",ap="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new ml("@firebase/app"),KM="@firebase/app-compat",qM="@firebase/analytics-compat",YM="@firebase/analytics",QM="@firebase/app-check-compat",JM="@firebase/app-check",XM="@firebase/auth",ZM="@firebase/auth-compat",eF="@firebase/database",tF="@firebase/data-connect",nF="@firebase/database-compat",rF="@firebase/functions",iF="@firebase/functions-compat",sF="@firebase/installations",oF="@firebase/installations-compat",aF="@firebase/messaging",lF="@firebase/messaging-compat",cF="@firebase/performance",uF="@firebase/performance-compat",dF="@firebase/remote-config",hF="@firebase/remote-config-compat",fF="@firebase/storage",pF="@firebase/storage-compat",mF="@firebase/firestore",gF="@firebase/vertexai",_F="@firebase/firestore-compat",vF="firebase",yF="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]",wF={[ou]:"fire-core",[KM]:"fire-core-compat",[YM]:"fire-analytics",[qM]:"fire-analytics-compat",[JM]:"fire-app-check",[QM]:"fire-app-check-compat",[XM]:"fire-auth",[ZM]:"fire-auth-compat",[eF]:"fire-rtdb",[tF]:"fire-data-connect",[nF]:"fire-rtdb-compat",[rF]:"fire-fn",[iF]:"fire-fn-compat",[sF]:"fire-iid",[oF]:"fire-iid-compat",[aF]:"fire-fcm",[lF]:"fire-fcm-compat",[cF]:"fire-perf",[uF]:"fire-perf-compat",[dF]:"fire-rc",[hF]:"fire-rc-compat",[fF]:"fire-gcs",[pF]:"fire-gcs-compat",[mF]:"fire-fst",[_F]:"fire-fst-compat",[gF]:"fire-vertex","fire-js":"fire-js",[vF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new Map,Qs=new Map,Js=new Map;function ja(t,e){try{t.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ZC(t,e){t.container.addOrOverwriteComponent(e)}function Zr(t){const e=t.name;if(Js.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;Js.set(e,t);for(const n of Xr.values())ja(n,t);for(const n of Qs.values())ja(n,t);return!0}function eI(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function SF(t,e,n=Jr){eI(t,e).clearInstance(n)}function tI(t){return t.options!==void 0}function Ve(t){return t.settings!==void 0}function EF(){Js.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dn=new Xi("app","Firebase",CF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nI=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF extends nI{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Nn(ou,ap,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ug(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw dn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=yF;function cg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jr,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw dn.create("bad-app-name",{appName:String(i)});if(n||(n=BC()),!n)throw dn.create("no-options");const s=Xr.get(i);if(s){if(rp(n,s.options)&&rp(r,s.config))return s;throw dn.create("duplicate-app",{appName:i})}const o=new og(i);for(const l of Js.values())o.addComponent(l);const a=new nI(n,r,o);return Xr.set(i,a),a}function TF(t,e){if(mM()&&!WC())throw dn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;tI(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((d,u)=>Math.imul(31,d)+u.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw dn.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Qs.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new og(s);for(const c of Js.values())a.addComponent(c);const l=new IF(n,e,s,a);return Qs.set(s,l),l}function RF(t=Jr){const e=Xr.get(t);if(!e&&t===Jr&&BC())return cg();if(!e)throw dn.create("no-app",{appName:t});return e}function kF(){return Array.from(Xr.values())}async function ug(t){let e=!1;const n=t.name;Xr.has(n)?(e=!0,Xr.delete(n)):Qs.has(n)&&t.decRefCount()<=0&&(Qs.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Nn(t,e,n){var r;let i=(r=wF[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(a.join(" "));return}Zr(new pn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function rI(t,e){if(t!==null&&typeof t!="function")throw dn.create("invalid-log-argument");LM(t,e)}function iI(t){xM(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF="firebase-heartbeat-database",bF=1,$a="firebase-heartbeat-store";let Ah=null;function sI(){return Ah||(Ah=BM(NF,bF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($a)}catch(n){console.warn(n)}}}}).catch(t=>{throw dn.create("idb-open",{originalErrorMessage:t.message})})),Ah}async function PF(t){try{const n=(await sI()).transaction($a),r=await n.objectStore($a).get(oI(t));return await n.done,r}catch(e){if(e instanceof Ft)fr.warn(e.message);else{const n=dn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fr.warn(n.message)}}}async function Sy(t,e){try{const r=(await sI()).transaction($a,"readwrite");await r.objectStore($a).put(e,oI(t)),await r.done}catch(n){if(n instanceof Ft)fr.warn(n.message);else{const r=dn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fr.warn(r.message)}}}function oI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF=1024,xF=30*24*60*60*1e3;class LF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ey();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=xF}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ey(),{heartbeatsToSend:r,unsentEntries:i}=OF(this._heartbeatsCache.heartbeats),s=tu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return fr.warn(n),""}}}function Ey(){return new Date().toISOString().substring(0,10)}function OF(t,e=AF){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Cy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ru()?_M().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await PF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Cy(t){return tu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t){Zr(new pn("platform-logger",e=>new HM(e),"PRIVATE")),Zr(new pn("heartbeat",e=>new LF(e),"PRIVATE")),Nn(ou,ap,t),Nn(ou,ap,"esm2017"),Nn("fire-js","")}MF("");const FF=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ft,SDK_VERSION:ui,_DEFAULT_ENTRY_NAME:Jr,_addComponent:ja,_addOrOverwriteComponent:ZC,_apps:Xr,_clearComponents:EF,_components:Js,_getProvider:eI,_isFirebaseApp:tI,_isFirebaseServerApp:Ve,_registerComponent:Zr,_removeServiceInstance:SF,_serverApps:Qs,deleteApp:ug,getApp:RF,getApps:kF,initializeApp:cg,initializeServerApp:TF,onLog:rI,registerVersion:Nn,setLogLevel:iI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,n){this._delegate=e,this.firebase=n,ja(e,new pn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),ug(this._delegate)))}_getService(e,n=Jr){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Jr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){ja(this._delegate,e)}_addOrOverwriteComponent(e){ZC(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Iy=new Xi("app-compat","Firebase",VF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Nn,setLogLevel:iI,onLog:rI,apps:null,SDK_VERSION:ui,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:FF}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||Jr,!Qt(e,c))throw Iy.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,d={}){const u=cg(c,d);if(Qt(e,u.name))return e[u.name];const h=new t(u,n);return e[u.name]=h,h}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const d=c.name,u=d.replace("-compat","");if(Zr(c)&&c.type==="PUBLIC"){const h=(g=i())=>{if(typeof g[u]!="function")throw Iy.create("invalid-app-argument",{appName:d});return g[u]()};c.serviceProps!==void 0&&Ua(h,c.serviceProps),n[u]=h,t.prototype[u]=function(...g){return this._getService.bind(this,d).apply(this,c.multipleInstances?g:[])}}return c.type==="PUBLIC"?n[u]:null}function l(c,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){const t=jF(UF);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:aI,extendNamespace:e,createSubscribe:YC,ErrorFactory:Xi,deepExtend:Ua});function e(n){Ua(t,n)}return t}const $F=aI();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=new ml("@firebase/app-compat"),BF="@firebase/app-compat",zF="0.2.46";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(t){Nn(BF,zF,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=$C();if(t.firebase!==void 0){Ty.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Ty.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const qe=$F;WF();var HF="firebase",GF="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qe.registerVersion(HF,GF,"app-compat");function dg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Fo={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ls={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function lI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qF=KF,YF=lI,cI=new Xi("auth","Firebase",lI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=new ml("@firebase/auth");function QF(t,...e){au.logLevel<=pe.WARN&&au.warn(`Auth (${ui}): ${t}`,...e)}function yc(t,...e){au.logLevel<=pe.ERROR&&au.error(`Auth (${ui}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t,...e){throw fg(t,...e)}function Je(t,...e){return fg(t,...e)}function hg(t,e,n){const r=Object.assign(Object.assign({},YF()),{[e]:n});return new Xi("auth","Firebase",r).create(e,{appName:t.name})}function at(t){return hg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ho(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ft(t,"argument-error"),hg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cI.create(t,...e)}function k(t,e,...n){if(!t)throw fg(e,...n)}function $n(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yc(e),new Error(e)}function An(t,e){t||$n(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function pg(){return Ry()==="http:"||Ry()==="https:"}function Ry(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pg()||HC()||"connection"in navigator)?navigator.onLine:!0}function XF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n){this.shortDelay=e,this.longDelay=n,An(n>e,"Short delay should be less than long delay!"),this.isMobile=sg()||ud()}get(){return JF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t,e){An(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU=new gl(3e4,6e4);function je(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $e(t,e,n,r,i={}){return dI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Zi(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return gM()||(c.referrerPolicy="no-referrer"),uI.fetch()(hI(t,t.config.apiHost,n,a),c)})}async function dI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZF),e);try{const i=new nU(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Jo(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Jo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Jo(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw hg(t,d,c);ft(t,d)}}catch(i){if(i instanceof Ft)throw i;ft(t,"network-request-failed",{message:String(i)})}}async function yr(t,e,n,r,i={}){const s=await $e(t,e,n,r,i);return"mfaPendingCredential"in s&&ft(t,"multi-factor-auth-required",{_serverResponse:s}),s}function hI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?mg(t.config,i):`${t.config.apiScheme}://${i}`}function tU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Je(this.auth,"network-request-failed")),eU.get())})}}function Jo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Je(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t){return t!==void 0&&t.getResponse!==void 0}function Ny(t){return t!==void 0&&t.enterprise!==void 0}class fI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rU(t){return(await $e(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function pI(t,e){return $e(t,"GET","/v2/recaptchaConfig",je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iU(t,e){return $e(t,"POST","/v1/accounts:delete",e)}async function sU(t,e){return $e(t,"POST","/v1/accounts:update",e)}async function mI(t,e){return $e(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oU(t,e=!1){const n=Z(t),r=await n.getIdToken(e),i=hd(r);k(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ua(xh(i.auth_time)),issuedAtTime:ua(xh(i.iat)),expirationTime:ua(xh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function xh(t){return Number(t)*1e3}function hd(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yc("JWT malformed, contained fewer than 3 sections"),null;try{const i=nu(n);return i?JSON.parse(i):(yc("Failed to decode base64 JWT payload"),null)}catch(i){return yc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function by(t){const e=hd(t);return k(e,"internal-error"),k(typeof e.exp<"u","internal-error"),k(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ft&&aU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function aU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ua(this.lastLoginAt),this.creationTime=ua(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(t){var e;const n=t.auth,r=await t.getIdToken(),i=await pr(t,mI(n,{idToken:r}));k(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?gI(s.providerUserInfo):[],a=uU(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new lp(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,u)}async function cU(t){const e=Z(t);await za(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function gI(t){return t.map(e=>{var{providerId:n}=e,r=dg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dU(t,e){const n=await dI(t,{},async()=>{const r=Zi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=hI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",uI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hU(t,e){return $e(t,"POST","/v2/accounts:revokeToken",je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){k(e.idToken,"internal-error"),k(typeof e.idToken<"u","internal-error"),k(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):by(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){k(e.length!==0,"internal-error");const n=by(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(k(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await dU(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new xs;return r&&(k(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(k(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(k(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xs,this.toJSON())}_performRefresh(){return $n("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,e){k(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class nr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await pr(this,this.stsTokenManager.getToken(this.auth,e));return k(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oU(this,e)}reload(){return cU(this)}_assign(e){this!==e&&(k(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await za(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ve(this.auth.app))return Promise.reject(at(this.auth));const e=await this.getIdToken();return await pr(this,iU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const u=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,f=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:I,isAnonymous:R,providerData:A,stsTokenManager:x}=n;k(_&&x,e,"internal-error");const V=xs.fromJSON(this.name,x);k(typeof _=="string",e,"internal-error"),Er(u,e.name),Er(h,e.name),k(typeof I=="boolean",e,"internal-error"),k(typeof R=="boolean",e,"internal-error"),Er(g,e.name),Er(m,e.name),Er(y,e.name),Er(T,e.name),Er(v,e.name),Er(f,e.name);const ce=new nr({uid:_,auth:e,email:h,emailVerified:I,displayName:u,isAnonymous:R,photoURL:m,phoneNumber:g,tenantId:y,stsTokenManager:V,createdAt:v,lastLoginAt:f});return A&&Array.isArray(A)&&(ce.providerData=A.map(z=>Object.assign({},z))),T&&(ce._redirectEventId=T),ce}static async _fromIdTokenResponse(e,n,r=!1){const i=new xs;i.updateFromServerResponse(n);const s=new nr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await za(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];k(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?gI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new xs;a.updateFromIdToken(r);const l=new nr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new lp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=new Map;function Kt(t){An(t instanceof Function,"Expected a class definition");let e=Py.get(t);return e?(An(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Py.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_I.type="NONE";const Xs=_I;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t,e,n){return`firebase:${t}:${e}:${n}`}class Ls{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ki(this.userKey,i.apiKey,s),this.fullPersistenceKey=ki("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?nr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ls(Kt(Xs),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Kt(Xs);const o=ki(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const u=nr._fromJSON(e,d);c!==s&&(a=u),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ls(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ls(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EI(e))return"Blackberry";if(CI(e))return"Webos";if(yI(e))return"Safari";if((e.includes("chrome/")||wI(e))&&!e.includes("edge/"))return"Chrome";if(_l(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function vI(t=Xe()){return/firefox\//i.test(t)}function yI(t=Xe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wI(t=Xe()){return/crios\//i.test(t)}function SI(t=Xe()){return/iemobile/i.test(t)}function _l(t=Xe()){return/android/i.test(t)}function EI(t=Xe()){return/blackberry/i.test(t)}function CI(t=Xe()){return/webos/i.test(t)}function vl(t=Xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fU(t=Xe()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function pU(t=Xe()){var e;return vl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mU(){return GC()&&document.documentMode===10}function II(t=Xe()){return vl(t)||_l(t)||CI(t)||EI(t)||/windows phone/i.test(t)||SI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t,e=[]){let n;switch(t){case"Browser":n=Ay(Xe());break;case"Worker":n=`${Ay(Xe())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ui}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _U(t,e={}){return $e(t,"GET","/v2/passwordPolicy",je(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU=6;class yU{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:vU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xy(this),this.idTokenSubscription=new xy(this),this.beforeStateQueue=new gU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kt(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ls.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mI(this,{idToken:e}),r=await nr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ve(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return k(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await za(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ve(this.app))return Promise.reject(at(this));const n=e?Z(e):null;return n&&k(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&k(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ve(this.app)?Promise.reject(at(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ve(this.app)?Promise.reject(at(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _U(this),n=new yU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Kt(e)||this._popupRedirectResolver;k(n,this,"argument-error"),this.redirectPersistenceManager=await Ls.create(this,[Kt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(k(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&QF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fe(t){return Z(t)}class xy{constructor(e){this.auth=e,this.observer=null,this.addObserver=YC(n=>this.observer=n)}get next(){return k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SU(t){yl=t}function gg(t){return yl.loadJS(t)}function EU(){return yl.recaptchaV2Script}function CU(){return yl.recaptchaEnterpriseScript}function IU(){return yl.gapiScript}function RI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=500,RU=6e4,rc=1e12;class kU{constructor(e){this.auth=e,this.counter=rc,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new PU(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||rc;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||rc;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||rc;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class NU{constructor(){this.enterprise=new bU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class PU{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;k(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=AU(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},RU)},TU))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function AU(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const xU="recaptcha-enterprise",da="NO_RECAPTCHA";class kI{constructor(e){this.type=xU,this.auth=Fe(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{pI(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new fI(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Ny(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(da)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NU().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Ny(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=CU();l.length!==0&&(l+=a),gg(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Uo(t,e,n,r=!1,i=!1){const s=new kI(t);let o;if(i)o=da;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Hr(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Uo(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Uo(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Uo(t,e,n);return r(t,a).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const d=await Uo(t,e,n,!1,!0);return r(t,d)}return Promise.reject(l)})}else{const a=await Uo(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function LU(t){const e=Fe(t),n=await pI(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new fI(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new kI(e).verify()}function OU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Kt);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function DU(t,e,n){const r=Fe(t);k(r._canInitEmulator,r,"emulator-config-failed"),k(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=NI(e),{host:o,port:a}=MU(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||FU()}function NI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MU(t){const e=NI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ly(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ly(o)}}}function Ly(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function FU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $n("not implemented")}_getIdTokenResponse(e){return $n("not implemented")}_linkToIdToken(e,n){return $n("not implemented")}_getReauthenticationResolver(e){return $n("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(t,e){return $e(t,"POST","/v1/accounts:resetPassword",je(t,e))}async function UU(t,e){return $e(t,"POST","/v1/accounts:update",e)}async function VU(t,e){return $e(t,"POST","/v1/accounts:signUp",e)}async function jU(t,e){return $e(t,"POST","/v1/accounts:update",je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $U(t,e){return yr(t,"POST","/v1/accounts:signInWithPassword",je(t,e))}async function fd(t,e){return $e(t,"POST","/v1/accounts:sendOobCode",je(t,e))}async function BU(t,e){return fd(t,e)}async function zU(t,e){return fd(t,e)}async function WU(t,e){return fd(t,e)}async function HU(t,e){return fd(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GU(t,e){return yr(t,"POST","/v1/accounts:signInWithEmailLink",je(t,e))}async function KU(t,e){return yr(t,"POST","/v1/accounts:signInWithEmailLink",je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends fo{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Wa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hr(e,n,"signInWithPassword",$U,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return GU(e,{email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hr(e,r,"signUpPassword",VU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return KU(e,{idToken:n,email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ar(t,e){return yr(t,"POST","/v1/accounts:signInWithIdp",je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU="http://localhost";class Hn extends fo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ft("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=dg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Hn(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ar(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ar(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ar(e,n)}buildRequest(){const e={requestUri:qU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oy(t,e){return $e(t,"POST","/v1/accounts:sendVerificationCode",je(t,e))}async function YU(t,e){return yr(t,"POST","/v1/accounts:signInWithPhoneNumber",je(t,e))}async function QU(t,e){const n=await yr(t,"POST","/v1/accounts:signInWithPhoneNumber",je(t,e));if(n.temporaryProof)throw Jo(t,"account-exists-with-different-credential",n);return n}const JU={USER_NOT_FOUND:"user-not-found"};async function XU(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return yr(t,"POST","/v1/accounts:signInWithPhoneNumber",je(t,n),JU)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends fo{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ni({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ni({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return YU(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return QU(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return XU(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Ni({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function e3(t){const e=Is(Qo(t)).link,n=e?Is(Qo(e)).deep_link_id:null,r=Is(Qo(t)).deep_link_id;return(r?Is(Qo(r)).link:null)||r||n||e||t}class pd{constructor(e){var n,r,i,s,o,a;const l=Is(Qo(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,u=ZU((i=l.mode)!==null&&i!==void 0?i:null);k(c&&d&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=e3(e);try{return new pd(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.providerId=di.PROVIDER_ID}static credential(e,n){return Wa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=pd.parseLink(n);return k(r,"argument-error"),Wa._fromEmailAndCode(e,r.code,r.tenantId)}}di.PROVIDER_ID="password";di.EMAIL_PASSWORD_SIGN_IN_METHOD="password";di.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends wr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Os extends po{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return k("providerId"in n&&"signInMethod"in n,"argument-error"),Hn._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return k(e.idToken||e.accessToken,"argument-error"),Hn._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Os.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Os.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Os(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn extends po{constructor(){super("facebook.com")}static credential(e){return Hn._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fn.credential(e.oauthAccessToken)}catch{return null}}}Fn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends po{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hn._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Un.credential(n,r)}catch{return null}}}Un.GOOGLE_SIGN_IN_METHOD="google.com";Un.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn extends po{constructor(){super("github.com")}static credential(e){return Hn._fromParams({providerId:Vn.PROVIDER_ID,signInMethod:Vn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vn.credentialFromTaggedObject(e)}static credentialFromError(e){return Vn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vn.credential(e.oauthAccessToken)}catch{return null}}}Vn.GITHUB_SIGN_IN_METHOD="github.com";Vn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3="http://localhost";class Zs extends fo{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return ar(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ar(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ar(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Zs(r,s)}static _create(e,n){return new Zs(e,n)}buildRequest(){return{requestUri:t3,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="saml.";class lu extends wr{constructor(e){k(e.startsWith(n3),"argument-error"),super(e)}static credentialFromResult(e){return lu.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return lu.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Zs.fromJSON(e);return k(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Zs._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends po{constructor(){super("twitter.com")}static credential(e,n){return Hn._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return jn.credential(n,r)}catch{return null}}}jn.TWITTER_SIGN_IN_METHOD="twitter.com";jn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(t,e){return yr(t,"POST","/v1/accounts:signUp",je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await nr._fromIdTokenResponse(e,r,i),o=Dy(r);return new mn({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Dy(r);return new mn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Dy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3(t){var e;if(Ve(t.app))return Promise.reject(at(t));const n=Fe(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new mn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await PI(n,{returnSecureToken:!0}),i=await mn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends Ft{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,cu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new cu(e,n,r,i)}}function AI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?cu._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i3(t,e){const n=Z(t);await md(!0,n,e);const{providerUserInfo:r}=await sU(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=xI(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function _g(t,e,n=!1){const r=await pr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return mn._forOperation(t,"link",r)}async function md(t,e,n){await za(e);const r=xI(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";k(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(t,e,n=!1){const{auth:r}=t;if(Ve(r.app))return Promise.reject(at(r));const i="reauthenticate";try{const s=await pr(t,AI(r,i,e,t),n);k(s.idToken,r,"internal-error");const o=hd(s.idToken);k(o,r,"internal-error");const{sub:a}=o;return k(t.uid===a,r,"user-mismatch"),mn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ft(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(t,e,n=!1){if(Ve(t.app))return Promise.reject(at(t));const r="signIn",i=await AI(t,r,e),s=await mn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function gd(t,e){return OI(Fe(t),e)}async function DI(t,e){const n=Z(t);return await md(!1,n,e.providerId),_g(n,e)}async function MI(t,e){return LI(Z(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s3(t,e){return yr(t,"POST","/v1/accounts:signInWithCustomToken",je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o3(t,e){if(Ve(t.app))return Promise.reject(at(t));const n=Fe(t),r=await s3(n,{token:e,returnSecureToken:!0}),i=await mn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?vg._fromServerResponse(e,n):"totpInfo"in n?yg._fromServerResponse(e,n):ft(e,"internal-error")}}class vg extends wl{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new vg(n)}}class yg extends wl{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new yg(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t,e,n){var r;k(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),k(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(k(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(k(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wg(t){const e=Fe(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function a3(t,e,n){const r=Fe(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&_d(r,i,n),await Hr(r,i,"getOobCode",zU,"EMAIL_PASSWORD_PROVIDER")}async function l3(t,e,n){await bI(Z(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&wg(t),r})}async function c3(t,e){await jU(Z(t),{oobCode:e})}async function FI(t,e){const n=Z(t),r=await bI(n,{oobCode:e}),i=r.requestType;switch(k(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":k(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":k(r.mfaInfo,n,"internal-error");default:k(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=wl._fromServerResponse(Fe(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function u3(t,e){const{data:n}=await FI(Z(t),e);return n.email}async function d3(t,e,n){if(Ve(t.app))return Promise.reject(at(t));const r=Fe(t),o=await Hr(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PI,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&wg(t),l}),a=await mn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function h3(t,e,n){return Ve(t.app)?Promise.reject(at(t)):gd(Z(t),di.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&wg(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f3(t,e,n){const r=Fe(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){k(a.handleCodeInApp,r,"argument-error"),a&&_d(r,o,a)}s(i,n),await Hr(r,i,"getOobCode",WU,"EMAIL_PASSWORD_PROVIDER")}function p3(t,e){const n=pd.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function m3(t,e,n){if(Ve(t.app))return Promise.reject(at(t));const r=Z(t),i=di.credentialWithLink(e,n||Ba());return k(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),gd(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3(t,e){return $e(t,"POST","/v1/accounts:createAuthUri",je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _3(t,e){const n=pg()?Ba():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await g3(Z(t),r);return i||[]}async function v3(t,e){const n=Z(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&_d(n.auth,i,e);const{email:s}=await BU(n.auth,i);s!==t.email&&await t.reload()}async function y3(t,e,n){const r=Z(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&_d(r.auth,s,n);const{email:o}=await HU(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w3(t,e){return $e(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S3(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Z(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await pr(r,w3(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function E3(t,e){const n=Z(t);return Ve(n.auth.app)?Promise.reject(at(n.auth)):UI(n,e,null)}function C3(t,e){return UI(Z(t),null,e)}async function UI(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await pr(t,UU(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=hd(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Ds(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new T3(s,i);case"github.com":return new R3(s,i);case"google.com":return new k3(s,i);case"twitter.com":return new N3(s,i,t.screenName||null);case"custom":case"anonymous":return new Ds(s,null);default:return new Ds(s,r,i)}}class Ds{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class VI extends Ds{constructor(e,n,r,i){super(e,n,r),this.username=i}}class T3 extends Ds{constructor(e,n){super(e,"facebook.com",n)}}class R3 extends VI{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class k3 extends Ds{constructor(e,n){super(e,"google.com",n)}}class N3 extends VI{constructor(e,n,r){super(e,"twitter.com",n,r)}}function b3(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:I3(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Ci("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ci("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Ci._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ci._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Fe(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>wl._fromServerResponse(r,a));k(i.mfaPendingCredential,r,"internal-error");const o=Ci._fromMfaPendingCredential(i.mfaPendingCredential);return new Sg(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const d=await mn._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return k(n.user,r,"internal-error"),mn._forOperation(n.user,n.operationType,c);default:ft(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function P3(t,e){var n;const r=Z(t),i=e;return k(e.customData.operationType,r,"argument-error"),k((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Sg._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t,e){return $e(t,"POST","/v2/accounts/mfaEnrollment:start",je(t,e))}function A3(t,e){return $e(t,"POST","/v2/accounts/mfaEnrollment:finalize",je(t,e))}function x3(t,e){return $e(t,"POST","/v2/accounts/mfaEnrollment:withdraw",je(t,e))}class Eg{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>wl._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Eg(e)}async getSession(){return Ci._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await pr(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await pr(this.user,x3(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Lh=new WeakMap;function L3(t){const e=Z(t);return Lh.has(e)||Lh.set(e,Eg._fromUser(e)),Lh.get(e)}const uu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uu,"1"),this.storage.removeItem(uu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=1e3,D3=10;class $I extends jI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=II(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);mU()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,D3):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},O3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$I.type="LOCAL";const Cg=$I;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI extends jI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BI.type="SESSION";const Vi=BI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new vd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await M3(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Sl("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(u){const h=u;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(){return window}function U3(t){ze().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(){return typeof ze().WorkerGlobalScope<"u"&&typeof ze().importScripts=="function"}async function V3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $3(){return Ig()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="firebaseLocalStorageDb",B3=1,du="firebaseLocalStorage",WI="fbase_key";class El{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yd(t,e){return t.transaction([du],e?"readwrite":"readonly").objectStore(du)}function z3(){const t=indexedDB.deleteDatabase(zI);return new El(t).toPromise()}function cp(){const t=indexedDB.open(zI,B3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(du,{keyPath:WI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(du)?e(r):(r.close(),await z3(),e(await cp()))})})}async function Fy(t,e,n){const r=yd(t,!0).put({[WI]:e,value:n});return new El(r).toPromise()}async function W3(t,e){const n=yd(t,!1).get(e),r=await new El(n).toPromise();return r===void 0?null:r.value}function Uy(t,e){const n=yd(t,!0).delete(e);return new El(n).toPromise()}const H3=800,G3=3;class HI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>G3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ig()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vd._getInstance($3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await V3(),!this.activeServiceWorker)return;this.sender=new F3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await Fy(e,uu,"1"),await Uy(e,uu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Fy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>W3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Uy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=yd(i,!1).getAll();return new El(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),H3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HI.type="LOCAL";const Ha=HI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t,e){return $e(t,"POST","/v2/accounts/mfaSignIn:start",je(t,e))}function K3(t,e){return $e(t,"POST","/v2/accounts/mfaSignIn:finalize",je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=RI("rcb"),q3=new gl(3e4,6e4);class Y3{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ze().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return k(Q3(n),e,"argument-error"),this.shouldResolveImmediately(n)&&ky(ze().grecaptcha)?Promise.resolve(ze().grecaptcha):new Promise((r,i)=>{const s=ze().setTimeout(()=>{i(Je(e,"network-request-failed"))},q3.get());ze()[Oh]=()=>{ze().clearTimeout(s),delete ze()[Oh];const a=ze().grecaptcha;if(!a||!ky(a)){i(Je(e,"internal-error"));return}const l=a.render;a.render=(c,d)=>{const u=l(c,d);return this.counter++,u},this.hostLanguage=n,r(a)};const o=`${EU()}?${Zi({onload:Oh,render:"explicit",hl:n})}`;gg(o).catch(()=>{clearTimeout(s),i(Je(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=ze().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Q3(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class J3{async load(e){return new kU(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="recaptcha",X3={theme:"light",type:"image"};let Z3=class{constructor(e,n,r=Object.assign({},X3)){this.parameters=r,this.type=ha,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fe(e),this.isInvisible=this.parameters.size==="invisible",k(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;k(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new J3:new Y3,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){k(!this.parameters.sitekey,this.auth,"argument-error"),k(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),k(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=ze()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){k(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){k(pg()&&!Ig(),this.auth,"internal-error"),await e4(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await rU(this.auth);k(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return k(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function e4(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ni._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function t4(t,e,n){if(Ve(t.app))return Promise.reject(at(t));const r=Fe(t),i=await wd(r,e,Z(n));return new Tg(i,s=>gd(r,s))}async function n4(t,e,n){const r=Z(t);await md(!1,r,"phone");const i=await wd(r.auth,e,Z(n));return new Tg(i,s=>DI(r,s))}async function r4(t,e,n){const r=Z(t);if(Ve(r.auth.app))return Promise.reject(at(r.auth));const i=await wd(r.auth,e,Z(n));return new Tg(i,s=>MI(r,s))}async function wd(t,e,n){var r;if(!t._getRecaptchaConfig())try{await LU(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){k(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Hr(t,o,"mfaSmsEnrollment",async(d,u)=>{if(u.phoneEnrollmentInfo.captchaResponse===da){k((n==null?void 0:n.type)===ha,d,"argument-error");const h=await Dh(d,u,n);return My(d,h)}return My(d,u)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{k(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;k(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Hr(t,a,"mfaSmsSignIn",async(u,h)=>{if(h.phoneSignInInfo.captchaResponse===da){k((n==null?void 0:n.type)===ha,u,"argument-error");const g=await Dh(u,h,n);return Vy(u,g)}return Vy(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Hr(t,s,"sendVerificationCode",async(c,d)=>{if(d.captchaResponse===da){k((n==null?void 0:n.type)===ha,c,"argument-error");const u=await Dh(c,d,n);return Oy(c,u)}return Oy(c,d)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function i4(t,e){const n=Z(t);if(Ve(n.auth.app))return Promise.reject(at(n.auth));await _g(n,e)}async function Dh(t,e,n){k(n.type===ha,t,"argument-error");const r=await n.verify();k(typeof r=="string",t,"argument-error");const i=Object.assign({},e);if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ji=class wc{constructor(e){this.providerId=wc.PROVIDER_ID,this.auth=Fe(e)}verifyPhoneNumber(e,n){return wd(this.auth,e,Z(n))}static credential(e,n){return Ni._fromVerification(e,n)}static credentialFromResult(e){const n=e;return wc.credentialFromTaggedObject(n)}static credentialFromError(e){return wc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ni._fromTokenResponse(n,r):null}};ji.PROVIDER_ID="phone";ji.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t,e){return e?Kt(e):(k(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg extends fo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ar(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ar(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ar(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function s4(t){return OI(t.auth,new Rg(t),t.bypassAuthState)}function o4(t){const{auth:e,user:n}=t;return k(n,e,"internal-error"),LI(n,new Rg(t),t.bypassAuthState)}async function a4(t){const{auth:e,user:n}=t;return k(n,e,"internal-error"),_g(n,new Rg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return s4;case"linkViaPopup":case"linkViaRedirect":return a4;case"reauthViaPopup":case"reauthViaRedirect":return o4;default:ft(this.auth,"internal-error")}}resolve(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=new gl(2e3,1e4);async function c4(t,e,n){if(Ve(t.app))return Promise.reject(Je(t,"operation-not-supported-in-this-environment"));const r=Fe(t);ho(t,e,wr);const i=es(r,n);return new rr(r,"signInViaPopup",e,i).executeNotNull()}async function u4(t,e,n){const r=Z(t);if(Ve(r.auth.app))return Promise.reject(Je(r.auth,"operation-not-supported-in-this-environment"));ho(r.auth,e,wr);const i=es(r.auth,n);return new rr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function d4(t,e,n){const r=Z(t);ho(r.auth,e,wr);const i=es(r.auth,n);return new rr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class rr extends GI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,rr.currentPopupAction&&rr.currentPopupAction.cancel(),rr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return k(e,this.auth,"internal-error"),e}async onExecution(){An(this.filter.length===1,"Popup operations only handle one event");const e=Sl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Je(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Je(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Je(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,l4.get())};e()}}rr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4="pendingRedirect",fa=new Map;class f4 extends GI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fa.get(this.auth._key());if(!e){try{const r=await p4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fa.set(this.auth._key(),e)}return this.bypassAuthState||fa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function p4(t,e){const n=qI(e),r=KI(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function kg(t,e){return KI(t)._set(qI(e),"true")}function m4(){fa.clear()}function Ng(t,e){fa.set(t._key(),e)}function KI(t){return Kt(t._redirectPersistence)}function qI(t){return ki(h4,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t,e,n){return _4(t,e,n)}async function _4(t,e,n){if(Ve(t.app))return Promise.reject(at(t));const r=Fe(t);ho(t,e,wr),await r._initializationPromise;const i=es(r,n);return await kg(i,r),i._openRedirect(r,e,"signInViaRedirect")}function v4(t,e,n){return y4(t,e,n)}async function y4(t,e,n){const r=Z(t);if(ho(r.auth,e,wr),Ve(r.auth.app))return Promise.reject(at(r.auth));await r.auth._initializationPromise;const i=es(r.auth,n);await kg(i,r.auth);const s=await YI(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function w4(t,e,n){return S4(t,e,n)}async function S4(t,e,n){const r=Z(t);ho(r.auth,e,wr),await r.auth._initializationPromise;const i=es(r.auth,n);await md(!1,r,e.providerId),await kg(i,r.auth);const s=await YI(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function E4(t,e){return await Fe(t)._initializationPromise,Sd(t,e,!1)}async function Sd(t,e,n=!1){if(Ve(t.app))return Promise.reject(at(t));const r=Fe(t),i=es(r,e),o=await new f4(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function YI(t){const e=Sl(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=10*60*1e3;class QI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!I4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!JI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Je(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C4&&this.cachedEventUids.clear(),this.cachedEventUids.has(jy(e))}saveEventToCache(e){this.cachedEventUids.add(jy(e)),this.lastProcessedEventTime=Date.now()}}function jy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function I4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(t,e={}){return $e(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R4=/^https?/;async function k4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XI(t);for(const n of e)try{if(N4(n))return}catch{}ft(t,"unauthorized-domain")}function N4(t){const e=Ba(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!R4.test(n))return!1;if(T4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new gl(3e4,6e4);function $y(){const t=ze().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function P4(t){return new Promise((e,n)=>{var r,i,s;function o(){$y(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$y(),n(Je(t,"network-request-failed"))},timeout:b4.get()})}if(!((i=(r=ze().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ze().gapi)===null||s===void 0)&&s.load)o();else{const a=RI("iframefcb");return ze()[a]=()=>{gapi.load?o():n(Je(t,"network-request-failed"))},gg(`${IU()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Sc=null,e})}let Sc=null;function A4(t){return Sc=Sc||P4(t),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=new gl(5e3,15e3),L4="__/auth/iframe",O4="emulator/auth/iframe",D4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},M4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F4(t){const e=t.config;k(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?mg(e,O4):`https://${t.config.authDomain}/${L4}`,r={apiKey:e.apiKey,appName:t.name,v:ui},i=M4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Zi(r).slice(1)}`}async function U4(t){const e=await A4(t),n=ze().gapi;return k(n,t,"internal-error"),e.open({where:document.body,url:F4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Je(t,"network-request-failed"),a=ze().setTimeout(()=>{s(o)},x4.get());function l(){ze().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j4=500,$4=600,B4="_blank",z4="http://localhost";class By{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function W4(t,e,n,r=j4,i=$4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},V4),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Xe().toLowerCase();n&&(a=wI(c)?B4:n),vI(c)&&(e=e||z4,l.scrollbars="yes");const d=Object.entries(l).reduce((h,[g,m])=>`${h}${g}=${m},`,"");if(pU(c)&&a!=="_self")return H4(e||"",a),new By(null);const u=window.open(e||"",a,d);k(u,t,"popup-blocked");try{u.focus()}catch{}return new By(u)}function H4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4="__/auth/handler",K4="emulator/auth/handler",q4=encodeURIComponent("fac");async function up(t,e,n,r,i,s){k(t.config.authDomain,t,"auth-domain-config-required"),k(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ui,eventId:i};if(e instanceof wr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",iu(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,u]of Object.entries(s||{}))o[d]=u}if(e instanceof po){const d=e.getScopes().filter(u=>u!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${q4}=${encodeURIComponent(l)}`:"";return`${Y4(t)}?${Zi(a).slice(1)}${c}`}function Y4({config:t}){return t.emulator?mg(t,K4):`https://${t.authDomain}/${G4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="webStorageSupport";class Q4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vi,this._completeRedirectFn=Sd,this._overrideRedirectResult=Ng}async _openPopup(e,n,r,i){var s;An((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await up(e,n,r,Ba(),i);return W4(e,o,Sl())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await up(e,n,r,Ba(),i);return U3(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(An(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await U4(e),r=new QI(e);return n.register("authEvent",i=>(k(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mh,{type:Mh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Mh];o!==void 0&&n(!!o),ft(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=k4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return II()||yI()||vl()}}const J4=Q4;class X4{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return $n("unexpected MultiFactorSessionType")}}}class bg extends X4{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new bg(e)}_finalizeEnroll(e,n,r){return A3(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return K3(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class ZI{constructor(){}static assertion(e){return bg._fromCredential(e)}}ZI.FACTOR_ID="phone";var zy="@firebase/auth",Wy="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tV(t){Zr(new pn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;k(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TI(t)},c=new wU(r,i,s,l);return OU(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zr(new pn("auth-internal",e=>{const n=Fe(e.getProvider("auth").getImmediate());return(r=>new Z4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(zy,Wy,eV(t)),Nn(zy,Wy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=5*60;fM("authIdTokenMaxAge");function rV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}SU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Je("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",rV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tV("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=2e3;async function sV(t,e,n){var r;const{BuildInfo:i}=$i();An(e.sessionId,"AuthEvent did not contain a session ID");const s=await uV(e.sessionId),o={};return vl()?o.ibi=i.packageName:_l()?o.apn=i.packageName:ft(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,up(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function oV(t){const{BuildInfo:e}=$i(),n={};vl()?n.iosBundleId=e.packageName:_l()?n.androidPackageName=e.packageName:ft(t,"operation-not-supported-in-this-environment"),await XI(t,n)}function aV(t){const{cordova:e}=$i();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,fU()?"_blank":"_system","location=yes"),n(i)})})}async function lV(t,e,n){const{cordova:r}=$i();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var u;s();const h=(u=r.plugins.browsertab)===null||u===void 0?void 0:u.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(Je(t,"redirect-cancelled-by-user"))},iV))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),_l()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{i()}}function cV(t){var e,n,r,i,s,o,a,l,c,d;const u=$i();k(typeof((e=u==null?void 0:u.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),k(typeof((n=u==null?void 0:u.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),k(typeof((s=(i=(r=u==null?void 0:u.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),k(typeof((l=(a=(o=u==null?void 0:u.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),k(typeof((d=(c=u==null?void 0:u.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function uV(t){const e=dV(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function dV(t){if(An(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=20;class fV extends QI{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function pV(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:_V(),postBody:null,tenantId:t.tenantId,error:Je(t,"no-auth-event")}}function mV(t,e){return dp()._set(hp(t),e)}async function Hy(t){const e=await dp()._get(hp(t));return e&&await dp()._remove(hp(t)),e}function gV(t,e){var n,r;const i=yV(e);if(i.includes("/__/auth/callback")){const s=Ec(i),o=s.firebaseError?vV(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?Je(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function _V(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<hV;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function dp(){return Kt(Cg)}function hp(t){return ki("authEvent",t.config.apiKey,t.name)}function vV(t){try{return JSON.parse(t)}catch{return null}}function yV(t){const e=Ec(t),n=e.link?decodeURIComponent(e.link):void 0,r=Ec(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Ec(i).link||i||r||n||t}function Ec(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Is(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=500;class SV{constructor(){this._redirectPersistence=Vi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Sd,this._overrideRedirectResult=Ng}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new fV(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){ft(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){cV(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),m4(),await this._originValidation(e);const o=pV(e,r,i);await mV(e,o);const a=await sV(e,o,n),l=await aV(a);return lV(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oV(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=$i(),o=setTimeout(async()=>{await Hy(e),n.onEvent(Gy())},wV),a=async d=>{clearTimeout(o);const u=await Hy(e);let h=null;u&&(d!=null&&d.url)&&(h=gV(u,d.url)),n.onEvent(h||Gy())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;$i().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&a({url:d}),typeof l=="function")try{l(d)}catch(u){console.error(u)}}}}const EV=SV;function Gy(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Je("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(t,e){Fe(t)._logFramework(e)}var IV="@firebase/auth-compat",TV="0.5.16";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=1e3;function pa(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function kV(){return pa()==="http:"||pa()==="https:"}function eT(t=Xe()){return!!((pa()==="file:"||pa()==="ionic:"||pa()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function NV(){return ud()||zC()}function bV(){return GC()&&(document==null?void 0:document.documentMode)===11}function PV(t=Xe()){return/Edge\/\d+/.test(t)}function AV(t=Xe()){return bV()||PV(t)}function tT(){try{const t=self.localStorage,e=Sl();if(t)return t.setItem(e,"1"),t.removeItem(e),AV()?ru():!0}catch{return Pg()&&ru()}return!1}function Pg(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fh(){return(kV()||HC()||eT())&&!NV()&&tT()&&!Pg()}function nT(){return eT()&&typeof document<"u"}async function xV(){return nT()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},RV);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function LV(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt={LOCAL:"local",NONE:"none",SESSION:"session"},Vo=k,rT="persistence";function OV(t,e){if(Vo(Object.values(Wt).includes(e),t,"invalid-persistence-type"),ud()){Vo(e!==Wt.SESSION,t,"unsupported-persistence-type");return}if(zC()){Vo(e===Wt.NONE,t,"unsupported-persistence-type");return}if(Pg()){Vo(e===Wt.NONE||e===Wt.LOCAL&&ru(),t,"unsupported-persistence-type");return}Vo(e===Wt.NONE||tT(),t,"unsupported-persistence-type")}async function fp(t){await t._initializationPromise;const e=iT(),n=ki(rT,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function DV(t,e){const n=iT();if(!n)return[];const r=ki(rT,t,e);switch(n.getItem(r)){case Wt.NONE:return[Xs];case Wt.LOCAL:return[Ha,Vi];case Wt.SESSION:return[Vi];default:return[]}}function iT(){var t;try{return((t=LV())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=k;class xr{constructor(){this.browserResolver=Kt(J4),this.cordovaResolver=Kt(EV),this.underlyingResolver=null,this._redirectPersistence=Vi,this._completeRedirectFn=Sd,this._overrideRedirectResult=Ng}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return nT()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return MV(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await xV();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t){return t.unwrap()}function FV(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t){return oT(t)}function VV(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new jV(t,P3(t,e))}else if(r){const i=oT(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function oT(t){const{_tokenResponse:e}=t instanceof Ft?t.customData:t;if(!e)return null;if(!(t instanceof Ft)&&"temporaryProof"in e&&"phoneNumber"in e)return ji.credentialFromResult(t);const n=e.providerId;if(!n||n===Fo.PASSWORD)return null;let r;switch(n){case Fo.GOOGLE:r=Un;break;case Fo.FACEBOOK:r=Fn;break;case Fo.GITHUB:r=Vn;break;case Fo.TWITTER:r=jn;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Zs._create(n,a):Hn._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new Os(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof Ft?r.credentialFromError(t):r.credentialFromResult(t)}function Nt(t,e){return e.catch(n=>{throw n instanceof Ft&&VV(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:UV(n),additionalUserInfo:b3(n),user:ir.getOrCreate(i)}})}async function pp(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Nt(t,n.confirm(r))}}class jV{constructor(e,n){this.resolver=n,this.auth=FV(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Nt(sT(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._delegate=e,this.multiFactor=L3(e)}static getOrCreate(e){return ir.USER_MAP.has(e)||ir.USER_MAP.set(e,new ir(e)),ir.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Nt(this.auth,DI(this._delegate,e))}async linkWithPhoneNumber(e,n){return pp(this.auth,n4(this._delegate,e,n))}async linkWithPopup(e){return Nt(this.auth,d4(this._delegate,e,xr))}async linkWithRedirect(e){return await fp(Fe(this.auth)),w4(this._delegate,e,xr)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Nt(this.auth,MI(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return pp(this.auth,r4(this._delegate,e,n))}reauthenticateWithPopup(e){return Nt(this.auth,u4(this._delegate,e,xr))}async reauthenticateWithRedirect(e){return await fp(Fe(this.auth)),v4(this._delegate,e,xr)}sendEmailVerification(e){return v3(this._delegate,e)}async unlink(e){return await i3(this._delegate,e),this}updateEmail(e){return E3(this._delegate,e)}updatePassword(e){return C3(this._delegate,e)}updatePhoneNumber(e){return i4(this._delegate,e)}updateProfile(e){return S3(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return y3(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ir.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=k;class mp{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;jo(r,"invalid-api-key",{appName:e.name}),jo(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?xr:void 0;this._delegate=n.initialize({options:{persistence:$V(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(qF),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ir.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){DU(this._delegate,e,n)}applyActionCode(e){return c3(this._delegate,e)}checkActionCode(e){return FI(this._delegate,e)}confirmPasswordReset(e,n){return l3(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Nt(this._delegate,d3(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return _3(this._delegate,e)}isSignInWithEmailLink(e){return p3(this._delegate,e)}async getRedirectResult(){jo(Fh(),this._delegate,"operation-not-supported-in-this-environment");const e=await E4(this._delegate,xr);return e?Nt(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){CV(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=Ky(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=Ky(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return f3(this._delegate,e,n)}sendPasswordResetEmail(e,n){return a3(this._delegate,e,n||void 0)}async setPersistence(e){OV(this._delegate,e);let n;switch(e){case Wt.SESSION:n=Vi;break;case Wt.LOCAL:n=await Kt(Ha)._isAvailable()?Ha:Cg;break;case Wt.NONE:n=Xs;break;default:return ft("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Nt(this._delegate,r3(this._delegate))}signInWithCredential(e){return Nt(this._delegate,gd(this._delegate,e))}signInWithCustomToken(e){return Nt(this._delegate,o3(this._delegate,e))}signInWithEmailAndPassword(e,n){return Nt(this._delegate,h3(this._delegate,e,n))}signInWithEmailLink(e,n){return Nt(this._delegate,m3(this._delegate,e,n))}signInWithPhoneNumber(e,n){return pp(this._delegate,t4(this._delegate,e,n))}async signInWithPopup(e){return jo(Fh(),this._delegate,"operation-not-supported-in-this-environment"),Nt(this._delegate,c4(this._delegate,e,xr))}async signInWithRedirect(e){return jo(Fh(),this._delegate,"operation-not-supported-in-this-environment"),await fp(this._delegate),g4(this._delegate,e,xr)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return u3(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}mp.Persistence=Wt;function Ky(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&ir.getOrCreate(o)),error:e,complete:n}}function $V(t,e){const n=DV(t,e);if(typeof self<"u"&&!n.includes(Ha)&&n.push(Ha),typeof window<"u")for(const r of[Cg,Vi])n.includes(r)||n.push(r);return n.includes(Xs)||n.push(Xs),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{static credential(e,n){return ji.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new ji(sT(qe.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Ag.PHONE_SIGN_IN_METHOD=ji.PHONE_SIGN_IN_METHOD;Ag.PROVIDER_ID=ji.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=k;class zV{constructor(e,n,r=qe.app()){var i;BV((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new Z3(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="auth-compat";function HV(t){t.INTERNAL.registerComponent(new pn(WV,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new mp(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ls.EMAIL_SIGNIN,PASSWORD_RESET:ls.PASSWORD_RESET,RECOVER_EMAIL:ls.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ls.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ls.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ls.VERIFY_EMAIL}},EmailAuthProvider:di,FacebookAuthProvider:Fn,GithubAuthProvider:Vn,GoogleAuthProvider:Un,OAuthProvider:Os,SAMLAuthProvider:lu,PhoneAuthProvider:Ag,PhoneMultiFactorGenerator:ZI,RecaptchaVerifier:zV,TwitterAuthProvider:jn,Auth:mp,AuthCredential:fo,Error:Ft}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(IV,TV)}HV(qe);var qy={};const Yy="@firebase/database",Qy="1.0.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aT="";function lT(t){aT=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ye(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Va(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Qt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new GV(e)}}catch{}return new KV},Ii=cT("localStorage"),gp=cT("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new ml("@firebase/database"),uT=function(){let t=1;return function(){return t++}}(),dT=function(t){const e=RM(t),n=new CM;n.update(e);const r=n.digest();return rg.encodeByteArray(r)},Cl=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Cl.apply(null,r):typeof r=="object"?e+=Ye(r):e+=r,e+=" "}return e};let bi=null,Jy=!0;const hT=function(t,e){P(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ms.logLevel=pe.VERBOSE,bi=Ms.log.bind(Ms),e&&gp.set("logging_enabled",!0)):typeof t=="function"?bi=t:(bi=null,gp.remove("logging_enabled"))},st=function(...t){if(Jy===!0&&(Jy=!1,bi===null&&gp.get("logging_enabled")===!0&&hT(!0)),bi){const e=Cl.apply(null,t);bi(e)}},Il=function(t){return function(...e){st(t,...e)}},_p=function(...t){const e="FIREBASE INTERNAL ERROR: "+Cl(...t);Ms.error(e)},Gn=function(...t){const e=`FIREBASE FATAL ERROR: ${Cl(...t)}`;throw Ms.error(e),new Error(e)},yt=function(...t){const e="FIREBASE WARNING: "+Cl(...t);Ms.warn(e)},qV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&yt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ed=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},YV=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ei="[MIN_NAME]",mr="[MAX_NAME]",ts=function(t,e){if(t===e)return 0;if(t===ei||e===mr)return-1;if(e===ei||t===mr)return 1;{const n=Xy(t),r=Xy(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},QV=function(t,e){return t===e?0:t<e?-1:1},$o=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ye(e))},xg=function(t){if(typeof t!="object"||t===null)return Ye(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ye(e[r]),n+=":",n+=xg(t[e[r]]);return n+="}",n},fT=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function lt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const pT=function(t){P(!Ed(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const d=c.join("");let u="";for(l=0;l<64;l+=8){let h=parseInt(d.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),u=u+h}return u.toLowerCase()},JV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},XV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ZV(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const ej=new RegExp("^-?(0*)\\d{1,10}$"),tj=-2147483648,nj=2147483647,Xy=function(t){if(ej.test(t)){const e=Number(t);if(e>=tj&&e<=nj)return e}return null},mo=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw yt("Exception was thrown by user callback.",n),e},Math.floor(0))}},rj=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ma=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){yt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(st("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yt(e)}}class Fs{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Fs.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="5",mT="v",gT="s",_T="r",vT="f",yT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wT="ls",ST="p",vp="ac",ET="websocket",CT="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ii.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ii.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function oj(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function TT(t,e,n){P(typeof e=="string","typeof type must == string"),P(typeof n=="object","typeof params must == object");let r;if(e===ET)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===CT)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);oj(t)&&(n.ns=t.namespace);const i=[];return lt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.counters_={}}incrementCounter(e,n=1){Qt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return lM(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh={},Vh={};function Og(t){const e=t.toString();return Uh[e]||(Uh[e]=new aj),Uh[e]}function lj(t,e){const n=t.toString();return Vh[n]||(Vh[n]=e()),Vh[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&mo(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="start",uj="close",dj="pLPCommand",hj="pRTLPCB",RT="id",kT="pw",NT="ser",fj="cb",pj="seg",mj="ts",gj="d",_j="dframe",bT=1870,PT=30,vj=bT-PT,yj=25e3,wj=3e4;class Lr{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Il(e),this.stats_=Og(n),this.urlFn=l=>(this.appCheckToken&&(l[vp]=this.appCheckToken),TT(n,CT,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new cj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(wj)),YV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Dg((...s)=>{const[o,a,l,c,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Zy)this.id=a,this.password=l;else if(o===uj)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Zy]="t",r[NT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[fj]=this.scriptTagHolder.uniqueCallbackIdentifier),r[mT]=Lg,this.transportSessionId&&(r[gT]=this.transportSessionId),this.lastSessionId&&(r[wT]=this.lastSessionId),this.applicationId&&(r[ST]=this.applicationId),this.appCheckToken&&(r[vp]=this.appCheckToken),typeof location<"u"&&location.hostname&&yT.test(location.hostname)&&(r[_T]=vT);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Lr.forceAllow_=!0}static forceDisallow(){Lr.forceDisallow_=!0}static isAvailable(){return Lr.forceAllow_?!0:!Lr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!JV()&&!XV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ye(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=jC(n),i=fT(r,vj);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[_j]="t",r[RT]=e,r[kT]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ye(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Dg{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=uT(),window[dj+this.uniqueCallbackIdentifier]=e,window[hj+this.uniqueCallbackIdentifier]=n,this.myIFrame=Dg.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){st("frame writing exception"),a.stack&&st(a.stack),st(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||st("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[RT]=this.myID,e[kT]=this.myPW,e[NT]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+PT+r.length<=bT;){const o=this.pendingSegs.shift();r=r+"&"+pj+i+"="+o.seg+"&"+mj+i+"="+o.ts+"&"+gj+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(yj)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{st("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=16384,Ej=45e3;let hu=null;typeof MozWebSocket<"u"?hu=MozWebSocket:typeof WebSocket<"u"&&(hu=WebSocket);class on{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Il(this.connId),this.stats_=Og(n),this.connURL=on.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[mT]=Lg,typeof location<"u"&&location.hostname&&yT.test(location.hostname)&&(o[_T]=vT),n&&(o[gT]=n),r&&(o[wT]=r),i&&(o[vp]=i),s&&(o[ST]=s),TT(e,ET,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ii.set("previous_websocket_failure",!0);try{let r;KC(),this.mySock=new hu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){on.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&hu!==null&&!on.forceDisallow_}static previouslyFailed(){return Ii.isInMemoryStorage||Ii.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ii.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Va(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(P(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ye(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=fT(n,Sj);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Ej))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}on.responsesRequiredToBeHealthy=2;on.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{static get ALL_TRANSPORTS(){return[Lr,on]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=on&&on.isAvailable();let r=n&&!on.previouslyFailed();if(e.webSocketOnly&&(n||yt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[on];else{const i=this.transports_=[];for(const s of eo.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);eo.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}eo.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=6e4,Ij=5e3,Tj=10*1024,Rj=100*1024,jh="t",e0="d",kj="s",t0="r",Nj="e",n0="o",r0="a",i0="n",s0="p",bj="h";class Pj{constructor(e,n,r,i,s,o,a,l,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Il("c:"+this.id+":"),this.transportManager_=new eo(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ma(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Rj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Tj?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(jh in e){const n=e[jh];n===r0?this.upgradeIfSecondaryHealthy_():n===t0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===n0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=$o("t",e),r=$o("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:s0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:r0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:i0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=$o("t",e),r=$o("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=$o(jh,e);if(e0 in e){const r=e[e0];if(n===bj){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===i0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===kj?this.onConnectionShutdown_(r):n===t0?this.onReset_(r):n===Nj?_p("Server Error: "+r):n===n0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_p("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Lg!==r&&yt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ma(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Cj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ma(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Ij))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:s0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ii.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.allowedEvents_=e,this.listeners_={},P(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){P(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends xT{static getInstance(){return new fu}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!sg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return P(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=32,a0=768;class fe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function de(){return new fe("")}function re(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ti(t){return t.pieces_.length-t.pieceNum_}function ve(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new fe(t.pieces_,e)}function Mg(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Aj(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ga(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function LT(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new fe(e,0)}function Ae(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof fe)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new fe(n,0)}function ie(t){return t.pieceNum_>=t.pieces_.length}function Et(t,e){const n=re(t),r=re(e);if(n===null)return e;if(n===r)return Et(ve(t),ve(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function xj(t,e){const n=Ga(t,0),r=Ga(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=ts(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Fg(t,e){if(ti(t)!==ti(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ln(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ti(t)>ti(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Lj{constructor(e,n){this.errorPrefix_=n,this.parts_=Ga(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=dd(this.parts_[r]);OT(this)}}function Oj(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=dd(e),OT(t)}function Dj(t){const e=t.parts_.pop();t.byteLength_-=dd(e),t.parts_.length>0&&(t.byteLength_-=1)}function OT(t){if(t.byteLength_>a0)throw new Error(t.errorPrefix_+"has a key path longer than "+a0+" bytes ("+t.byteLength_+").");if(t.parts_.length>o0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+o0+") or object contains a cycle "+_i(t))}function _i(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends xT{static getInstance(){return new Ug}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return P(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=1e3,Mj=60*5*1e3,l0=30*1e3,Fj=1.3,Uj=3e4,Vj="server_kill",c0=3;class lr extends AT{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=lr.nextPersistentConnectionId_++,this.log_=Il("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bo,this.maxReconnectDelay_=Mj,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!KC())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ug.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&fu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Ye(s)),P(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Pt,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),P(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),P(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;lr.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Qt(e,"w")){const r=Ui(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();yt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||EM(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=l0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=SM(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),P(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ye(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):_p("Unrecognized action received from server: "+Ye(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){P(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Bo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Uj&&(this.reconnectDelay_=Bo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Fj)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+lr.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(u){P(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(u)};this.realtime_={close:l,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[u,h]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?st("getToken() completed but was canceled"):(st("getToken() completed. Creating connection."),this.authToken_=u&&u.accessToken,this.appCheckToken_=h&&h.token,a=new Pj(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{yt(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(Vj)},s))}catch(u){this.log_("Failed to get token: "+u),o||(this.repoInfo_.nodeAdmin&&yt(u),l())}}}interrupt(e){st("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){st("Resuming connection for reason: "+e),delete this.interruptReasons_[e],iu(this.interruptReasons_)&&(this.reconnectDelay_=Bo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>xg(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new fe(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){st("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=c0&&(this.reconnectDelay_=l0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){st("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=c0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+aT.replace(/\./g,"-")]=1,sg()?e["framework.cordova"]=1:ud()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=fu.getInstance().currentlyOnline();return iu(this.interruptReasons_)&&e}}lr.nextPersistentConnectionId_=0;lr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new oe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new oe(ei,e),i=new oe(ei,n);return this.compare(r,i)!==0}minPost(){return oe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic;class DT extends Cd{static get __EMPTY_NODE(){return ic}static set __EMPTY_NODE(e){ic=e}compare(e,n){return ts(e.name,n.name)}isDefinedOn(e){throw uo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return oe.MIN}maxPost(){return new oe(mr,ic)}makePost(e,n){return P(typeof e=="string","KeyIndex indexValue must always be a string."),new oe(e,ic)}toString(){return".key"}}const Wn=new DT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class it{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??it.RED,this.left=i??xt.EMPTY_NODE,this.right=s??xt.EMPTY_NODE}copy(e,n,r,i,s){return new it(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return xt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return xt.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}it.RED=!0;it.BLACK=!1;class jj{copy(e,n,r,i,s){return this}insert(e,n,r){return new it(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class xt{constructor(e,n=xt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new xt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,it.BLACK,null,null))}remove(e){return new xt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,it.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new sc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new sc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new sc(this.root_,null,this.comparator_,!0,e)}}xt.EMPTY_NODE=new jj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(t,e){return ts(t.name,e.name)}function Vg(t,e){return ts(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yp;function Bj(t){yp=t}const MT=function(t){return typeof t=="number"?"number:"+pT(t):"string:"+t},FT=function(t){if(t.isLeafNode()){const e=t.val();P(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Qt(e,".sv"),"Priority must be a string or number.")}else P(t===yp||t.isEmpty(),"priority of unexpected type.");P(t===yp||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u0;class tt{static set __childrenNodeConstructor(e){u0=e}static get __childrenNodeConstructor(){return u0}constructor(e,n=tt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,P(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),FT(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new tt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:tt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ie(e)?this:re(e)===".priority"?this.priorityNode_:tt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:tt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=re(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(P(r!==".priority"||ti(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,tt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ve(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+MT(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=pT(this.value_):e+=this.value_,this.lazyHash_=dT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===tt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof tt.__childrenNodeConstructor?-1:(P(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=tt.VALUE_TYPE_ORDER.indexOf(n),s=tt.VALUE_TYPE_ORDER.indexOf(r);return P(i>=0,"Unknown leaf type: "+n),P(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}tt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UT,VT;function zj(t){UT=t}function Wj(t){VT=t}class Hj extends Cd{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ts(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return oe.MIN}maxPost(){return new oe(mr,new tt("[PRIORITY-POST]",VT))}makePost(e,n){const r=UT(e);return new oe(n,new tt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ee=new Hj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=Math.log(2);class Kj{constructor(e){const n=s=>parseInt(Math.log(s)/Gj,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pu=function(t,e,n,r){t.sort(e);const i=function(l,c){const d=c-l;let u,h;if(d===0)return null;if(d===1)return u=t[l],h=n?n(u):u,new it(h,u.node,it.BLACK,null,null);{const g=parseInt(d/2,10)+l,m=i(l,g),y=i(g+1,c);return u=t[g],h=n?n(u):u,new it(h,u.node,it.BLACK,m,y)}},s=function(l){let c=null,d=null,u=t.length;const h=function(m,y){const T=u-m,v=u;u-=m;const f=i(T+1,v),_=t[T],I=n?n(_):_;g(new it(I,_.node,y,null,f))},g=function(m){c?(c.left=m,c=m):(d=m,c=m)};for(let m=0;m<l.count;++m){const y=l.nextBitIsOne(),T=Math.pow(2,l.count-(m+1));y?h(T,it.BLACK):(h(T,it.BLACK),h(T,it.RED))}return d},o=new Kj(t.length),a=s(o);return new xt(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h;const cs={};class sr{static get Default(){return P(cs&&Ee,"ChildrenNode.ts has not been loaded"),$h=$h||new sr({".priority":cs},{".priority":Ee}),$h}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Ui(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof xt?n:null}hasIndex(e){return Qt(this.indexSet_,e.toString())}addIndex(e,n){P(e!==Wn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(oe.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=pu(r,e.getCompare()):a=cs;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new sr(d,c)}addToIndexes(e,n){const r=su(this.indexes_,(i,s)=>{const o=Ui(this.indexSet_,s);if(P(o,"Missing index implementation for "+s),i===cs)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(oe.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),pu(a,o.getCompare())}else return cs;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new oe(e.name,a))),l.insert(e,e.node)}});return new sr(r,this.indexSet_)}removeFromIndexes(e,n){const r=su(this.indexes_,i=>{if(i===cs)return i;{const s=n.get(e.name);return s?i.remove(new oe(e.name,s)):i}});return new sr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo;class G{static get EMPTY_NODE(){return zo||(zo=new G(new xt(Vg),null,sr.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&FT(this.priorityNode_),this.children_.isEmpty()&&P(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||zo}updatePriority(e){return this.children_.isEmpty()?this:new G(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?zo:n}}getChild(e){const n=re(e);return n===null?this:this.getImmediateChild(n).getChild(ve(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(P(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new oe(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?zo:this.priorityNode_;return new G(i,o,s)}}updateChild(e,n){const r=re(e);if(r===null)return n;{P(re(e)!==".priority"||ti(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(ve(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Ee,(o,a)=>{n[o]=a.val(e),r++,s&&G.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+MT(this.getPriority().val())+":"),this.forEachChild(Ee,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":dT(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new oe(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new oe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new oe(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,oe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,oe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Tl?-1:0}withIndex(e){if(e===Wn||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new G(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Wn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ee),i=n.getIterator(Ee);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Wn?null:this.indexMap_.get(e.toString())}}G.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class qj extends G{constructor(){super(new xt(Vg),G.EMPTY_NODE,sr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return G.EMPTY_NODE}isEmpty(){return!1}}const Tl=new qj;Object.defineProperties(oe,{MIN:{value:new oe(ei,G.EMPTY_NODE)},MAX:{value:new oe(mr,Tl)}});DT.__EMPTY_NODE=G.EMPTY_NODE;tt.__childrenNodeConstructor=G;Bj(Tl);Wj(Tl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=!0;function Oe(t,e=null){if(t===null)return G.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),P(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new tt(n,Oe(e))}if(!(t instanceof Array)&&Yj){const n=[];let r=!1;if(lt(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Oe(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new oe(o,l)))}}),n.length===0)return G.EMPTY_NODE;const s=pu(n,$j,o=>o.name,Vg);if(r){const o=pu(n,Ee.getCompare());return new G(s,Oe(e),new sr({".priority":o},{".priority":Ee}))}else return new G(s,Oe(e),sr.Default)}else{let n=G.EMPTY_NODE;return lt(t,(r,i)=>{if(Qt(t,r)&&r.substring(0,1)!=="."){const s=Oe(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Oe(e))}}zj(Oe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg extends Cd{constructor(e){super(),this.indexPath_=e,P(!ie(e)&&re(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ts(e.name,n.name):s}makePost(e,n){const r=Oe(e),i=G.EMPTY_NODE.updateChild(this.indexPath_,r);return new oe(n,i)}maxPost(){const e=G.EMPTY_NODE.updateChild(this.indexPath_,Tl);return new oe(mr,e)}toString(){return Ga(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj extends Cd{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ts(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return oe.MIN}maxPost(){return oe.MAX}makePost(e,n){const r=Oe(e);return new oe(n,r)}toString(){return".value"}}const $g=new Qj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t){return{type:"value",snapshotNode:t}}function to(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ka(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function qa(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Jj(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){P(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Ka(n,a)):P(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(to(n,r)):o.trackChildChange(qa(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ee,(i,s)=>{n.hasChild(i)||r.trackChildChange(Ka(i,s))}),n.isLeafNode()||n.forEachChild(Ee,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(qa(i,s,o))}else r.trackChildChange(to(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?G.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.indexedFilter_=new Bg(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ya.getStartPost_(e),this.endPost_=Ya.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new oe(n,r))||(r=G.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=G.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(G.EMPTY_NODE);const s=this;return n.forEachChild(Ee,(o,a)=>{s.matches(new oe(o,a))||(i=i.updateImmediateChild(o,G.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ya(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new oe(n,r))||(r=G.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=G.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=G.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(G.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,G.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const u=this.index_.getCompare();o=(h,g)=>u(g,h)}else o=this.index_.getCompare();const a=e;P(a.numChildren()===this.limit_,"");const l=new oe(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(n)){const u=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const g=h==null?1:o(h,l);if(d&&!r.isEmpty()&&g>=0)return s!=null&&s.trackChildChange(qa(n,r,u)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Ka(n,u));const y=a.updateImmediateChild(n,G.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(to(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}else return r.isEmpty()?e:d&&o(c,l)>=0?(s!=null&&(s.trackChildChange(Ka(c.name,c.node)),s.trackChildChange(to(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,G.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ee}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return P(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return P(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ei}hasEnd(){return this.endSet_}getIndexEndValue(){return P(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return P(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:mr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return P(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ee}copy(){const e=new Id;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Zj(t){return t.loadsAllData()?new Bg(t.getIndex()):t.hasLimit()?new Xj(t):new Ya(t)}function e$(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function t$(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function wp(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function n$(t,e,n){let r;return t.index_===Wn||n?r=wp(t,e,n):r=wp(t,e,mr),r.startAfterSet_=!0,r}function Sp(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function r$(t,e,n){let r;return t.index_===Wn||n?r=Sp(t,e,n):r=Sp(t,e,ei),r.endBeforeSet_=!0,r}function Td(t,e){const n=t.copy();return n.index_=e,n}function d0(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ee?n="$priority":t.index_===$g?n="$value":t.index_===Wn?n="$key":(P(t.index_ instanceof jg,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ye(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ye(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ye(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ye(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ye(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function h0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ee&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends AT{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(P(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Il("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=mu.getListenId_(e,r),a={};this.listens_[o]=a;const l=d0(e._queryParams);this.restRequest_(s+".json",l,(c,d)=>{let u=d;if(c===404&&(u=null,c=null),c===null&&this.onDataUpdate_(s,u,!1,r),Ui(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,n){const r=mu.getListenId_(e,n);delete this.listens_[r]}get(e){const n=d0(e._queryParams),r=e._path.toString(),i=new Pt;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Zi(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Va(a.responseText)}catch{yt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&yt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(){this.rootNode_=G.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(){return{value:null,children:new Map}}function go(t,e,n){if(ie(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=re(e);t.children.has(r)||t.children.set(r,gu());const i=t.children.get(r);e=ve(e),go(i,e,n)}}function Ep(t,e){if(ie(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Ee,(r,i)=>{go(t,new fe(r),i)}),Ep(t,e)}}else if(t.children.size>0){const n=re(e);return e=ve(e),t.children.has(n)&&Ep(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Cp(t,e,n){t.value!==null?n(e,t.value):s$(t,(r,i)=>{const s=new fe(e.toString()+"/"+r);Cp(i,s,n)})}function s$(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&lt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=10*1e3,a$=30*1e3,l$=5*60*1e3;class c${constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new o$(e);const r=f0+(a$-f0)*Math.random();ma(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;lt(e,(i,s)=>{s>0&&Qt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ma(this.reportStats_.bind(this),Math.floor(Math.random()*2*l$))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Tn||(Tn={}));function zg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Wg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Hg(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Tn.ACK_USER_WRITE,this.source=zg()}operationForChild(e){if(ie(this.path)){if(this.affectedTree.value!=null)return P(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new fe(e));return new _u(de(),n,this.revert)}}else return P(re(this.path)===e,"operationForChild called for unrelated child."),new _u(ve(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this.source=e,this.path=n,this.type=Tn.LISTEN_COMPLETE}operationForChild(e){return ie(this.path)?new Qa(this.source,de()):new Qa(this.source,ve(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Tn.OVERWRITE}operationForChild(e){return ie(this.path)?new Bi(this.source,de(),this.snap.getImmediateChild(e)):new Bi(this.source,ve(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Tn.MERGE}operationForChild(e){if(ie(this.path)){const n=this.children.subtree(new fe(e));return n.isEmpty()?null:n.value?new Bi(this.source,de(),n.value):new no(this.source,de(),n)}else return P(re(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new no(this.source,ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ie(e))return this.isFullyInitialized()&&!this.filtered_;const n=re(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function d$(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Jj(o.childName,o.snapshotNode))}),Wo(t,i,"child_removed",e,r,n),Wo(t,i,"child_added",e,r,n),Wo(t,i,"child_moved",s,r,n),Wo(t,i,"child_changed",e,r,n),Wo(t,i,"value",e,r,n),i}function Wo(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>f$(t,a,l)),o.forEach(a=>{const l=h$(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function h$(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function f$(t,e,n){if(e.childName==null||n.childName==null)throw uo("Should only compare child_ events.");const r=new oe(e.childName,e.snapshotNode),i=new oe(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t,e){return{eventCache:t,serverCache:e}}function ga(t,e,n,r){return Rd(new ni(e,n,r),t.serverCache)}function $T(t,e,n,r){return Rd(t.eventCache,new ni(e,n,r))}function vu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function zi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh;const p$=()=>(Bh||(Bh=new xt(QV)),Bh);class we{static fromObject(e){let n=new we(null);return lt(e,(r,i)=>{n=n.set(new fe(r),i)}),n}constructor(e,n=p$()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:de(),value:this.value};if(ie(e))return null;{const r=re(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(ve(e),n);return s!=null?{path:Ae(new fe(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ie(e))return this;{const n=re(e),r=this.children.get(n);return r!==null?r.subtree(ve(e)):new we(null)}}set(e,n){if(ie(e))return new we(n,this.children);{const r=re(e),s=(this.children.get(r)||new we(null)).set(ve(e),n),o=this.children.insert(r,s);return new we(this.value,o)}}remove(e){if(ie(e))return this.children.isEmpty()?new we(null):new we(null,this.children);{const n=re(e),r=this.children.get(n);if(r){const i=r.remove(ve(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new we(null):new we(this.value,s)}else return this}}get(e){if(ie(e))return this.value;{const n=re(e),r=this.children.get(n);return r?r.get(ve(e)):null}}setTree(e,n){if(ie(e))return n;{const r=re(e),s=(this.children.get(r)||new we(null)).setTree(ve(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new we(this.value,o)}}fold(e){return this.fold_(de(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ae(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,de(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(ie(e))return null;{const s=re(e),o=this.children.get(s);return o?o.findOnPath_(ve(e),Ae(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,de(),n)}foreachOnPath_(e,n,r){if(ie(e))return this;{this.value&&r(n,this.value);const i=re(e),s=this.children.get(i);return s?s.foreachOnPath_(ve(e),Ae(n,i),r):new we(null)}}foreach(e){this.foreach_(de(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Ae(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.writeTree_=e}static empty(){return new bn(new we(null))}}function _a(t,e,n){if(ie(e))return new bn(new we(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Et(i,e);return s=s.updateChild(o,n),new bn(t.writeTree_.set(i,s))}else{const i=new we(n),s=t.writeTree_.setTree(e,i);return new bn(s)}}}function Ip(t,e,n){let r=t;return lt(n,(i,s)=>{r=_a(r,Ae(e,i),s)}),r}function p0(t,e){if(ie(e))return bn.empty();{const n=t.writeTree_.setTree(e,new we(null));return new bn(n)}}function Tp(t,e){return ns(t,e)!=null}function ns(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Et(n.path,e)):null}function m0(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ee,(r,i)=>{e.push(new oe(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new oe(r,i.value))}),e}function Gr(t,e){if(ie(e))return t;{const n=ns(t,e);return n!=null?new bn(new we(n)):new bn(t.writeTree_.subtree(e))}}function Rp(t){return t.writeTree_.isEmpty()}function ro(t,e){return BT(de(),t.writeTree_,e)}function BT(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(P(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=BT(Ae(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ae(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t,e){return GT(e,t)}function m$(t,e,n,r,i){P(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=_a(t.visibleWrites,e,n)),t.lastWriteId=r}function g$(t,e,n,r){P(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ip(t.visibleWrites,e,n),t.lastWriteId=r}function _$(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function v$(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);P(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&y$(a,r.path)?i=!1:ln(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return w$(t),!0;if(r.snap)t.visibleWrites=p0(t.visibleWrites,r.path);else{const a=r.children;lt(a,l=>{t.visibleWrites=p0(t.visibleWrites,Ae(r.path,l))})}return!0}else return!1}function y$(t,e){if(t.snap)return ln(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ln(Ae(t.path,n),e))return!0;return!1}function w$(t){t.visibleWrites=zT(t.allWrites,S$,de()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function S$(t){return t.visible}function zT(t,e,n){let r=bn.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)ln(n,o)?(a=Et(n,o),r=_a(r,a,s.snap)):ln(o,n)&&(a=Et(o,n),r=_a(r,de(),s.snap.getChild(a)));else if(s.children){if(ln(n,o))a=Et(n,o),r=Ip(r,a,s.children);else if(ln(o,n))if(a=Et(o,n),ie(a))r=Ip(r,de(),s.children);else{const l=Ui(s.children,re(a));if(l){const c=l.getChild(ve(a));r=_a(r,de(),c)}}}else throw uo("WriteRecord should have .snap or .children")}}return r}function WT(t,e,n,r,i){if(!r&&!i){const s=ns(t.visibleWrites,e);if(s!=null)return s;{const o=Gr(t.visibleWrites,e);if(Rp(o))return n;if(n==null&&!Tp(o,de()))return null;{const a=n||G.EMPTY_NODE;return ro(o,a)}}}else{const s=Gr(t.visibleWrites,e);if(!i&&Rp(s))return n;if(!i&&n==null&&!Tp(s,de()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(ln(c.path,e)||ln(e,c.path))},a=zT(t.allWrites,o,e),l=n||G.EMPTY_NODE;return ro(a,l)}}}function E$(t,e,n){let r=G.EMPTY_NODE;const i=ns(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ee,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Gr(t.visibleWrites,e);return n.forEachChild(Ee,(o,a)=>{const l=ro(Gr(s,new fe(o)),a);r=r.updateImmediateChild(o,l)}),m0(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Gr(t.visibleWrites,e);return m0(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function C$(t,e,n,r,i){P(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Ae(e,n);if(Tp(t.visibleWrites,s))return null;{const o=Gr(t.visibleWrites,s);return Rp(o)?i.getChild(n):ro(o,i.getChild(n))}}function I$(t,e,n,r){const i=Ae(e,n),s=ns(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Gr(t.visibleWrites,i);return ro(o,r.getNode().getImmediateChild(n))}else return null}function T$(t,e){return ns(t.visibleWrites,e)}function R$(t,e,n,r,i,s,o){let a;const l=Gr(t.visibleWrites,e),c=ns(l,de());if(c!=null)a=c;else if(n!=null)a=ro(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],u=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=h.getNext();for(;g&&d.length<i;)u(g,r)!==0&&d.push(g),g=h.getNext();return d}else return[]}function k$(){return{visibleWrites:bn.empty(),allWrites:[],lastWriteId:-1}}function yu(t,e,n,r){return WT(t.writeTree,t.treePath,e,n,r)}function Gg(t,e){return E$(t.writeTree,t.treePath,e)}function g0(t,e,n,r){return C$(t.writeTree,t.treePath,e,n,r)}function wu(t,e){return T$(t.writeTree,Ae(t.treePath,e))}function N$(t,e,n,r,i,s){return R$(t.writeTree,t.treePath,e,n,r,i,s)}function Kg(t,e,n){return I$(t.writeTree,t.treePath,e,n)}function HT(t,e){return GT(Ae(t.treePath,e),t.writeTree)}function GT(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;P(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),P(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,qa(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Ka(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,to(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,qa(r,e.snapshotNode,i.oldSnap));else throw uo("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const KT=new P$;class qg{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new ni(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Kg(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:zi(this.viewCache_),s=N$(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A$(t){return{filter:t}}function x$(t,e){P(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),P(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function L$(t,e,n,r,i){const s=new b$;let o,a;if(n.type===Tn.OVERWRITE){const c=n;c.source.fromUser?o=kp(t,e,c.path,c.snap,r,i,s):(P(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ie(c.path),o=Su(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Tn.MERGE){const c=n;c.source.fromUser?o=D$(t,e,c.path,c.children,r,i,s):(P(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Np(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Tn.ACK_USER_WRITE){const c=n;c.revert?o=U$(t,e,c.path,r,i,s):o=M$(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===Tn.LISTEN_COMPLETE)o=F$(t,e,n.path,r,s);else throw uo("Unknown operation type: "+n.type);const l=s.getChanges();return O$(e,o,l),{viewCache:o,changes:l}}function O$(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=vu(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(jT(vu(e)))}}function qT(t,e,n,r,i,s){const o=e.eventCache;if(wu(r,n)!=null)return e;{let a,l;if(ie(n))if(P(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=zi(e),d=c instanceof G?c:G.EMPTY_NODE,u=Gg(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const c=yu(r,zi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=re(n);if(c===".priority"){P(ti(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const u=g0(r,n,d,l);u!=null?a=t.filter.updatePriority(d,u):a=o.getNode()}else{const d=ve(n);let u;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=g0(r,n,o.getNode(),l);h!=null?u=o.getNode().getImmediateChild(c).updateChild(d,h):u=o.getNode().getImmediateChild(c)}else u=Kg(r,c,e.serverCache);u!=null?a=t.filter.updateChild(o.getNode(),c,u,d,i,s):a=o.getNode()}}return ga(e,a,o.isFullyInitialized()||ie(n),t.filter.filtersNodes())}}function Su(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if(ie(n))c=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const g=l.getNode().updateChild(n,r);c=d.updateFullNode(l.getNode(),g,null)}else{const g=re(n);if(!l.isCompleteForPath(n)&&ti(n)>1)return e;const m=ve(n),T=l.getNode().getImmediateChild(g).updateChild(m,r);g===".priority"?c=d.updatePriority(l.getNode(),T):c=d.updateChild(l.getNode(),g,T,m,KT,null)}const u=$T(e,c,l.isFullyInitialized()||ie(n),d.filtersNodes()),h=new qg(i,u,s);return qT(t,u,n,i,h,a)}function kp(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const d=new qg(i,e,s);if(ie(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=ga(e,c,!0,t.filter.filtersNodes());else{const u=re(n);if(u===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=ga(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=ve(n),g=a.getNode().getImmediateChild(u);let m;if(ie(h))m=r;else{const y=d.getCompleteChild(u);y!=null?Mg(h)===".priority"&&y.getChild(LT(h)).isEmpty()?m=y:m=y.updateChild(h,r):m=G.EMPTY_NODE}if(g.equals(m))l=e;else{const y=t.filter.updateChild(a.getNode(),u,m,h,d,o);l=ga(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function _0(t,e){return t.eventCache.isCompleteForChild(e)}function D$(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const d=Ae(n,l);_0(e,re(d))&&(a=kp(t,a,d,c,i,s,o))}),r.foreach((l,c)=>{const d=Ae(n,l);_0(e,re(d))||(a=kp(t,a,d,c,i,s,o))}),a}function v0(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Np(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ie(n)?c=r:c=new we(null).setTree(n,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((u,h)=>{if(d.hasChild(u)){const g=e.serverCache.getNode().getImmediateChild(u),m=v0(t,g,h);l=Su(t,l,new fe(u),m,i,s,o,a)}}),c.children.inorderTraversal((u,h)=>{const g=!e.serverCache.isCompleteForChild(u)&&h.value===null;if(!d.hasChild(u)&&!g){const m=e.serverCache.getNode().getImmediateChild(u),y=v0(t,m,h);l=Su(t,l,new fe(u),y,i,s,o,a)}}),l}function M$(t,e,n,r,i,s,o){if(wu(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ie(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Su(t,e,n,l.getNode().getChild(n),i,s,a,o);if(ie(n)){let c=new we(null);return l.getNode().forEachChild(Wn,(d,u)=>{c=c.set(new fe(d),u)}),Np(t,e,n,c,i,s,a,o)}else return e}else{let c=new we(null);return r.foreach((d,u)=>{const h=Ae(n,d);l.isCompleteForPath(h)&&(c=c.set(d,l.getNode().getChild(h)))}),Np(t,e,n,c,i,s,a,o)}}function F$(t,e,n,r,i){const s=e.serverCache,o=$T(e,s.getNode(),s.isFullyInitialized()||ie(n),s.isFiltered());return qT(t,o,n,r,KT,i)}function U$(t,e,n,r,i,s){let o;if(wu(r,n)!=null)return e;{const a=new qg(r,e,i),l=e.eventCache.getNode();let c;if(ie(n)||re(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=yu(r,zi(e));else{const u=e.serverCache.getNode();P(u instanceof G,"serverChildren would be complete if leaf node"),d=Gg(r,u)}d=d,c=t.filter.updateFullNode(l,d,s)}else{const d=re(n);let u=Kg(r,d,e.serverCache);u==null&&e.serverCache.isCompleteForChild(d)&&(u=l.getImmediateChild(d)),u!=null?c=t.filter.updateChild(l,d,u,ve(n),a,s):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,G.EMPTY_NODE,ve(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=yu(r,zi(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||wu(r,de())!=null,ga(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Bg(r.getIndex()),s=Zj(r);this.processor_=A$(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(G.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(G.EMPTY_NODE,a.getNode(),null),d=new ni(l,o.isFullyInitialized(),i.filtersNodes()),u=new ni(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Rd(u,d),this.eventGenerator_=new u$(this.query_)}get query(){return this.query_}}function j$(t){return t.viewCache_.serverCache.getNode()}function $$(t){return vu(t.viewCache_)}function B$(t,e){const n=zi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ie(e)&&!n.getImmediateChild(re(e)).isEmpty())?n.getChild(e):null}function y0(t){return t.eventRegistrations_.length===0}function z$(t,e){t.eventRegistrations_.push(e)}function w0(t,e,n){const r=[];if(n){P(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function S0(t,e,n,r){e.type===Tn.MERGE&&e.source.queryId!==null&&(P(zi(t.viewCache_),"We should always have a full cache before handling merges"),P(vu(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=L$(t.processor_,i,e,n,r);return x$(t.processor_,s.viewCache),P(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,YT(t,s.changes,s.viewCache.eventCache.getNode(),null)}function W$(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ee,(s,o)=>{r.push(to(s,o))}),n.isFullyInitialized()&&r.push(jT(n.getNode())),YT(t,r,n.getNode(),e)}function YT(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return d$(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eu;class QT{constructor(){this.views=new Map}}function H$(t){P(!Eu,"__referenceConstructor has already been defined"),Eu=t}function G$(){return P(Eu,"Reference.ts has not been loaded"),Eu}function K$(t){return t.views.size===0}function Yg(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return P(s!=null,"SyncTree gave us an op for an invalid query."),S0(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(S0(o,e,n,r));return s}}function JT(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=yu(n,i?r:null),l=!1;a?l=!0:r instanceof G?(a=Gg(n,r),l=!1):(a=G.EMPTY_NODE,l=!1);const c=Rd(new ni(a,l,!1),new ni(r,i,!1));return new V$(e,c)}return o}function q$(t,e,n,r,i,s){const o=JT(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),z$(o,n),W$(o,n)}function Y$(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=ri(t);if(i==="default")for(const[l,c]of t.views.entries())o=o.concat(w0(c,n,r)),y0(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(w0(l,n,r)),y0(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!ri(t)&&s.push(new(G$())(e._repo,e._path)),{removed:s,events:o}}function XT(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Kr(t,e){let n=null;for(const r of t.views.values())n=n||B$(r,e);return n}function ZT(t,e){if(e._queryParams.loadsAllData())return Nd(t);{const r=e._queryIdentifier;return t.views.get(r)}}function eR(t,e){return ZT(t,e)!=null}function ri(t){return Nd(t)!=null}function Nd(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cu;function Q$(t){P(!Cu,"__referenceConstructor has already been defined"),Cu=t}function J$(){return P(Cu,"Reference.ts has not been loaded"),Cu}let X$=1;class E0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new we(null),this.pendingWriteTree_=k$(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Qg(t,e,n,r,i){return m$(t.pendingWriteTree_,e,n,r,i),i?_o(t,new Bi(zg(),e,n)):[]}function Z$(t,e,n,r){g$(t.pendingWriteTree_,e,n,r);const i=we.fromObject(n);return _o(t,new no(zg(),e,i))}function Or(t,e,n=!1){const r=_$(t.pendingWriteTree_,e);if(v$(t.pendingWriteTree_,e)){let s=new we(null);return r.snap!=null?s=s.set(de(),!0):lt(r.children,o=>{s=s.set(new fe(o),!0)}),_o(t,new _u(r.path,s,n))}else return[]}function Rl(t,e,n){return _o(t,new Bi(Wg(),e,n))}function e6(t,e,n){const r=we.fromObject(n);return _o(t,new no(Wg(),e,r))}function t6(t,e){return _o(t,new Qa(Wg(),e))}function n6(t,e,n){const r=Jg(t,n);if(r){const i=Xg(r),s=i.path,o=i.queryId,a=Et(s,e),l=new Qa(Hg(o),a);return Zg(t,s,l)}else return[]}function Iu(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||eR(o,e))){const l=Y$(o,e,n,r);K$(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const d=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,u=t.syncPointTree_.findOnPath(s,(h,g)=>ri(g));if(d&&!u){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const g=s6(h);for(let m=0;m<g.length;++m){const y=g[m],T=y.query,v=iR(t,y);t.listenProvider_.startListening(va(T),Ja(t,T),v.hashFn,v.onComplete)}}}!u&&c.length>0&&!r&&(d?t.listenProvider_.stopListening(va(e),null):c.forEach(h=>{const g=t.queryToTagMap.get(Pd(h));t.listenProvider_.stopListening(va(h),g)}))}o6(t,c)}return a}function tR(t,e,n,r){const i=Jg(t,r);if(i!=null){const s=Xg(i),o=s.path,a=s.queryId,l=Et(o,e),c=new Bi(Hg(a),l,n);return Zg(t,o,c)}else return[]}function r6(t,e,n,r){const i=Jg(t,r);if(i){const s=Xg(i),o=s.path,a=s.queryId,l=Et(o,e),c=we.fromObject(n),d=new no(Hg(a),l,c);return Zg(t,o,d)}else return[]}function bp(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,g)=>{const m=Et(h,i);s=s||Kr(g,m),o=o||ri(g)});let a=t.syncPointTree_.get(i);a?(o=o||ri(a),s=s||Kr(a,de())):(a=new QT,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=G.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((g,m)=>{const y=Kr(m,de());y&&(s=s.updateImmediateChild(g,y))}));const c=eR(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=Pd(e);P(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const g=a6();t.queryToTagMap.set(h,g),t.tagToQueryMap.set(g,h)}const d=kd(t.pendingWriteTree_,i);let u=q$(a,e,n,d,s,l);if(!c&&!o&&!r){const h=ZT(a,e);u=u.concat(l6(t,e,h))}return u}function bd(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Et(o,e),c=Kr(a,l);if(c)return c});return WT(i,e,s,n,!0)}function i6(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,d)=>{const u=Et(c,n);r=r||Kr(d,u)});let i=t.syncPointTree_.get(n);i?r=r||Kr(i,de()):(i=new QT,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new ni(r,!0,!1):null,a=kd(t.pendingWriteTree_,e._path),l=JT(i,e,a,s?o.getNode():G.EMPTY_NODE,s);return $$(l)}function _o(t,e){return nR(e,t.syncPointTree_,null,kd(t.pendingWriteTree_,de()))}function nR(t,e,n,r){if(ie(t.path))return rR(t,e,n,r);{const i=e.get(de());n==null&&i!=null&&(n=Kr(i,de()));let s=[];const o=re(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,d=HT(r,o);s=s.concat(nR(a,l,c,d))}return i&&(s=s.concat(Yg(i,t,r,n))),s}}function rR(t,e,n,r){const i=e.get(de());n==null&&i!=null&&(n=Kr(i,de()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=HT(r,o),d=t.operationForChild(o);d&&(s=s.concat(rR(d,a,l,c)))}),i&&(s=s.concat(Yg(i,t,r,n))),s}function iR(t,e){const n=e.query,r=Ja(t,n);return{hashFn:()=>(j$(e)||G.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?n6(t,n._path,r):t6(t,n._path);{const s=ZV(i,n);return Iu(t,n,null,s)}}}}function Ja(t,e){const n=Pd(e);return t.queryToTagMap.get(n)}function Pd(t){return t._path.toString()+"$"+t._queryIdentifier}function Jg(t,e){return t.tagToQueryMap.get(e)}function Xg(t){const e=t.indexOf("$");return P(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new fe(t.substr(0,e))}}function Zg(t,e,n){const r=t.syncPointTree_.get(e);P(r,"Missing sync point for query tag that we're tracking");const i=kd(t.pendingWriteTree_,e);return Yg(r,n,i,null)}function s6(t){return t.fold((e,n,r)=>{if(n&&ri(n))return[Nd(n)];{let i=[];return n&&(i=XT(n)),lt(r,(s,o)=>{i=i.concat(o)}),i}})}function va(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(J$())(t._repo,t._path):t}function o6(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Pd(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function a6(){return X$++}function l6(t,e,n){const r=e._path,i=Ja(t,e),s=iR(t,n),o=t.listenProvider_.startListening(va(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)P(!ri(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,d,u)=>{if(!ie(c)&&d&&ri(d))return[Nd(d).query];{let h=[];return d&&(h=h.concat(XT(d).map(g=>g.query))),lt(u,(g,m)=>{h=h.concat(m)}),h}});for(let c=0;c<l.length;++c){const d=l[c];t.listenProvider_.stopListening(va(d),Ja(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new e_(n)}node(){return this.node_}}class t_{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ae(this.path_,e);return new t_(this.syncTree_,n)}node(){return bd(this.syncTree_,this.path_)}}const c6=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},C0=function(t,e,n){if(!t||typeof t!="object")return t;if(P(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return u6(t[".sv"],e,n);if(typeof t[".sv"]=="object")return d6(t[".sv"],e);P(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},u6=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:P(!1,"Unexpected server value: "+t)}},d6=function(t,e,n){t.hasOwnProperty("increment")||P(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&P(!1,"Unexpected increment value: "+r);const i=e.node();if(P(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},sR=function(t,e,n,r){return r_(e,new t_(n,t),r)},n_=function(t,e,n){return r_(t,new e_(e),n)};function r_(t,e,n){const r=t.getPriority().val(),i=C0(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=C0(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new tt(a,Oe(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new tt(i))),o.forEachChild(Ee,(a,l)=>{const c=r_(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Ad(t,e){let n=e instanceof fe?e:new fe(e),r=t,i=re(n);for(;i!==null;){const s=Ui(r.node.children,i)||{children:{},childCount:0};r=new i_(i,r,s),n=ve(n),i=re(n)}return r}function rs(t){return t.node.value}function s_(t,e){t.node.value=e,Pp(t)}function oR(t){return t.node.childCount>0}function h6(t){return rs(t)===void 0&&!oR(t)}function xd(t,e){lt(t.node.children,(n,r)=>{e(new i_(n,t,r))})}function aR(t,e,n,r){n&&!r&&e(t),xd(t,i=>{aR(i,e,!0,r)}),n&&r&&e(t)}function f6(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function kl(t){return new fe(t.parent===null?t.name:kl(t.parent)+"/"+t.name)}function Pp(t){t.parent!==null&&p6(t.parent,t.name,t)}function p6(t,e,n){const r=h6(n),i=Qt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Pp(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Pp(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=/[\[\].#$\/\u0000-\u001F\u007F]/,g6=/[\[\].#$\u0000-\u001F\u007F]/,zh=10*1024*1024,Ld=function(t){return typeof t=="string"&&t.length!==0&&!m6.test(t)},lR=function(t){return typeof t=="string"&&t.length!==0&&!g6.test(t)},_6=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),lR(t)},Xa=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Ed(t)||t&&typeof t=="object"&&Qt(t,".sv")},Kn=function(t,e,n,r){r&&e===void 0||Nl(Ut(t,"value"),e,n)},Nl=function(t,e,n){const r=n instanceof fe?new Lj(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+_i(r));if(typeof e=="function")throw new Error(t+"contains a function "+_i(r)+" with contents = "+e.toString());if(Ed(e))throw new Error(t+"contains "+e.toString()+" "+_i(r));if(typeof e=="string"&&e.length>zh/3&&dd(e)>zh)throw new Error(t+"contains a string greater than "+zh+" utf8 bytes "+_i(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(lt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Ld(o)))throw new Error(t+" contains an invalid key ("+o+") "+_i(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Oj(r,o),Nl(t,a,r),Dj(r)}),i&&s)throw new Error(t+' contains ".value" child '+_i(r)+" in addition to actual children.")}},v6=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Ga(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Ld(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(xj);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&ln(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},cR=function(t,e,n,r){const i=Ut(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];lt(e,(o,a)=>{const l=new fe(o);if(Nl(i,a,Ae(n,l)),Mg(l)===".priority"&&!Xa(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),v6(i,s)},o_=function(t,e,n){if(Ed(e))throw new Error(Ut(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Xa(e))throw new Error(Ut(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},bl=function(t,e,n,r){if(n!==void 0&&!Ld(n))throw new Error(Ut(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Za=function(t,e,n,r){if(!lR(n))throw new Error(Ut(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},y6=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Za(t,e,n)},cn=function(t,e){if(re(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},uR=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ld(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!_6(n))throw new Error(Ut(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Od(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Fg(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function dR(t,e,n){Od(t,n),hR(t,r=>Fg(r,e))}function Jt(t,e,n){Od(t,n),hR(t,r=>ln(r,e)||ln(e,r))}function hR(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(S6(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function S6(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();bi&&st("event: "+n.toString()),mo(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="repo_interrupt",E6=25;class C6{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new w6,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=gu(),this.transactionQueueTree_=new i_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function I6(t,e,n){if(t.stats_=Og(t.repoInfo_),t.forceRestClient_||rj())t.server_=new mu(t.repoInfo_,(r,i,s,o)=>{I0(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>T0(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ye(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new lr(t.repoInfo_,e,(r,i,s,o)=>{I0(t,r,i,s,o)},r=>{T0(t,r)},r=>{T6(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=lj(t.repoInfo_,()=>new c$(t.stats_,t.server_)),t.infoData_=new i$,t.infoSyncTree_=new E0({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Rl(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),a_(t,"connected",!1),t.serverSyncTree_=new E0({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Jt(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function pR(t){const n=t.infoData_.getNode(new fe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Pl(t){return c6({timestamp:pR(t)})}function I0(t,e,n,r,i){t.dataUpdateCount++;const s=new fe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=su(n,c=>Oe(c));o=r6(t.serverSyncTree_,s,l,i)}else{const l=Oe(n);o=tR(t.serverSyncTree_,s,l,i)}else if(r){const l=su(n,c=>Oe(c));o=e6(t.serverSyncTree_,s,l)}else{const l=Oe(n);o=Rl(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=io(t,s)),Jt(t.eventQueue_,a,o)}function T0(t,e){a_(t,"connected",e),e===!1&&N6(t)}function T6(t,e){lt(e,(n,r)=>{a_(t,n,r)})}function a_(t,e,n){const r=new fe("/.info/"+e),i=Oe(n);t.infoData_.updateSnapshot(r,i);const s=Rl(t.infoSyncTree_,r,i);Jt(t.eventQueue_,r,s)}function Dd(t){return t.nextWriteId_++}function R6(t,e,n){const r=i6(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Oe(i).withIndex(e._queryParams.getIndex());bp(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Rl(t.serverSyncTree_,e._path,s);else{const a=Ja(t.serverSyncTree_,e);o=tR(t.serverSyncTree_,e._path,s,a)}return Jt(t.eventQueue_,e._path,o),Iu(t.serverSyncTree_,e,n,null,!0),s},i=>(vo(t,"get for query "+Ye(e)+" failed: "+i),Promise.reject(new Error(i))))}function l_(t,e,n,r,i){vo(t,"set",{path:e.toString(),value:n,priority:r});const s=Pl(t),o=Oe(n,r),a=bd(t.serverSyncTree_,e),l=n_(o,a,s),c=Dd(t),d=Qg(t.serverSyncTree_,e,l,c,!0);Od(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(h,g)=>{const m=h==="ok";m||yt("set at "+e+" failed: "+h);const y=Or(t.serverSyncTree_,c,!m);Jt(t.eventQueue_,e,y),ii(t,i,h,g)});const u=u_(t,e);io(t,u),Jt(t.eventQueue_,u,[])}function k6(t,e,n,r){vo(t,"update",{path:e.toString(),value:n});let i=!0;const s=Pl(t),o={};if(lt(n,(a,l)=>{i=!1,o[a]=sR(Ae(e,a),Oe(l),t.serverSyncTree_,s)}),i)st("update() called with empty data.  Don't do anything."),ii(t,r,"ok",void 0);else{const a=Dd(t),l=Z$(t.serverSyncTree_,e,o,a);Od(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,d)=>{const u=c==="ok";u||yt("update at "+e+" failed: "+c);const h=Or(t.serverSyncTree_,a,!u),g=h.length>0?io(t,e):e;Jt(t.eventQueue_,g,h),ii(t,r,c,d)}),lt(n,c=>{const d=u_(t,Ae(e,c));io(t,d)}),Jt(t.eventQueue_,e,[])}}function N6(t){vo(t,"onDisconnectEvents");const e=Pl(t),n=gu();Cp(t.onDisconnect_,de(),(i,s)=>{const o=sR(i,s,t.serverSyncTree_,e);go(n,i,o)});let r=[];Cp(n,de(),(i,s)=>{r=r.concat(Rl(t.serverSyncTree_,i,s));const o=u_(t,i);io(t,o)}),t.onDisconnect_=gu(),Jt(t.eventQueue_,de(),r)}function b6(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&Ep(t.onDisconnect_,e),ii(t,n,r,i)})}function R0(t,e,n,r){const i=Oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&go(t.onDisconnect_,e,i),ii(t,r,s,o)})}function P6(t,e,n,r,i){const s=Oe(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&go(t.onDisconnect_,e,s),ii(t,i,o,a)})}function A6(t,e,n,r){if(iu(n)){st("onDisconnect().update() called with empty data.  Don't do anything."),ii(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&lt(n,(o,a)=>{const l=Oe(a);go(t.onDisconnect_,Ae(e,o),l)}),ii(t,r,i,s)})}function x6(t,e,n){let r;re(e._path)===".info"?r=bp(t.infoSyncTree_,e,n):r=bp(t.serverSyncTree_,e,n),dR(t.eventQueue_,e._path,r)}function Ap(t,e,n){let r;re(e._path)===".info"?r=Iu(t.infoSyncTree_,e,n):r=Iu(t.serverSyncTree_,e,n),dR(t.eventQueue_,e._path,r)}function mR(t){t.persistentConnection_&&t.persistentConnection_.interrupt(fR)}function L6(t){t.persistentConnection_&&t.persistentConnection_.resume(fR)}function vo(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),st(n,...e)}function ii(t,e,n,r){e&&mo(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function O6(t,e,n,r,i,s){vo(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:uT(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=c_(t,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Nl("transaction failed: Data returned ",l,o.path),o.status=0;const c=Ad(t.transactionQueueTree_,e),d=rs(c)||[];d.push(o),s_(c,d);let u;typeof l=="object"&&l!==null&&Qt(l,".priority")?(u=Ui(l,".priority"),P(Xa(u),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):u=(bd(t.serverSyncTree_,e)||G.EMPTY_NODE).getPriority().val();const h=Pl(t),g=Oe(l,u),m=n_(g,a,h);o.currentOutputSnapshotRaw=g,o.currentOutputSnapshotResolved=m,o.currentWriteId=Dd(t);const y=Qg(t.serverSyncTree_,e,m,o.currentWriteId,o.applyLocally);Jt(t.eventQueue_,e,y),Md(t,t.transactionQueueTree_)}}function c_(t,e,n){return bd(t.serverSyncTree_,e,n)||G.EMPTY_NODE}function Md(t,e=t.transactionQueueTree_){if(e||Fd(t,e),rs(e)){const n=_R(t,e);P(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&D6(t,kl(e),n)}else oR(e)&&xd(e,n=>{Md(t,n)})}function D6(t,e,n){const r=n.map(c=>c.currentWriteId),i=c_(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const d=n[c];P(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const u=Et(e,d.path);s=s.updateChild(u,d.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{vo(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){const u=[];for(let h=0;h<n.length;h++)n[h].status=2,d=d.concat(Or(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&u.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Fd(t,Ad(t.transactionQueueTree_,e)),Md(t,t.transactionQueueTree_),Jt(t.eventQueue_,e,d);for(let h=0;h<u.length;h++)mo(u[h])}else{if(c==="datastale")for(let u=0;u<n.length;u++)n[u].status===3?n[u].status=4:n[u].status=0;else{yt("transaction at "+l.toString()+" failed: "+c);for(let u=0;u<n.length;u++)n[u].status=4,n[u].abortReason=c}io(t,e)}},o)}function io(t,e){const n=gR(t,e),r=kl(n),i=_R(t,n);return M6(t,i,r),r}function M6(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Et(n,l.path);let d=!1,u;if(P(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,u=l.abortReason,i=i.concat(Or(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=E6)d=!0,u="maxretry",i=i.concat(Or(t.serverSyncTree_,l.currentWriteId,!0));else{const h=c_(t,l.path,o);l.currentInputSnapshot=h;const g=e[a].update(h.val());if(g!==void 0){Nl("transaction failed: Data returned ",g,l.path);let m=Oe(g);typeof g=="object"&&g!=null&&Qt(g,".priority")||(m=m.updatePriority(h.getPriority()));const T=l.currentWriteId,v=Pl(t),f=n_(m,h,v);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=f,l.currentWriteId=Dd(t),o.splice(o.indexOf(T),1),i=i.concat(Qg(t.serverSyncTree_,l.path,f,l.currentWriteId,l.applyLocally)),i=i.concat(Or(t.serverSyncTree_,T,!0))}else d=!0,u="nodata",i=i.concat(Or(t.serverSyncTree_,l.currentWriteId,!0))}Jt(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(u==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(u),!1,null))))}Fd(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)mo(r[a]);Md(t,t.transactionQueueTree_)}function gR(t,e){let n,r=t.transactionQueueTree_;for(n=re(e);n!==null&&rs(r)===void 0;)r=Ad(r,n),e=ve(e),n=re(e);return r}function _R(t,e){const n=[];return vR(t,e,n),n.sort((r,i)=>r.order-i.order),n}function vR(t,e,n){const r=rs(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);xd(e,i=>{vR(t,i,n)})}function Fd(t,e){const n=rs(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,s_(e,n.length>0?n:void 0)}xd(e,r=>{Fd(t,r)})}function u_(t,e){const n=kl(gR(t,e)),r=Ad(t.transactionQueueTree_,e);return f6(r,i=>{Wh(t,i)}),Wh(t,r),aR(r,i=>{Wh(t,i)}),n}function Wh(t,e){const n=rs(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(P(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(P(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Or(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?s_(e,void 0):n.length=s+1,Jt(t.eventQueue_,kl(e),i);for(let o=0;o<r.length;o++)mo(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function U6(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):yt(`Invalid query segment '${n}' in query '${t}'`)}return e}const xp=function(t,e){const n=V6(t),r=n.namespace;n.domain==="firebase.com"&&Gn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Gn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||qV();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new IT(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new fe(n.pathString)}},V6=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let u=t.indexOf("?");u===-1&&(u=t.length),e=t.substring(0,Math.min(d,u)),d<u&&(i=F6(t.substring(d,u)));const h=U6(t.substring(Math.min(t.length,u)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const g=e.slice(0,c);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),n=e.substring(m+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",j6=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=k0.charAt(n%64),n=Math.floor(n/64);P(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=k0.charAt(e[i]);return P(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ye(this.snapshot.exportVal())}}class wR{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return P(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $6=class{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Pt;return b6(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){cn("OnDisconnect.remove",this._path);const e=new Pt;return R0(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){cn("OnDisconnect.set",this._path),Kn("OnDisconnect.set",e,this._path,!1);const n=new Pt;return R0(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){cn("OnDisconnect.setWithPriority",this._path),Kn("OnDisconnect.setWithPriority",e,this._path,!1),o_("OnDisconnect.setWithPriority",n);const r=new Pt;return P6(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){cn("OnDisconnect.update",this._path),cR("OnDisconnect.update",e,this._path);const n=new Pt;return A6(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ie(this._path)?null:Mg(this._path)}get ref(){return new gn(this._repo,this._path)}get _queryIdentifier(){const e=h0(this._queryParams),n=xg(e);return n==="{}"?"default":n}get _queryObject(){return h0(this._queryParams)}isEqual(e){if(e=Z(e),!(e instanceof jt))return!1;const n=this._repo===e._repo,r=Fg(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Aj(this._path)}}function Ud(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function hi(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Wn){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==ei)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==mr)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===Ee){if(e!=null&&!Xa(e)||n!=null&&!Xa(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(P(t.getIndex()instanceof jg||t.getIndex()===$g,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Vd(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class gn extends jt{constructor(e,n){super(e,n,new Id,!1)}get parent(){const e=LT(this._path);return e===null?null:new gn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}let jd=class Lp{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new fe(e),r=Wi(this.ref,e);return new Lp(this._node.getChild(n),r,Ee)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Lp(i,Wi(this.ref,r),Ee)))}hasChild(e){const n=new fe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function SR(t,e){return t=Z(t),t._checkNotDeleted("ref"),e!==void 0?Wi(t._root,e):t._root}function N0(t,e){t=Z(t),t._checkNotDeleted("refFromURL");const n=xp(e,t._repo.repoInfo_.nodeAdmin);uR("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Gn("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),SR(t,n.path.toString())}function Wi(t,e){return t=Z(t),re(t._path)===null?y6("child","path",e):Za("child","path",e),new gn(t._repo,Ae(t._path,e))}function B6(t,e){t=Z(t),cn("push",t._path),Kn("push",e,t._path,!0);const n=pR(t._repo),r=j6(n),i=Wi(t,r),s=Wi(t,r);let o;return e!=null?o=h_(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function z6(t){return cn("remove",t._path),h_(t,null)}function h_(t,e){t=Z(t),cn("set",t._path),Kn("set",e,t._path,!1);const n=new Pt;return l_(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function W6(t,e){t=Z(t),cn("setPriority",t._path),o_("setPriority",e);const n=new Pt;return l_(t._repo,Ae(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function H6(t,e,n){if(cn("setWithPriority",t._path),Kn("setWithPriority",e,t._path,!1),o_("setWithPriority",n),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new Pt;return l_(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function G6(t,e){cR("update",e,t._path);const n=new Pt;return k6(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function K6(t){t=Z(t);const e=new d_(()=>{}),n=new Al(e);return R6(t._repo,t,n).then(r=>new jd(r,new gn(t._repo,t._path),t._queryParams.getIndex()))}class Al{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new yR("value",this,new jd(e.snapshotNode,new gn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new wR(this,e,n):null}matches(e){return e instanceof Al?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class $d{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new wR(this,e,n):null}createEvent(e,n){P(e.childName!=null,"Child events should have a childName.");const r=Wi(new gn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new yR(e.type,this,new jd(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof $d?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function xl(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,c=(d,u)=>{Ap(t._repo,t,a),l(d,u)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new d_(n,s||void 0),a=e==="value"?new Al(o):new $d(e,o);return x6(t._repo,t,a),()=>Ap(t._repo,t,a)}function Op(t,e,n,r){return xl(t,"value",e,n,r)}function b0(t,e,n,r){return xl(t,"child_added",e,n,r)}function P0(t,e,n,r){return xl(t,"child_changed",e,n,r)}function A0(t,e,n,r){return xl(t,"child_moved",e,n,r)}function x0(t,e,n,r){return xl(t,"child_removed",e,n,r)}function L0(t,e,n){let r=null;const i=n?new d_(n):null;e==="value"?r=new Al(i):e&&(r=new $d(e,i)),Ap(t._repo,t,r)}class xn{}class ER extends xn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Kn("endAt",this._value,e._path,!0);const n=Sp(e._queryParams,this._value,this._key);if(Vd(n),hi(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jt(e._repo,e._path,n,e._orderByCalled)}}function q6(t,e){return bl("endAt","key",e),new ER(t,e)}class Y6 extends xn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){Kn("endBefore",this._value,e._path,!1);const n=r$(e._queryParams,this._value,this._key);if(Vd(n),hi(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jt(e._repo,e._path,n,e._orderByCalled)}}function Q6(t,e){return bl("endBefore","key",e),new Y6(t,e)}class CR extends xn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Kn("startAt",this._value,e._path,!0);const n=wp(e._queryParams,this._value,this._key);if(Vd(n),hi(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new jt(e._repo,e._path,n,e._orderByCalled)}}function J6(t=null,e){return bl("startAt","key",e),new CR(t,e)}class X6 extends xn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){Kn("startAfter",this._value,e._path,!1);const n=n$(e._queryParams,this._value,this._key);if(Vd(n),hi(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new jt(e._repo,e._path,n,e._orderByCalled)}}function Z6(t,e){return bl("startAfter","key",e),new X6(t,e)}class eB extends xn{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new jt(e._repo,e._path,e$(e._queryParams,this._limit),e._orderByCalled)}}function tB(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new eB(t)}class nB extends xn{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new jt(e._repo,e._path,t$(e._queryParams,this._limit),e._orderByCalled)}}function rB(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new nB(t)}class iB extends xn{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Ud(e,"orderByChild");const n=new fe(this._path);if(ie(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new jg(n),i=Td(e._queryParams,r);return hi(i),new jt(e._repo,e._path,i,!0)}}function sB(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Za("orderByChild","path",t),new iB(t)}class oB extends xn{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Ud(e,"orderByKey");const n=Td(e._queryParams,Wn);return hi(n),new jt(e._repo,e._path,n,!0)}}function aB(){return new oB}class lB extends xn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Ud(e,"orderByPriority");const n=Td(e._queryParams,Ee);return hi(n),new jt(e._repo,e._path,n,!0)}}function cB(){return new lB}class uB extends xn{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Ud(e,"orderByValue");const n=Td(e._queryParams,$g);return hi(n),new jt(e._repo,e._path,n,!0)}}function dB(){return new uB}class hB extends xn{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Kn("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ER(this._value,this._key)._apply(new CR(this._value,this._key)._apply(e))}}function fB(t,e){return bl("equalTo","key",e),new hB(t,e)}function wn(t,...e){let n=Z(t);for(const r of e)n=r._apply(n);return n}H$(gn);Q$(gn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB="FIREBASE_DATABASE_EMULATOR_HOST",Dp={};let mB=!1;function gB(t,e,n,r){t.repoInfo_=new IT(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function IR(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Gn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),st("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=xp(s,i),a=o.repoInfo,l,c;typeof process<"u"&&qy&&(c=qy[pB]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=xp(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const d=i&&l?new Fs(Fs.OWNER):new sj(t.name,t.options,e);uR("Invalid Firebase Database URL",o),ie(o.path)||Gn("Database URL must point to the root of a Firebase Database (not including a child path).");const u=vB(a,t,d,new ij(t.name,n));return new yB(u,t)}function _B(t,e){const n=Dp[e];(!n||n[t.key]!==t)&&Gn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),mR(t),delete n[t.key]}function vB(t,e,n,r){let i=Dp[e.name];i||(i={},Dp[e.name]=i);let s=i[t.toURLString()];return s&&Gn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new C6(t,mB,n,r),i[t.toURLString()]=s,s}let yB=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(I6(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gn(this._repo,de())),this._rootInternal}_delete(){return this._rootInternal!==null&&(_B(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Gn("Cannot call "+e+" on a deleted database.")}};function TR(){eo.IS_TRANSPORT_INITIALIZED&&yt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function wB(){TR(),Lr.forceDisallow()}function SB(){TR(),on.forceDisallow(),Lr.forceAllow()}function EB(t,e,n,r={}){t=Z(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Gn("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Gn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Fs(Fs.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:pM(r.mockUserToken,t.app.options.projectId);s=new Fs(o)}gB(i,e,n,s)}function CB(t){t=Z(t),t._checkNotDeleted("goOffline"),mR(t._repo)}function IB(t){t=Z(t),t._checkNotDeleted("goOnline"),L6(t._repo)}function TB(t,e){hT(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RB(t){lT(ui),Zr(new pn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return IR(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Nn(Yy,Qy,t),Nn(Yy,Qy,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB={".sv":"timestamp"};function NB(){return kB}function bB(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PB=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function AB(t,e,n){var r;if(t=Z(t),cn("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new Pt,o=(l,c,d)=>{let u=null;l?s.reject(l):(u=new jd(d,new gn(t._repo,t._path),Ee),s.resolve(new PB(c,u)))},a=Op(t,()=>{});return O6(t._repo,t._path,e,o,a,i),s.promise}lr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};lr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};RB();const xB="@firebase/database-compat",LB="2.0.1";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB=new ml("@firebase/database-compat"),RR=function(t){const e="FIREBASE WARNING: "+t;OB.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB=function(t,e,n,r){if(n!==void 0&&typeof n!="boolean")throw new Error(Ut(t,e)+"must be a boolean.")},MB=function(t,e,n){if(e!==void 0)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ut(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e){this._delegate=e}cancel(e){K("OnDisconnect.cancel",0,1,arguments.length),rt("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){K("OnDisconnect.remove",0,1,arguments.length),rt("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){K("OnDisconnect.set",1,2,arguments.length),rt("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){K("OnDisconnect.setWithPriority",2,3,arguments.length),rt("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,n){if(K("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,RR("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rt("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return K("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){this._database=e,this._delegate=n}val(){return K("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return K("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return K("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return K("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return K("DataSnapshot.child",0,1,arguments.length),e=String(e),Za("DataSnapshot.child","path",e),new qr(this._database,this._delegate.child(e))}hasChild(e){return K("DataSnapshot.hasChild",1,1,arguments.length),Za("DataSnapshot.hasChild","path",e),this._delegate.hasChild(e)}getPriority(){return K("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return K("DataSnapshot.forEach",1,1,arguments.length),rt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new qr(this._database,n)))}hasChildren(){return K("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return K("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return K("DataSnapshot.ref",0,0,arguments.length),new Ht(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ct{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var s;K("Query.on",2,4,arguments.length),rt("Query.on","callback",n,!1);const o=ct.getCancelAndContextArgs_("Query.on",r,i),a=(c,d)=>{n.call(o.context,new qr(this.database,c),d)};a.userCallback=n,a.context=o.context;const l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return Op(this._delegate,a,l),n;case"child_added":return b0(this._delegate,a,l),n;case"child_removed":return x0(this._delegate,a,l),n;case"child_changed":return P0(this._delegate,a,l),n;case"child_moved":return A0(this._delegate,a,l),n;default:throw new Error(Ut("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(K("Query.off",0,3,arguments.length),MB("Query.off",e),rt("Query.off","callback",n,!0),_y("Query.off","context",r),n){const i=()=>{};i.userCallback=n,i.context=r,L0(this._delegate,e,i)}else L0(this._delegate,e)}get(){return K6(this._delegate).then(e=>new qr(this.database,e))}once(e,n,r,i){K("Query.once",1,4,arguments.length),rt("Query.once","callback",n,!0);const s=ct.getCancelAndContextArgs_("Query.once",r,i),o=new Pt,a=(c,d)=>{const u=new qr(this.database,c);n&&n.call(s.context,u,d),o.resolve(u)};a.userCallback=n,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":Op(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":b0(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":x0(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":P0(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":A0(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Ut("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return K("Query.limitToFirst",1,1,arguments.length),new ct(this.database,wn(this._delegate,tB(e)))}limitToLast(e){return K("Query.limitToLast",1,1,arguments.length),new ct(this.database,wn(this._delegate,rB(e)))}orderByChild(e){return K("Query.orderByChild",1,1,arguments.length),new ct(this.database,wn(this._delegate,sB(e)))}orderByKey(){return K("Query.orderByKey",0,0,arguments.length),new ct(this.database,wn(this._delegate,aB()))}orderByPriority(){return K("Query.orderByPriority",0,0,arguments.length),new ct(this.database,wn(this._delegate,cB()))}orderByValue(){return K("Query.orderByValue",0,0,arguments.length),new ct(this.database,wn(this._delegate,dB()))}startAt(e=null,n){return K("Query.startAt",0,2,arguments.length),new ct(this.database,wn(this._delegate,J6(e,n)))}startAfter(e=null,n){return K("Query.startAfter",0,2,arguments.length),new ct(this.database,wn(this._delegate,Z6(e,n)))}endAt(e=null,n){return K("Query.endAt",0,2,arguments.length),new ct(this.database,wn(this._delegate,q6(e,n)))}endBefore(e=null,n){return K("Query.endBefore",0,2,arguments.length),new ct(this.database,wn(this._delegate,Q6(e,n)))}equalTo(e,n){return K("Query.equalTo",1,2,arguments.length),new ct(this.database,wn(this._delegate,fB(e,n)))}toString(){return K("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return K("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(K("Query.isEqual",1,1,arguments.length),!(e instanceof ct)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,rt(e,"cancel",i.cancel,!0),i.context=r,_y(e,"context",i.context);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Ut(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new Ht(this.database,new gn(this._delegate._repo,this._delegate._path))}}class Ht extends ct{constructor(e,n){super(e,new jt(n._repo,n._path,new Id,!1)),this.database=e,this._delegate=n}getKey(){return K("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return K("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new Ht(this.database,Wi(this._delegate,e))}getParent(){K("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ht(this.database,e):null}getRoot(){return K("Reference.root",0,0,arguments.length),new Ht(this.database,this._delegate.root)}set(e,n){K("Reference.set",1,2,arguments.length),rt("Reference.set","onComplete",n,!0);const r=h_(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(K("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,RR("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}cn("Reference.update",this._delegate._path),rt("Reference.update","onComplete",n,!0);const r=G6(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){K("Reference.setWithPriority",2,3,arguments.length),rt("Reference.setWithPriority","onComplete",r,!0);const i=H6(this._delegate,e,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){K("Reference.remove",0,1,arguments.length),rt("Reference.remove","onComplete",e,!0);const n=z6(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){K("Reference.transaction",1,3,arguments.length),rt("Reference.transaction","transactionUpdate",e,!1),rt("Reference.transaction","onComplete",n,!0),DB("Reference.transaction","applyLocally",r);const i=AB(this._delegate,e,{applyLocally:r}).then(s=>new UB(s.committed,new qr(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(e,n){K("Reference.setPriority",1,2,arguments.length),rt("Reference.setPriority","onComplete",n,!0);const r=W6(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){K("Reference.push",0,2,arguments.length),rt("Reference.push","onComplete",n,!0);const r=B6(this._delegate,e),i=r.then(o=>new Ht(this.database,o));n&&i.then(()=>n(null),o=>n(o));const s=new Ht(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return cn("Reference.onDisconnect",this._delegate._path),new FB(new $6(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:wB,forceLongPolling:SB}}useEmulator(e,n,r={}){EB(this._delegate,e,n,r)}ref(e){if(K("database.ref",0,1,arguments.length),e instanceof Ht){const n=N0(this._delegate,e.toString());return new Ht(this,n)}else{const n=SR(this._delegate,e);return new Ht(this,n)}}refFromURL(e){K("database.refFromURL",1,1,arguments.length);const r=N0(this._delegate,e);return new Ht(this,r)}goOffline(){return K("database.goOffline",0,0,arguments.length),CB(this._delegate)}goOnline(){return K("database.goOnline",0,0,arguments.length),IB(this._delegate)}}el.ServerValue={TIMESTAMP:NB(),increment:t=>bB(t)};function VB({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){lT(n);const a=new og("database-standalone"),l=new ip("auth-internal",a);l.setComponent(new pn("auth-internal",()=>r,"PRIVATE"));let c;return i&&(c=new ip("app-check-internal",a),c.setComponent(new pn("app-check-internal",()=>i,"PRIVATE"))),{instance:new el(IR(t,l,c,e,o),t),namespace:s}}var jB=Object.freeze({__proto__:null,initStandalone:VB});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=el.ServerValue;function BB(t){t.INTERNAL.registerComponent(new pn("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new el(i,r)},"PUBLIC").setServiceProps({Reference:Ht,Query:ct,Database:el,DataSnapshot:qr,enableLogging:TB,INTERNAL:jB,ServerValue:$B}).setMultipleInstances(!0)),t.registerVersion(xB,LB)}BB(qe);const zB={apiKey:"AIzaSyBYTeM84x71LjRl3-a8TIOHX1tlyiy_5ik",authDomain:"stavehumle.firebaseapp.com",databaseURL:"https://stavehumle-default-rtdb.europe-west1.firebasedatabase.app",projectId:"stavehumle",storageBucket:"stavehumle.appspot.com",messagingSenderId:"852736381893",appId:"1:852736381893:web:be9b224f46ba1ed92871ac"};qe.apps.length===0&&qe.initializeApp(zB);const f_=()=>{const[t,e]=C.useState(()=>{var r;return((r=qe.auth().currentUser)==null?void 0:r.uid)||""}),n=C.useCallback(r=>{e(r?r.uid:"")},[e]);return C.useEffect(()=>qe.auth().onAuthStateChanged(n),[n]),{userId:t,path:t?`/users/${t}`:""}},WB="_avatarButton_5085p_1",HB="_providersContainer_5085p_10",GB="_provider_5085p_10",KB="_buttons_5085p_32",qB="_logOut_5085p_39",us={avatarButton:WB,providersContainer:HB,provider:GB,buttons:KB,logOut:qB},YB=!1,QB=()=>{const{userId:t}=f_(),[e,n]=C.useState(!1),[r,i]=C.useState(!1),s=C.useCallback(()=>{i(!1),n(!1)},[i]),o=C.useCallback(d=>{n(!0),qe.auth().signInWithPopup(d).catch(console.error).finally(()=>n(!1))},[]),a=C.useCallback(()=>{const{currentUser:d}=qe.auth();d&&(n(!0),qe.database().ref(`/users/${d.uid}`).set(null).then(()=>d.delete()).then(()=>n(!1)))},[]),l=C.useMemo(()=>{if(!r)return null;let d="",u=null;if(!t)d="Lagre fremgangen",u=p.jsxs(p.Fragment,{children:[p.jsx("p",{children:"Hvis du logger p, er det mulig  lse puslespillet p flere enheter. Finn ord p mobil p bussen, og fortsett spille hjemme p datamaskinen!"}),p.jsxs("div",{className:us.providersContainer,children:[p.jsx("button",{className:us.provider,disabled:e,onClick:()=>o(new qe.auth.GoogleAuthProvider),children:p.jsx(sM,{})}),p.jsx("button",{className:us.provider,disabled:e,onClick:()=>o(new qe.auth.GithubAuthProvider),children:p.jsx(iM,{})})]})]});else{const h=YB;d="Din konto",u=p.jsxs(p.Fragment,{children:[p.jsx("p",{children:"Du er n logget inn -- fremgangen din er lagret og vil vre tilgjengelig p andre enheter hvor du er logget inn."}),p.jsx("p",{children:"Hvis du logger ut, fremgangen din vil bli lagret til neste gang."}),p.jsx("div",{className:us.buttons,children:p.jsx("button",{onClick:()=>qe.auth().signOut(),className:us.logOut,children:"Logg ut"})}),h]})}return p.jsx(Ji,{title:d,onClose:s,children:u})},[r,s,t,e,o,a]),c=xm.createPortal(l,document.body);return p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>i(!0),className:[us.avatarButton,ng.button].join(" "),children:p.jsx(rM,{})}),c]})},JB=()=>{const t=zu();return p.jsxs("div",{className:Mo.header,children:[p.jsxs("h1",{children:[p.jsx(Gf,{to:"/",children:"Stavehumle"}),p.jsx(MC,{})]}),p.jsx("div",{className:[Mo.buttons,Mo.left].join(" "),children:t&&p.jsx(XD,{})}),p.jsxs("div",{className:[Mo.buttons,Mo.right].join(" "),children:[t&&p.jsx(QB,{}),p.jsx(LD,{})]})]})},XB="_container_1ga4z_1",ZB="_ldsRipple_1ga4z_10",O0={container:XB,ldsRipple:ZB},e5=()=>(DC(),p.jsx("div",{className:O0.container,children:p.jsxs("div",{className:O0.ldsRipple,children:[p.jsx("div",{}),p.jsx("div",{})]})})),kR=t=>fetch(t.replace(/^\/\//,"/"),{headers:{"Content-Type":"application/json"}}).then(e=>e.json()),Bd=Zm({key:"game/puzzleId",default:""}),t5=cD({key:"game/letters",get:({get:t})=>{const e=t(Bd),[n,...r]=e.split("");return{centerLetter:n,outerLetters:r,all:e.split("").sort().join("")}}}),p_=Zm({key:"game/words",default:[]}),m_=Zm({key:"game/words/found",default:{}}),n5=()=>{const t=zu(),{gameHash:e}=FC(),[n,r]=C.useState(),i=eg(Bd);return C.useEffect(()=>{kR(`//words/${t}/options.json`).then(s=>s[e%s.length]).then(s=>{const o=s.split(""),a=o[e%o.length],l=o.filter(c=>c!==a);return[a,...l.sort()].join("")}).then(s=>i(s)).catch(s=>{console.error(s),r(s)})},[e,t,i]),{error:n}},yo=()=>{const t=Fi(Bd);return{...Fi(t5),puzzleId:t}},r5=()=>{const t=zu(),{all:e,centerLetter:n}=yo(),r=eg(p_),[i,s]=C.useState();return C.useEffect(()=>{if(!e)return;const o=new Set(e.split(""));return kR(`//words/${t}/words.json`).then(a=>a.filter(l=>{for(let c=0;c<l.length;c+=1)if(!o.has(l[c]))return!1;return!0})).then(a=>{r(a)}).catch(s),()=>{r([])}},[e,n,t,r]),{error:i}},NR=()=>["nb-no","saved",Fi(Bd)].join("/"),Mp="found-word";class g_ extends CustomEvent{constructor(e,n,r){super(Mp,{detail:{word:e,when:n,source:r}})}}const __=t=>{C.useEffect(()=>{const e=n=>{const{detail:r}=n;t(r)};return window.addEventListener(Mp,e),()=>{window.removeEventListener(Mp,e)}},[t])},i5=({children:t,node:e})=>{const n=C.useCallback(({word:r,when:i,source:s})=>{s==="local"&&qe.database().ref(e).update({[r]:i})},[e]);return __(n),p.jsx(p.Fragment,{children:t})},is=()=>({words:Fi(p_)}),s5=({children:t,node:e})=>{const n=Fi(m_),{words:r}=is(),i=C.useCallback(s=>{const o=s.key;if(!o){console.warn("No key specified");return}if(n[o])return;const a=s.val();if(!r.includes(o)){console.warn(`"${o}" is not a recognized word`);return}const l=Date.parse(a);if(l===void 0){console.warn(`"${o}" didn't have a valid date (${a})`);return}window.dispatchEvent(new g_(o,new Date(l),"remote"))},[r,n]);return C.useEffect(()=>{const s=qe.database().ref(e);return s.on("child_added",i),()=>{s.off("child_added",i)}},[i,e]),p.jsx(p.Fragment,{children:t})},v_=t=>{try{const e=localStorage.getItem(t);if(e){const n=JSON.parse(e);if(Array.isArray(n)){localStorage.setItem(`backup/${t}`,e);const r=n.filter(i=>typeof i=="string").reduce((i,s,o)=>({...i,[s]:new Date(o)}),{});return localStorage.setItem(t,JSON.stringify(r)),v_(t)}return Object.entries(n).filter(([r,i])=>!!i).reduce((r,[i,s])=>({...r,[i]:s}),{})}}catch{}return{}},o5=({children:t})=>{const{path:e}=f_();return C.useEffect(()=>{const n={};for(let r=0;r<localStorage.length;r+=1){const i=localStorage.key(r);if(i&&!i.startsWith("backup")){if(i.includes("/saved/")){const s=v_(i);if(Object.keys(s).length===0)continue;n[i]=s}i.includes("/revealed/")&&(n[i]=localStorage.getItem(i))}}Object.keys(n).length!==0&&qe.database().ref(e).update(n)},[e]),p.jsx(p.Fragment,{children:t})},a5=({children:t,node:e})=>{const{words:n}=is();return C.useEffect(()=>{qe.database().ref(e).once("value").then(r=>{if(!r.exists())return;const i=n.reduce((a,l)=>({...a,[l]:!0}),{}),s={},o=r.val();Object.entries(o).forEach(([a,l])=>{if(!i[a]){console.warn(`"${a}" is not a recognized word`);return}const c=Date.parse(l);if(c===void 0){console.warn(`"${a}" as an invalid date (${l})`);return}s[a]=new Date(c)}),Object.entries(s).sort(([a,l],[c,d])=>+l-+d).forEach(([a,l])=>{window.dispatchEvent(new g_(a,l,"remote"))})})},[e,n]),p.jsx(p.Fragment,{children:t})},l5=({children:t})=>{const e=NR(),{userId:n}=f_();if(!n)return p.jsx(p.Fragment,{children:t});const r=`/users/${n}/${e}`;return p.jsx(o5,{node:r,children:p.jsx(i5,{node:r,children:p.jsx(a5,{node:r,children:p.jsx(s5,{node:r,children:p.jsx(p.Fragment,{children:t})})})})})},c5=({children:t})=>{const e=NR(),n=eg(m_);C.useEffect(()=>{n(v_(e))},[e,n]);const r=C.useCallback(({word:i,when:s})=>{n(o=>{const a={...o,[i]:s};return localStorage.setItem(e,JSON.stringify(a)),a})},[e,n]);return __(r),p.jsx(p.Fragment,{children:t})},u5=({children:t})=>{const{error:e}=n5(),{error:n}=r5();return Fi(p_).length?e?p.jsx("div",{children:"Error loading the letters"}):n?(console.error(n),p.jsx("div",{children:"Error loading the words"})):p.jsx(c5,{children:p.jsx(l5,{children:t})}):p.jsx(e5,{})},bR=()=>({found:Fi(m_)}),d5="_container_1kswe_1",h5="_guess_1kswe_5",f5="_letterButton_1kswe_17",p5="_centerLetter_1kswe_42",m5="_letterButtons_1kswe_53",g5="_controls_1kswe_57",Xn={container:d5,guess:h5,letterButton:f5,centerLetter:p5,letterButtons:m5,controls:g5},y_=t=>new Set(t.split("")).size===7,Fp=t=>{if(t.length<4)return 0;if(t.length===4)return 1;const e=y_(t)?7:0;return t.length+e},D0=t=>({score:C.useMemo(()=>t.map(n=>Fp(n)).reduce((n,r)=>n+r,0),[t])}),Ll=()=>{const{found:t}=bR(),{all:e,centerLetter:n}=yo(),{words:r}=is();return{onGuess:C.useCallback(s=>{if(!s)return;const o=s.toLocaleLowerCase().split("").filter(a=>e.includes(a)).join("");if(o.length!==s.length){dispatchEvent(new CustomEvent("bad-guess",{detail:"invalid-letters"}));return}if(o.length<4){dispatchEvent(new CustomEvent("bad-guess",{detail:"too-short"}));return}if(!o.includes(n)){dispatchEvent(new CustomEvent("bad-guess",{detail:"missing-center"}));return}if(t[o]){dispatchEvent(new CustomEvent("bad-guess",{detail:"already-found"}));return}if(!r.includes(o)){dispatchEvent(new CustomEvent("bad-guess",{detail:"unknown-word"}));return}dispatchEvent(new g_(o,new Date,"local"))},[e,n,t,r]),found:Object.keys(t)}},M0=t=>t.map(e=>({sort:Math.random(),value:e})).sort((e,n)=>e.sort-n.sort).map(e=>e.value),_5=()=>{const{outerLetters:t}=yo(),[e,n]=C.useState([]),r=C.useCallback(()=>{n(M0(t))},[t]);return C.useEffect(()=>{n(M0(t))},[t,n]),{shuffled:e,reshuffle:r}},w_=()=>{const{centerLetter:t,outerLetters:e}=yo(),n=["nb-no","revealed",[t,...e].join("")].join("/"),[r,i]=C.useState(!1);C.useEffect(()=>{const a=localStorage.getItem(n);i(!!a)},[n,i]);const s=C.useCallback(()=>{localStorage.setItem(n,new Date().toISOString()),window.dispatchEvent(new CustomEvent("revealed",{detail:n}))},[n]),o=C.useCallback(a=>{const{detail:l}=a;l===n&&i(!0)},[n,i]);return C.useEffect(()=>(window.addEventListener("revealed",o),()=>{window.removeEventListener("revealed",o)}),[o]),{revealed:r,revealAnswers:s}},vi=({letter:t,className:e,onClick:n,...r})=>p.jsx("button",{"data-letter":t,className:[Xn.letterButton,e].filter(Boolean).join(" "),...r,onMouseUp:n,children:t}),v5=t=>p.jsx(vi,{...t,className:Xn.centerLetter}),y5=()=>{const{onGuess:t}=Ll(),{all:e,centerLetter:n,outerLetters:r}=yo(),[i,s]=C.useState(""),{shuffled:o,reshuffle:a}=_5(),{revealed:l}=w_(),c=C.useRef("");c.current=i,C.useEffect(()=>{c.current="",s("")},[r,n]);const d=C.useCallback(()=>{t(c.current),s("")},[t,c]),u=C.useCallback(m=>{const T=m.currentTarget.getAttribute("data-letter");s(v=>`${v}${T}`)},[s]),h=C.useCallback(()=>{s(m=>m.substr(0,m.length-1))},[s]),g=C.useCallback(m=>{const{key:y}=m;if(!l){if(y==="Backspace"){s(T=>T.substring(0,T.length-1));return}if(y===" "){a(),m.preventDefault();return}y==="Enter"&&d(),e.includes(y.toLocaleLowerCase())&&s(T=>`${T}${y}`)}},[e,d,a,l]);return C.useEffect(()=>(document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}),[g]),p.jsxs("div",{className:Xn.container,children:[p.jsx("div",{className:Xn.guess,children:i||p.jsx(p.Fragment,{children:""})}),p.jsxs("div",{className:Xn.letterButtons,children:[p.jsxs("div",{className:Xn.topRow,children:[p.jsx(vi,{onClick:u,disabled:l,letter:o[0]}),p.jsx(vi,{onClick:u,disabled:l,letter:o[1]})]}),p.jsxs("div",{className:Xn.middleRow,children:[p.jsx(vi,{onClick:u,disabled:l,letter:o[2]}),p.jsx(v5,{onClick:u,disabled:l,letter:n}),p.jsx(vi,{onClick:u,disabled:l,letter:o[3]})]}),p.jsxs("div",{className:Xn.bottomRow,children:[p.jsx(vi,{onClick:u,disabled:l,letter:o[4]}),p.jsx(vi,{onClick:u,disabled:l,letter:o[5]})]})]}),p.jsxs("div",{className:Xn.controls,children:[p.jsx("button",{disabled:l,onClick:h,"aria-label":"baksiden",children:p.jsx(SD,{})}),p.jsx("button",{disabled:l,onClick:a,"aria-label":"tilfeldig rekkeflge",children:p.jsx(TD,{})}),p.jsx("button",{disabled:l,onClick:d,"aria-label":"sende inn",children:p.jsx(ED,{})})]})]})},w5=({reason:t})=>{let e="";switch(t){case"already-found":e="ordet er allerede funnet";break;case"invalid-letters":e="bruker ugyldige bokstaver";break;case"missing-center":e="mangler obligatorisk bokstaven";break;case"too-short":e="for kort";break;case"unknown-word":e="ukjent ord";break;default:return null}return p.jsx("span",{children:e})},S5="_container_1brqu_1",E5="_pangram_1brqu_24",C5="_points_1brqu_29",Hh={container:S5,pangram:E5,points:C5},I5=t=>!!(t&&t.points),T5=t=>!!(t&&t.isPangram),R5=()=>{const[t,e]=C.useState(),n=C.useRef(),r=C.useCallback(a=>{if(e(a),n.current&&clearTimeout(n.current),!a){n.current=null;return}n.current=setTimeout(()=>{e(void 0),n.current=null},2500)},[n,e]),i=C.useCallback(a=>{const l=a.detail;r(l)},[r]),s=C.useCallback(({word:a,source:l})=>{l==="local"&&(y_(a)?r({points:Fp(a),isPangram:!0}):r({points:Fp(a)}))},[r]);C.useEffect(()=>(window.addEventListener("bad-guess",i),()=>{window.removeEventListener("bad-guess",i)}),[i]),__(s);const o=C.useMemo(()=>t?T5(t)?p.jsxs("span",{className:Hh.pangram,children:["Pangram!",p.jsx("br",{}),"+",t.points," poeng"]}):I5(t)?p.jsxs("span",{className:Hh.points,children:["+",t.points," poeng"]}):p.jsx(w5,{reason:t}):null,[t]);return p.jsx("div",{className:Hh.container,children:o})},k5="_gameContainer_4jfbn_1",N5="_buttonsContainer_4jfbn_8",F0={gameContainer:k5,buttonsContainer:N5},b5="_container_hzg2f_1",P5="_grid_hzg2f_5",A5="_border_hzg2f_14",x5="_letter_hzg2f_18",L5="_filler_hzg2f_22",O5="_header_hzg2f_26",D5="_mode_hzg2f_39",M5="_active_hzg2f_45",et={container:b5,grid:P5,border:A5,letter:x5,filler:L5,header:O5,mode:D5,active:M5},Gh=p.jsx("span",{className:et.filler,children:""}),F5=({words:t,range:[e,n]})=>{const{all:r}=yo(),i=[p.jsx("th",{children:""},"blank")],s=[];for(let a=e;a<=n;a+=1){i.push(p.jsx("th",{children:a},a));const l=t.filter(c=>c.length===a).length;s.push(p.jsx("td",{children:l||Gh},`total @ ${a}`))}i.push(p.jsx("th",{children:""},"column-sum"));const o=[];for(let a=0;a<r.length;a+=1){const l=r[a],c=t.filter(u=>u[0]===l),d=[p.jsx("td",{className:[et.border,et.letter].join(" "),children:l},l)];for(let u=e;u<=n;u+=1){const h=c.filter(g=>g.length===u).length;d.push(p.jsx("td",{children:h||Gh},`${l} @ ${u}`))}d.push(p.jsx("td",{className:et.border,children:c.length||Gh},`${l} @ total`)),o.push(p.jsx("tr",{children:d},`row-${l}`))}return o.push(p.jsxs("tr",{className:et.border,children:[p.jsx("td",{children:""}),s,p.jsx("td",{children:t.length})]},"row-totals")),p.jsxs("table",{className:et.grid,children:[p.jsx("thead",{children:p.jsx("tr",{className:et.border,children:i})}),p.jsx("tbody",{children:o})]})},U5="_button_1q7tf_1",V5={button:U5},j5=()=>{const[t,e]=C.useState(!1),n=C.useMemo(()=>t?p.jsxs(Ji,{title:"Oversikt",onClose:()=>e(!1),children:[p.jsx("p",{children:"Oversikten er et verkty for  hjelpe deg  finne alle ordene i puslespillet. Radene viser antall ord som starter med en viss bokstav, og kolonnene viser antall ord av hver lengde."}),p.jsx("p",{children:"Oversikten viser ogs antall ord totalt. Lykke til med  finne alt!"})]}):null,[t,e]);return p.jsxs(p.Fragment,{children:[p.jsx("button",{className:V5.button,onClick:()=>e(!0),"aria-label":"Oversikten hjelp",children:p.jsx(tg,{})}),n]})},Kh=(...t)=>t.filter(Boolean).join(" "),$5=()=>{const{found:t}=Ll(),{words:e}=is(),[n,r]=C.useState("remaining"),i=C.useMemo(()=>{if(n==="all")return e;if(n==="found")return t;const o=t.reduce((a,l)=>({...a,[l]:!0}),{});return e.filter(a=>!o[a])},[n,e,t]),s=e.reduce(([o,a],l)=>[Math.min(o,l.length),Math.max(a,l.length)],[1e3,3]);return p.jsxs("div",{className:et.container,children:[p.jsxs("div",{className:et.header,children:[p.jsx("button",{onClick:()=>r("found"),className:Kh(et.mode,et.found,n==="found"&&et.active),children:"Funnet"}),p.jsx("button",{onClick:()=>r("remaining"),className:Kh(et.mode,et.remaining,n==="remaining"&&et.active),children:"Gjenstr"}),p.jsx("button",{onClick:()=>r("all"),className:Kh(et.mode,et.all,n==="all"&&et.active),children:"Alt"}),p.jsx(j5,{})]}),p.jsx(F5,{range:s,words:i})]})},B5="_container_10tyr_1",z5="_bars_10tyr_10",W5="_progressBarContainer_10tyr_18",H5="_progress_10tyr_18",G5="_genius_10tyr_36",K5="_currentPoints_10tyr_44",q5="_totalPoints_10tyr_48",Y5="_help_10tyr_52",Cr={container:B5,bars:z5,progressBarContainer:W5,progress:H5,genius:G5,currentPoints:K5,totalPoints:q5,help:Y5},Q5=()=>{const{found:t}=Ll(),{words:e}=is(),{score:n}=D0(t),{score:r}=D0(e),[i,s]=C.useState(!1),o=C.useMemo(()=>i?p.jsxs(Ji,{title:"Poeng",onClose:()=>s(!1),children:[p.jsx("p",{children:"Poeng beregnes ut fra antall ord som har blitt funnet. Hvert ord gir ulike poengsummer."}),p.jsxs("ul",{children:[p.jsxs("li",{children:["ord p fire bokstaver er verdt ",p.jsx("strong",{children:"ett poeng"})]}),p.jsxs("li",{children:["hver bokstave etter fire er verdt ",p.jsx("strong",{children:"ett ekstra poeng"})]}),p.jsxs("li",{children:["ord som bruker alle bokstavene minst en gang (et pangram) gir"," ",p.jsx("strong",{children:"syv ekstra poeng"})]})]}),p.jsx("h3",{children:"Eksempel"}),p.jsxs("p",{children:["HIKLOS",p.jsx("strong",{children:"T"})]}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"hist"})," er 4 poeng"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"hittil"})," er 6 poeng"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"holistisk"})," er (9 + 7) = 16 poeng"]})]})]}):null,[i]),a=100*n/r,l=a>=70;return p.jsxs("div",{className:Cr.container,children:[p.jsxs("div",{className:Cr.bars,children:[p.jsx("span",{className:Cr.currentPoints,children:n}),p.jsx("div",{className:[Cr.progressBarContainer,l&&Cr.genius].filter(Boolean).join(" "),title:`${n} av ${r} poeng`,id:"points-progress",children:p.jsx("div",{className:Cr.progress,style:{width:`${a.toFixed(2)}%`}})}),p.jsx("span",{className:Cr.totalPoints,children:r})]}),p.jsx("button",{onClick:()=>s(!0),className:Cr.help,"aria-label":"poeng hjelp",children:p.jsx(tg,{})}),o]})},J5="_container_1qzg6_1",X5="_wordList_1qzg6_12",Z5="_content_1qzg6_22",ez="_buttons_1qzg6_28",qh={container:J5,wordList:X5,content:Z5,buttons:ez},tz="_button_1ge3u_1",nz={button:tz},rz=()=>{const[t,e]=C.useState(!1),n=C.useMemo(()=>t?p.jsxs(Ji,{title:"Hva er disse ordene?",onClose:()=>e(!1),children:[p.jsxs("p",{children:["Ordene som brukes her kommer fra den"," ",p.jsx("a",{href:"https://www.nb.no/sprakbanken/ressurskatalog/oai-nb-no-sbr-5/",target:"_blank",rel:"noopener noreferrer",children:"Norske ordbanken"}),". Alle ord finnes, men noen ord blir sjelden (eller aldri) sett i det virkelige liv."]}),p.jsxs("p",{children:[p.jsx("a",{href:"mailto:evancharlton+humle@gmail.com",target:"_blank",rel:"noopener noreferrer",children:"Skriv en e-post"})," ","hvis du finner et galt ord "]})]}):!1,[t]);return p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>e(!0),className:nz.button,"aria-label":"funnet ord hjelp",children:p.jsx(tg,{})}),n]})},iz="_reveal_9i849_1",sz="_revealContainer_9i849_27",U0={reveal:iz,revealContainer:sz},oz=()=>{const{revealed:t,revealAnswers:e}=w_(),[n,r]=C.useState(!1),{found:i}=Ll(),{words:s}=is(),o=s.length-i.length,a=C.useMemo(()=>n?p.jsxs(Ji,{title:"Er du ferdig?",onClose:()=>r(!1),children:[p.jsx("h2",{children:"Avdekke alle ordene?"}),p.jsxs("p",{children:["Nr du er ferdig, kan du vise alle ordene. Du har ",o," ord som gjenstr!"]}),p.jsx("div",{className:U0.revealContainer,children:p.jsx("button",{onClick:()=>{e(),r(!1)},children:"Jeg er ferdig!"})}),p.jsxs("p",{children:["Hvis du vil forsette  ske, klikk p ",p.jsx("strong",{children:"Lukk"})," ","nedenfor."]})]}):null,[n,r,o,e]);return p.jsxs(p.Fragment,{children:[p.jsx("button",{className:U0.reveal,disabled:t,onClick:()=>r(!0),"aria-label":"Avdekke alle ordene",children:p.jsx(CD,{})}),a]})},az="_word_105ix_1",lz="_revealed_105ix_12",cz="_pangram_105ix_16",Yh={word:az,revealed:lz,pangram:cz},uz=t=>t.currentTarget.blur(),dz=({children:t})=>{const{found:e}=bR(),n=!e[t],r=y_(t);return p.jsx("a",{className:[Yh.word,n&&Yh.revealed,r&&Yh.pangram].filter(Boolean).join(" "),href:`https://naob.no/sk?q=${t}`,target:"_blank",rel:"noopener noreferrer",onClick:uz,children:t},t)},hz=()=>{const{revealed:t}=w_(),{words:e}=is(),{found:n}=Ll(),r=C.useMemo(()=>[...t?e:n].sort().map(i=>p.jsx(dz,{children:i},i)),[n,t,e]);return p.jsxs("div",{className:qh.container,children:[p.jsxs("div",{className:qh.buttons,children:[p.jsx(rz,{}),p.jsx(oz,{})]}),p.jsx("div",{className:qh.wordList,children:r})]})},fz="_column_wit41_1",pz="_header_wit41_15",V0={column:fz,header:pz},mz=()=>p.jsxs("div",{className:V0.column,children:[p.jsx("div",{className:V0.header,children:p.jsx(Q5,{})}),p.jsx($5,{}),p.jsx(hz,{})]}),j0=()=>p.jsxs("div",{className:F0.gameContainer,children:[p.jsxs("div",{className:F0.buttonsContainer,children:[p.jsx(R5,{}),p.jsx(y5,{})]}),p.jsx(mz,{})]}),gz=()=>{const t=Mm();return p.jsx("div",{className:dD.container,children:p.jsxs(lD,{children:[p.jsx(JB,{}),p.jsx(fE,{})]},[t.lang??"<lang>",t.gameHash??"<game-hash>"].join("/"))})},_z=()=>p.jsx(db,{children:p.jsx(ib,{children:p.jsxs(ds,{path:"/",element:p.jsx(gz,{}),children:[p.jsx(ds,{path:"",element:p.jsx(_b,{})}),p.jsxs(ds,{path:":lang",element:p.jsx(u5,{children:p.jsx(fE,{})}),children:[p.jsx(ds,{path:"",element:p.jsx(j0,{})}),p.jsx(ds,{path:":gameId",element:p.jsx(j0,{})})]})]})})});tE(document.getElementById("root")).render(p.jsx(C.StrictMode,{children:p.jsx(_z,{})}));
