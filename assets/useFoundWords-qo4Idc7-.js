import{b as l,c as f,a,d as g}from"./firebase-import-BUDYfVK1.js";import{r as c}from"./index-BBXoJzDt.js";import{u as m}from"./useLang-DtiibKzr.js";const d=l({key:"game/puzzleId",default:""}),v=f({key:"game/letters",get:({get:e})=>{const t=e(d),[s,...n]=t.split("");return{centerLetter:s,outerLetters:n,all:t.split("").sort().join("")}}}),p=l({key:"game/words",default:[]}),w=l({key:"game/words/found",default:{}}),h=l({key:"game/reveals",default:[]}),E=()=>{const e=a(d);return{...a(v),puzzleId:e}},z=(e="saved")=>{const t=m(),s=a(d);return["stavehumle",t,e,s].join("/")},u="found-word";class L extends CustomEvent{constructor(t,s,n){super(u,{detail:{word:t,when:s,source:n}})}}const k=e=>{c.useEffect(()=>{const t=s=>{const{detail:n}=s;e(n)};return window.addEventListener(u,t),()=>{window.removeEventListener(u,t)}},[e])},y=()=>({words:a(p)}),W=()=>{const e=z("revealed"),[t,s]=g(h);return c.useEffect(()=>{const n=localStorage.getItem(e);if(!n){s([]);return}try{const r=JSON.parse(n);if(!Array.isArray(r))return;s(r)}catch(r){console.error(r)}},[e,s]),{reveals:t,revealAnswers:c.useCallback(n=>{s(r=>{const o=[...r,{...n,when:new Date().toISOString()}];return localStorage.setItem(e,JSON.stringify(o)),o})},[e,s])}},_=(e,t)=>t,F=()=>{const e=a(w),{reveals:t}=W(),{words:s}=y(),n=s.filter(r=>!e[r]).filter(r=>t.some(o=>{const i=o.which;switch(i){case"all":return!0;case"letter":return r[0]===o.letter;case"length":return r.length===o.length;case"letter-length":return r[0]===o.letter&&r.length===o.length;default:return _(i,!1)}}));return{found:e,revealedWords:n}};export{L as F,p as a,k as b,w as c,y as d,z as e,F as f,d as g,W as h,_ as n,E as u};
